# =============================================================================
# APPLICATION
# =============================================================================
NODE_ENV=development
APP_NAME=fast-track-backend
APP_PORT=3000
APP_URL=http://localhost:3000

# =============================================================================
# DATABASE (Supabase PostgreSQL)
# =============================================================================
DATABASE_URL=postgresql://postgres:password@db.supabase.co:5432/postgres
DB_HOST=db.supabase.co
DB_PORT=5432
DB_NAME=postgres
DB_USER=postgres
DB_PASSWORD=your_supabase_password
DB_SSL=true

# =============================================================================
# AUTHENTICATION
# =============================================================================
# JWT Configuration
JWT_SECRET=your_jwt_secret_change_this_in_production_min_32_chars
JWT_EXPIRY=24h
JWT_REFRESH_EXPIRY=7d

# LearnWorlds SSO Integration
LEARNWORLDS_API_URL=https://api.learnworlds.com/v2
LEARNWORLDS_API_KEY=your_learnworlds_api_key
LEARNWORLDS_API_SECRET=your_learnworlds_api_secret
LEARNWORLDS_SCHOOL_ID=your_school_id

# LearnWorlds SSO - HMAC-SHA256 secret for SSO token validation
# Obtain from LearnWorlds admin panel: Settings > Single Sign-On
LEARNWORLDS_SSO_SECRET=your_sso_secret_here

# LearnWorlds Webhooks - Secret for webhook signature verification
# Obtain from LearnWorlds admin panel: Settings > Webhooks
LEARNWORLDS_WEBHOOK_SECRET=your_webhook_secret_here

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_BASE_PATH=/api
API_VERSION=v1

# CORS
CORS_ORIGIN=http://localhost:3000,http://localhost:5173
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
EXPORT_RATE_LIMIT_MAX=10
EXPORT_RATE_LIMIT_WINDOW_MS=3600000
AI_RATE_LIMIT_USER=10
AI_RATE_LIMIT_ADMIN=50
AI_RATE_LIMIT_WINDOW_MS=3600000

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================
# n8n AI Agent Webhook
N8N_WEBHOOK_URL=https://your-n8n-instance.com/webhook/ai-help
N8N_TIMEOUT_MS=30000

# =============================================================================
# PDF EXPORT
# =============================================================================
PUPPETEER_EXECUTABLE_PATH=
PDF_EXPORT_TIMEOUT_MS=60000
LARGE_SUBMISSION_THRESHOLD_MB=1

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=debug
LOG_FILE_PATH=./logs
LOG_MAX_FILES=14
LOG_MAX_SIZE=20m

# =============================================================================
# REDIS (for rate limiting and caching)
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://localhost:6379

# =============================================================================
# MONITORING
# =============================================================================
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_AI_INTEGRATION=true
ENABLE_PDF_EXPORT=true
ENABLE_SWAGGER_UI=true

# =============================================================================
# DEVELOPMENT
# =============================================================================
DEBUG=fasttrack:*
ENABLE_QUERY_LOGGING=false
