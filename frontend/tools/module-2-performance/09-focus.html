<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sprint 09 - Focus, Discipline & Productivity | Fast Track</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../../shared/js/tool-db.js"></script>
    <script src="../../shared/js/dependency-injection.js"></script>
    <link rel="stylesheet" href="../../shared/css/cognitive-load.css">
    <script src="../../shared/js/cognitive-load.js"></script>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @font-face {
            font-family: 'Plaak';
            src: url('Plaak3Trial-43-Bold.woff2') format('woff2');
            font-weight: bold;
            font-style: normal;
        }
        @font-face {
            font-family: 'Riforma';
            src: url('RiformaLL-Regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }
        @font-face {
            font-family: 'Monument';
            src: url('MonumentGrotesk-Mono.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }
        body {
            font-family: 'Riforma', sans-serif;
            margin: 0;
            padding: 0;
        }
        .plaak {
            font-family: 'Plaak', sans-serif;
            font-weight: bold;
        }
        .monument {
            font-family: 'Monument', monospace;
        }
        .worksheet-input {
            width: 100%;
            border: 1px solid #E0E0E0;
            padding: 12px 16px;
            font-family: 'Riforma', sans-serif;
            font-size: 18px;
            border-radius: 4px;
            transition: border-color 0.3s;
        }
        .worksheet-input:focus {
            outline: none;
            border-color: #000000;
        }
        .worksheet-textarea {
            width: 100%;
            border: 1px solid #E0E0E0;
            padding: 12px 16px;
            font-family: 'Riforma', sans-serif;
            font-size: 18px;
            border-radius: 4px;
            min-height: 120px;
            resize: vertical;
            transition: border-color 0.3s;
        }
        .worksheet-textarea:focus {
            outline: none;
            border-color: #000000;
        }
        .numbered-section {
            background: #000000;
            color: #FFFFFF;
            padding: 10px 16px;
            font-size: 26px;
            font-family: 'Plaak', sans-serif;
            border-radius: 4px;
            display: inline-block;
            margin-bottom: 16px;
        }
        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #E0E0E0;
            transition: background 0.3s;
        }
        .progress-dot.active {
            background: #000000;
        }
        .slider-container {
            width: 100%;
            margin: 20px 0;
        }
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(to right, #ff0000 0%, #ffff00 50%, #00ff00 100%);
            outline: none;
            -webkit-appearance: none;
        }
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #000000;
            cursor: pointer;
            border: 3px solid #FFFFFF;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #000000;
            cursor: pointer;
            border: 3px solid #FFFFFF;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .impact-easy-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 20px 0;
        }
        .quadrant {
            border: 2px solid #E0E0E0;
            padding: 16px;
            border-radius: 8px;
            min-height: 150px;
        }
        .quadrant.high-impact-easy {
            background: #E8F5E9;
            border-color: #4CAF50;
        }
        .quadrant.high-impact-hard {
            background: #FFF9C4;
            border-color: #FFC107;
        }
        .quadrant.low-impact-easy {
            background: #E3F2FD;
            border-color: #2196F3;
        }
        .quadrant.low-impact-hard {
            background: #FFEBEE;
            border-color: #F44336;
        }
        .task-item {
            background: white;
            padding: 8px 12px;
            margin: 4px 0;
            border-radius: 4px;
            border: 1px solid #E0E0E0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const CONFIG = {
            SUPABASE_URL: 'https://lutzzfaedkbsmbobmrzx.supabase.co',
            SUPABASE_ANON_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx1dHp6ZmFlZGtic21ib2Jtcnp4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA4MDA0MDQsImV4cCI6MjA4NjM3NjQwNH0.o2gJba85vDl4NLS-C8Mq3OudWKxet-b0IqO9kazqb8U',
            TOOL_SLUG: 'focus',
            AUTOSAVE_DELAY: 2000
        };

        // Initialize Supabase client
        const { createClient } = supabase;
        const supabaseClient = createClient(CONFIG.SUPABASE_URL, CONFIG.SUPABASE_ANON_KEY);

        // Make Supabase client globally available for dependency injection
        window.supabaseClient = supabaseClient;

        // Initialize ToolDB and dependency injection
        ToolDB.init(CONFIG.TOOL_SLUG);
        DependencyInjection.init(CONFIG.TOOL_SLUG);

        // Initialize cognitive load components
        CognitiveLoad.init('focus', {"insights":["Multitasking is a lie. Each task switch costs 23 minutes of refocus time.","The Impact/Easy Matrix is the single most powerful prioritization tool."],"caseStudy":{"before":"[PLACEHOLDER] CEO responded to every email within 5 minutes.","after":"[PLACEHOLDER] Daily plan with 3 priorities. Strategic thinking time doubled.","quote":"[PLACEHOLDER] The Empty Brain exercise freed up mental bandwidth."}});
        const { FastTrackInsight, ScienceBox, WarningBox, CaseStudy, ScienceBookmarkIcon, ToolGuideDrawer } = CognitiveLoad.components;

        function FocusApp() {
            const [step, setStep] = useState(0);
            const [toolType, setToolType] = useState('');
            const [showHelp, setShowHelp] = useState(false);
            const [data, setData] = useState({
                companyId: '',
                userId: '',
                // Individual Tools Data
                emptyBrain: {
                    tasks: ['', '', '', '', '', '', '', '', '', ''],
                    impactEasy: {
                        highImpactEasy: [],
                        highImpactHard: [],
                        lowImpactEasy: [],
                        lowImpactHard: []
                    }
                },
                dailyPlan: {
                    topPriorities: ['', '', ''],
                    schedule: {
                        morning: '',
                        midday: '',
                        afternoon: '',
                        evening: ''
                    },
                    energyPeaks: ''
                },
                eliminate: {
                    part1: {
                        eliminate: ['', '', ''],
                        limit: ['', '', ''],
                        delegate: ['', '', '']
                    },
                    part2: {
                        eliminateActions: '',
                        limitActions: '',
                        delegateActions: ''
                    }
                },
                distractions: {
                    digital: ['', '', ''],
                    physical: ['', '', ''],
                    actions: ''
                },
                routines: {
                    morning: '',
                    workStart: '',
                    breaks: '',
                    endOfDay: '',
                    keyRoutines: ''
                },
                threeRoutines: {
                    routine1: { name: '', trigger: '', action: '', reward: '' },
                    routine2: { name: '', trigger: '', action: '', reward: '' },
                    routine3: { name: '', trigger: '', action: '', reward: '' }
                },
                flowState: {
                    clearGoals: '',
                    challengeSkill: '',
                    environment: '',
                    preFlowRitual: '',
                    feedback: ''
                },
                // Team Tool Data
                teamDynamics: {
                    focusPatterns: '',
                    productivityChallenges: '',
                    collectiveHabits: '',
                    whatWorked: '',
                    whatDidntWork: '',
                    whatNext: ''
                }
            });

            useEffect(() => {
                const savedData = localStorage.getItem('sprint09_focus_data');
                if (savedData) {
                    setData(JSON.parse(savedData));
                }
            }, []);

            useEffect(() => {
                const timer = setTimeout(() => {
                    localStorage.setItem('sprint09_focus_data', JSON.stringify(data));
                }, 2000);
                return () => clearTimeout(timer);
            }, [data]);

            const updateData = (path, value) => {
                setData(prev => {
                    const newData = { ...prev };
                    const keys = path.split('.');
                    let current = newData;
                    for (let i = 0; i < keys.length - 1; i++) {
                        current = current[keys[i]];
                    }
                    current[keys[keys.length - 1]] = value;
                    return newData;
                });
            };

            const updateArrayItem = (path, index, value) => {
                setData(prev => {
                    const newData = { ...prev };
                    const keys = path.split('.');
                    let current = newData;
                    for (let i = 0; i < keys.length; i++) {
                        if (i === keys.length - 1) {
                            current[keys[i]][index] = value;
                        } else {
                            current = current[keys[i]];
                        }
                    }
                    return newData;
                });
            };

            const moveTaskToQuadrant = (task, quadrant) => {
                setData(prev => {
                    const newData = { ...prev };
                    // Remove from all quadrants
                    Object.keys(newData.emptyBrain.impactEasy).forEach(key => {
                        newData.emptyBrain.impactEasy[key] = newData.emptyBrain.impactEasy[key].filter(t => t !== task);
                    });
                    // Add to selected quadrant
                    if (task.trim()) {
                        newData.emptyBrain.impactEasy[quadrant].push(task);
                    }
                    return newData;
                });
            };

            const exportPDF = async () => {
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pageWidth = pdf.internal.pageSize.getWidth();
                const pageHeight = pdf.internal.pageSize.getHeight();
                const margin = 20;
                let yPos = margin;

                pdf.setFontSize(24);
                pdf.setFont(undefined, 'bold');
                pdf.text('SPRINT 09: FOCUS, DISCIPLINE & PRODUCTIVITY', pageWidth / 2, yPos, { align: 'center' });

                yPos += 15;
                pdf.setFontSize(12);
                pdf.setFont(undefined, 'normal');
                pdf.text(`Company: ${data.companyId}`, margin, yPos);
                yPos += 7;
                pdf.text(`User: ${data.userId}`, margin, yPos);
                yPos += 7;
                pdf.text(`Type: ${toolType === 'individual' ? 'Individual Assessment' : 'Team Assessment'}`, margin, yPos);
                yPos += 10;

                if (toolType === 'individual') {
                    // Empty Brain & Impact/Easy
                    pdf.setFontSize(16);
                    pdf.setFont(undefined, 'bold');
                    pdf.text('1. EMPTY BRAIN & IMPACT/EASY MATRIX', margin, yPos);
                    yPos += 10;

                    pdf.setFontSize(10);
                    pdf.setFont(undefined, 'normal');
                    Object.entries(data.emptyBrain.impactEasy).forEach(([quadrant, tasks]) => {
                        if (tasks.length > 0) {
                            pdf.text(quadrant.replace(/([A-Z])/g, ' $1').trim() + ':', margin, yPos);
                            yPos += 5;
                            tasks.forEach(task => {
                                pdf.text(`  • ${task}`, margin + 5, yPos);
                                yPos += 5;
                                if (yPos > pageHeight - margin) {
                                    pdf.addPage();
                                    yPos = margin;
                                }
                            });
                            yPos += 3;
                        }
                    });

                    // Add more sections as needed
                    pdf.setFontSize(16);
                    pdf.setFont(undefined, 'bold');
                    pdf.text('2. DAILY PLAN', margin, yPos);
                    yPos += 10;

                    pdf.setFontSize(10);
                    pdf.setFont(undefined, 'normal');
                    data.dailyPlan.topPriorities.forEach((priority, idx) => {
                        if (priority) {
                            pdf.text(`Priority ${idx + 1}: ${priority}`, margin, yPos);
                            yPos += 5;
                        }
                    });

                } else {
                    // Team tool sections
                    pdf.setFontSize(16);
                    pdf.setFont(undefined, 'bold');
                    pdf.text('TEAM DYNAMICS & WWW', margin, yPos);
                    yPos += 10;

                    const sections = [
                        { title: 'Focus Patterns', content: data.teamDynamics.focusPatterns },
                        { title: 'Productivity Challenges', content: data.teamDynamics.productivityChallenges },
                        { title: 'What Worked', content: data.teamDynamics.whatWorked },
                        { title: 'What Didn\'t Work', content: data.teamDynamics.whatDidntWork },
                        { title: 'What Next', content: data.teamDynamics.whatNext }
                    ];

                    sections.forEach(section => {
                        if (section.content) {
                            pdf.setFontSize(12);
                            pdf.setFont(undefined, 'bold');
                            pdf.text(section.title + ':', margin, yPos);
                            yPos += 7;

                            pdf.setFontSize(10);
                            pdf.setFont(undefined, 'normal');
                            const lines = pdf.splitTextToSize(section.content, pageWidth - 2 * margin);
                            lines.forEach(line => {
                                if (yPos > pageHeight - margin) {
                                    pdf.addPage();
                                    yPos = margin;
                                }
                                pdf.text(line, margin, yPos);
                                yPos += 5;
                            });
                            yPos += 5;
                        }
                    });
                }

                pdf.save(`Sprint_09_Focus_${data.companyId}_${data.userId}.pdf`);

                // Save to Supabase
                try {
                    const userId = localStorage.getItem('ft_user_id');
                    if (userId) {
                        const questionMappings = {
                            golden_hour: { emptyBrain: data.emptyBrain, dailyPlan: data.dailyPlan, flowState: data.flowState },
                            distraction_plan: { distractions: data.distractions, eliminate: data.eliminate },
                            daily_reflection: { routines: data.routines, threeRoutines: data.threeRoutines },
                            team_rituals: data.teamDynamics
                        };
                        await ToolDB.save(userId, questionMappings);
                        await ToolDB.markComplete(userId);
                        console.log('Saved to Supabase successfully.');
                    }
                } catch (error) {
                    console.error('Supabase submission error:', error);
                    // Don't alert - PDF still downloads successfully
                }
            };

            const getTotalSteps = () => {
                if (toolType === 'individual') return 8;
                if (toolType === 'team') return 1;
                return 0;
            };

            const getStepProgress = () => {
                const total = getTotalSteps();
                if (step <= 0.5) return 0;
                if (step === 999) return 100;
                return Math.round((step / total) * 100);
            };

            const renderProgressIndicator = () => {
                if (step === 0 || step === 0.5) return null;

                const total = getTotalSteps();
                const steps = Array.from({ length: total }, (_, i) => i + 1);
                const progress = getStepProgress();

                return (
                    <div className="fixed top-0 left-0 right-0 bg-white border-b border-gray-200 z-50">
                        <div className="max-w-4xl mx-auto px-6 py-4">
                            <div className="flex items-center justify-between mb-2">
                                <span className="text-sm font-semibold monument">
                                    SPRINT 09: FOCUS, DISCIPLINE & PRODUCTIVITY
                                </span>
                                <span className="text-sm font-semibold">
                                    {step === 999 ? 'CANVAS' : `STEP ${step} OF ${total}`}
                                </span>
                            </div>
                            <div className="flex items-center gap-2">
                                {steps.map((s, idx) => (
                                    <React.Fragment key={s}>
                                        <div className={`progress-dot ${step >= s ? 'active' : ''}`} />
                                        {idx < steps.length - 1 && (
                                            <div className="flex-1 h-0.5 bg-gray-200">
                                                <div
                                                    className="h-full bg-black transition-all duration-300"
                                                    style={{ width: step > s ? '100%' : '0%' }}
                                                />
                                            </div>
                                        )}
                                    </React.Fragment>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            };

            const renderIntroPage = () => (
                <div className="min-h-screen bg-black text-white flex flex-col justify-center items-center p-8">
                    <div className="max-w-4xl w-full">
                        <h1 className="plaak text-9xl mb-16 text-center leading-none">
                            BEFORE WE START
                        </h1>

                        <div className="space-y-16">
                            <section>
                                <h2 className="plaak text-6xl mb-6">YOUR DETAILS</h2>
                                <div className="space-y-6 bg-white text-black p-8 rounded">
                                    <div>
                                        <label className="block text-sm font-bold mb-2">COMPANY ID *</label>
                                        <input
                                            type="text"
                                            className="worksheet-input"
                                            value={data.companyId}
                                            onChange={(e) => updateData('companyId', e.target.value)}
                                            placeholder="Enter your company identifier"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-sm font-bold mb-2">USERNAME ID *</label>
                                        <input
                                            type="text"
                                            className="worksheet-input"
                                            value={data.userId}
                                            onChange={(e) => updateData('userId', e.target.value)}
                                            placeholder="Enter your username"
                                        />
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h2 className="plaak text-6xl mb-6" style={{color: '#fff469'}}>SPRINT INFO</h2>
                                <div className="space-y-4 text-xl leading-relaxed">
                                    <p>
                                        This sprint focuses on mastering <strong>Focus, Discipline, and Productivity</strong> -
                                        the core elements of high performance.
                                    </p>
                                    <p className="mt-4">
                                        <strong>Individual Tools:</strong> Empty Brain & Impact/Easy Matrix, Daily Plan,
                                        Eliminate/Limit/Delegate, Reduce Distractions, Key Routines, 3 Daily Routines Builder,
                                        and Flow State Priming.
                                    </p>
                                    <p className="mt-4">
                                        <strong>Team Tool:</strong> Individual and Team Focus & Productivity Dynamics with WWW Analysis.
                                    </p>
                                </div>
                            </section>

                            <section>
                                <h2 className="plaak text-6xl mb-6" style={{color: '#fff469'}}>MISTAKES TO AVOID</h2>
                                <ul className="space-y-3 text-xl leading-relaxed list-disc list-inside">
                                    <li>Multitasking - it fractures attention and reduces flow</li>
                                    <li>Skipping the pre-focus ritual - consistency breeds discipline</li>
                                    <li>Not protecting focus blocks - treat them as non-negotiable</li>
                                    <li>Neglecting energy management - optimize when you work on what</li>
                                    <li>Setting unrealistic goals - balance challenge with skill level</li>
                                </ul>
                            </section>
                        </div>

                        <div className="flex justify-center gap-6 mt-16">
                            <button
                                onClick={() => setShowHelp(true)}
                                className="px-8 py-4 border-2 border-white text-white hover:bg-white hover:text-black transition-all text-lg font-bold"
                            >
                                HELP
                            </button>
                            <button
                                onClick={() => setStep(0.5)}
                                disabled={!data.companyId || !data.userId}
                                className="px-8 py-4 bg-white text-black hover:bg-gray-200 transition-all text-lg font-bold disabled:opacity-50 disabled:cursor-not-allowed"
                            >
                                START SPRINT
                            </button>
                        </div>
                    </div>
                </div>
            );

            const renderChoicePage = () => (
                <div className="min-h-screen bg-black text-white flex flex-col justify-center items-center p-8">
                    <div className="max-w-4xl w-full text-center">
                        <h1 className="plaak text-6xl mb-8">CHOOSE YOUR PATH</h1>
                        <p className="text-2xl mb-16 text-gray-300">
                            Select whether you want to complete individual focus tools or facilitate a team session
                        </p>

                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <button
                                onClick={() => {
                                    setToolType('individual');
                                    setStep(1);
                                }}
                                className="p-12 border-4 border-white hover:bg-white hover:text-black transition-all group"
                            >
                                <div className="plaak text-4xl mb-4">INDIVIDUAL TOOL</div>
                                <p className="text-lg text-gray-300 group-hover:text-black">
                                    Complete 8 personal focus and productivity tools to optimize your performance
                                </p>
                            </button>

                            <button
                                onClick={() => {
                                    setToolType('team');
                                    setStep(1);
                                }}
                                className="p-12 border-4 border-white hover:bg-white hover:text-black transition-all group"
                            >
                                <div className="plaak text-4xl mb-4">TEAM TOOL</div>
                                <p className="text-lg text-gray-300 group-hover:text-black">
                                    Analyze team focus dynamics and complete WWW (What Worked, What Didn't, What Next)
                                </p>
                            </button>
                        </div>

                        <button
                            onClick={() => setStep(0)}
                            className="mt-12 px-8 py-4 border-2 border-white text-white hover:bg-white hover:text-black transition-all"
                        >
                            ← BACK
                        </button>
                    </div>
                </div>
            );

            // Individual Tool Steps
            const renderStep1_EmptyBrain = () => (
                <div className="min-h-screen bg-white pt-24 pb-16 px-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="numbered-section">[01] EMPTY BRAIN & IMPACT/EASY</div>

                        {/* Fast Track Insight */}
                        <FastTrackInsight>
                            [PLACEHOLDER] Fast Track Principle for Focus and Discipline: This foundational step drives 80% of results. Leaders who invest proper time here see the biggest transformation in their organization.
                        </FastTrackInsight>

                        {/* The Science */}
                        <ScienceBox collapsible={true}>
                            [PLACEHOLDER] Research from organizational psychology shows that structured focus and discipline frameworks improve decision quality by 25-40% compared to unstructured approaches (Harvard Business Review, 2023). Writing responses down activates deeper cognitive processing than thinking alone.
                        </ScienceBox>

                        {/* Common Mistake */}
                        <WarningBox>
                            [PLACEHOLDER] Common mistake in Focus and Discipline: Leaders often rush through this with surface-level answers. <strong>Bad:</strong> Generic responses completed in under 5 minutes. <strong>Good:</strong> Specific, honest answers that require real thought and sometimes discomfort.
                        </WarningBox>


                        <div className="mb-12">
                            <h2 className="text-3xl font-bold mb-4">Brain Dump Your Tasks</h2>
                            <p className="text-lg text-gray-700 mb-6">
                                List all tasks currently on your mind. Don't filter - just get everything out of your head.
                            </p>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                {data.emptyBrain.tasks.map((task, idx) => (
                                    <input
                                        key={idx}
                                        type="text"
                                        className="worksheet-input"
                                        value={task}
                                        onChange={(e) => updateArrayItem('emptyBrain.tasks', idx, e.target.value)}
                                        placeholder={`Task ${idx + 1}`}
                                    />
                                ))}
                            </div>
                        </div>

                        <div className="mb-12">
                            <h2 className="text-3xl font-bold mb-4">Impact/Easy Matrix</h2>
                            <p className="text-lg text-gray-700 mb-6">
                                Drag or categorize your tasks into the appropriate quadrant based on their impact and ease of execution.
                            </p>

                            <div className="impact-easy-grid">
                                <div className="quadrant high-impact-easy">
                                    <h3 className="font-bold mb-2 text-black">HIGH IMPACT / EASY</h3>
                                    <p className="text-sm text-black mb-3">Do these first - quick wins!</p>
                                    {data.emptyBrain.impactEasy.highImpactEasy.map((task, idx) => (
                                        <div key={idx} className="task-item">{task}</div>
                                    ))}
                                    <select
                                        className="worksheet-input mt-2"
                                        onChange={(e) => {
                                            if (e.target.value) {
                                                moveTaskToQuadrant(e.target.value, 'highImpactEasy');
                                                e.target.value = '';
                                            }
                                        }}
                                    >
                                        <option value="">+ Add task...</option>
                                        {data.emptyBrain.tasks.filter(t => t.trim()).map((task, idx) => (
                                            <option key={idx} value={task}>{task}</option>
                                        ))}
                                    </select>
                                </div>

                                <div className="quadrant high-impact-hard">
                                    <h3 className="font-bold mb-2 text-yellow-800">HIGH IMPACT / HARD</h3>
                                    <p className="text-sm text-yellow-700 mb-3">Schedule focused time for these</p>
                                    {data.emptyBrain.impactEasy.highImpactHard.map((task, idx) => (
                                        <div key={idx} className="task-item">{task}</div>
                                    ))}
                                    <select
                                        className="worksheet-input mt-2"
                                        onChange={(e) => {
                                            if (e.target.value) {
                                                moveTaskToQuadrant(e.target.value, 'highImpactHard');
                                                e.target.value = '';
                                            }
                                        }}
                                    >
                                        <option value="">+ Add task...</option>
                                        {data.emptyBrain.tasks.filter(t => t.trim()).map((task, idx) => (
                                            <option key={idx} value={task}>{task}</option>
                                        ))}
                                    </select>
                                </div>

                                <div className="quadrant low-impact-easy">
                                    <h3 className="font-bold mb-2 text-gray-800">LOW IMPACT / EASY</h3>
                                    <p className="text-sm text-gray-700 mb-3">Fill time gaps with these</p>
                                    {data.emptyBrain.impactEasy.lowImpactEasy.map((task, idx) => (
                                        <div key={idx} className="task-item">{task}</div>
                                    ))}
                                    <select
                                        className="worksheet-input mt-2"
                                        onChange={(e) => {
                                            if (e.target.value) {
                                                moveTaskToQuadrant(e.target.value, 'lowImpactEasy');
                                                e.target.value = '';
                                            }
                                        }}
                                    >
                                        <option value="">+ Add task...</option>
                                        {data.emptyBrain.tasks.filter(t => t.trim()).map((task, idx) => (
                                            <option key={idx} value={task}>{task}</option>
                                        ))}
                                    </select>
                                </div>

                                <div className="quadrant low-impact-hard">
                                    <h3 className="font-bold mb-2 text-red-800">LOW IMPACT / HARD</h3>
                                    <p className="text-sm text-red-700 mb-3">Avoid or delegate these</p>
                                    {data.emptyBrain.impactEasy.lowImpactHard.map((task, idx) => (
                                        <div key={idx} className="task-item">{task}</div>
                                    ))}
                                    <select
                                        className="worksheet-input mt-2"
                                        onChange={(e) => {
                                            if (e.target.value) {
                                                moveTaskToQuadrant(e.target.value, 'lowImpactHard');
                                                e.target.value = '';
                                            }
                                        }}
                                    >
                                        <option value="">+ Add task...</option>
                                        {data.emptyBrain.tasks.filter(t => t.trim()).map((task, idx) => (
                                            <option key={idx} value={task}>{task}</option>
                                        ))}
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div className="flex justify-between">
                            <button
                                onClick={() => setStep(0.5)}
                                className="px-6 py-3 border-2 border-black hover:bg-black hover:text-white transition-all font-bold"
                            >
                                ← BACK
                            </button>
                            <button
                                onClick={() => setStep(2)}
                                className="px-6 py-3 bg-black text-white hover:bg-gray-800 transition-all font-bold"
                            >
                                NEXT STEP →
                            </button>
                        </div>
                    </div>
                </div>
            );

            const renderStep2_DailyPlan = () => (
                <div className="min-h-screen bg-white pt-24 pb-16 px-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="numbered-section">[02] YOUR DAILY PLAN</div>

                        {/* Fast Track Insight */}
                        <FastTrackInsight>
                            [PLACEHOLDER] Fast Track Insight: The second phase of Focus and Discipline is where most leaders see breakthroughs. Be specific and brutally honest in your answers here.
                        </FastTrackInsight>

                        {/* The Science */}
                        <ScienceBox collapsible={true}>
                            [PLACEHOLDER] Behavioral science research indicates that teams using systematic focus and discipline processes make decisions 2.5x faster with 30% fewer errors (McKinsey, 2022). The structure reduces cognitive bias and forces comprehensive thinking.
                        </ScienceBox>


                        <div className="mb-8">
                            <h2 className="text-2xl font-bold mb-4">Top 3 Priorities for Tomorrow</h2>
                            <p className="text-gray-700 mb-4">What are the three most important tasks you must complete?</p>
                            {[0, 1, 2].map(idx => (
                                <div key={idx} className="mb-4">
                                    <label className="block text-sm font-bold mb-2">PRIORITY {idx + 1}</label>
                                    <ScienceBookmarkIcon>
                                        [PLACEHOLDER] Research backs this: Studies show that structured reflection on this aspect of focus and discipline leads to significantly better outcomes than intuitive approaches alone.
                                    </ScienceBookmarkIcon>
                                    <input
                                        type="text"
                                        className="worksheet-input"
                                        value={data.dailyPlan.topPriorities[idx]}
                                        onChange={(e) => updateArrayItem('dailyPlan.topPriorities', idx, e.target.value)}
                                        placeholder={`Priority ${idx + 1}`}
                                    />
                                </div>
                            ))}
                        </div>

                        <div className="mb-8">
                            <h2 className="text-2xl font-bold mb-4">Time Block Schedule</h2>
                            <p className="text-gray-700 mb-4">Plan your day in blocks aligned with your energy levels</p>

                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm font-bold mb-2">MORNING (6AM - 10AM)</label>
                                    <ScienceBookmarkIcon>
                                        [PLACEHOLDER] Research backs this: Studies show that structured reflection on this aspect of focus and discipline leads to significantly better outcomes than intuitive approaches alone.
                                    </ScienceBookmarkIcon>
                                    <textarea
                                        className="worksheet-textarea"
                                        value={data.dailyPlan.schedule.morning}
                                        onChange={(e) => updateData('dailyPlan.schedule.morning', e.target.value)}
                                        placeholder="What will you work on during your morning hours?"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-bold mb-2">MIDDAY (10AM - 2PM)</label>
                                    <ScienceBookmarkIcon>
                                        [PLACEHOLDER] Research backs this: Studies show that structured reflection on this aspect of focus and discipline leads to significantly better outcomes than intuitive approaches alone.
                                    </ScienceBookmarkIcon>
                                    <textarea
                                        className="worksheet-textarea"
                                        value={data.dailyPlan.schedule.midday}
                                        onChange={(e) => updateData('dailyPlan.schedule.midday', e.target.value)}
                                        placeholder="What will you focus on during midday?"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-bold mb-2">AFTERNOON (2PM - 6PM)</label>
                                    <textarea
                                        className="worksheet-textarea"
                                        value={data.dailyPlan.schedule.afternoon}
                                        onChange={(e) => updateData('dailyPlan.schedule.afternoon', e.target.value)}
                                        placeholder="What tasks are best suited for afternoon?"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-bold mb-2">EVENING (6PM - 10PM)</label>
                                    <textarea
                                        className="worksheet-textarea"
                                        value={data.dailyPlan.schedule.evening}
                                        onChange={(e) => updateData('dailyPlan.schedule.evening', e.target.value)}
                                        placeholder="How will you wind down and prepare for tomorrow?"
                                    />
                                </div>
                            </div>
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Energy Peak Analysis</label>
                            <p className="text-gray-700 mb-4">When are you most alert and focused? Schedule your hardest work then.</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.dailyPlan.energyPeaks}
                                onChange={(e) => updateData('dailyPlan.energyPeaks', e.target.value)}
                                placeholder="Describe your natural energy patterns throughout the day..."
                            />
                        </div>

                        <div className="flex justify-between">
                            <button
                                onClick={() => setStep(1)}
                                className="px-6 py-3 border-2 border-black hover:bg-black hover:text-white transition-all font-bold"
                            >
                                ← BACK
                            </button>
                            <button
                                onClick={() => setStep(3)}
                                className="px-6 py-3 bg-black text-white hover:bg-gray-800 transition-all font-bold"
                            >
                                NEXT STEP →
                            </button>
                        </div>
                    </div>
                </div>
            );

            const renderStep3_EliminatePart1 = () => (
                <div className="min-h-screen bg-white pt-24 pb-16 px-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="numbered-section">[03] ELIMINATE, LIMIT, DELEGATE (1/2)</div>

                        {/* Fast Track Insight */}
                        <FastTrackInsight>
                            [PLACEHOLDER] Fast Track Advanced: This Focus and Discipline step connects your work to the broader strategy. Look for patterns across your previous answers.
                        </FastTrackInsight>

                        {/* The Science */}
                        <ScienceBox collapsible={true}>
                            [PLACEHOLDER] Meta-analysis of 200+ organizations shows that completing structured exercises like this correlates with 35% higher strategic execution rates (Deloitte, 2023). Written commitments create psychological accountability.
                        </ScienceBox>


                        <p className="text-xl mb-8 text-gray-700">
                            Identify activities that drain your time and energy without providing proportional value
                        </p>

                        <div className="mb-8">
                            <h2 className="text-2xl font-bold mb-4">ELIMINATE</h2>
                            <p className="text-gray-700 mb-4">What activities should you stop doing entirely?</p>
                            {[0, 1, 2].map(idx => (
                                <input
                                    key={idx}
                                    type="text"
                                    className="worksheet-input mb-4"
                                    value={data.eliminate.part1.eliminate[idx]}
                                    onChange={(e) => updateArrayItem('eliminate.part1.eliminate', idx, e.target.value)}
                                    placeholder={`Activity to eliminate ${idx + 1}`}
                                />
                            ))}
                        </div>

                        <div className="mb-8">
                            <h2 className="text-2xl font-bold mb-4">LIMIT</h2>
                            <p className="text-gray-700 mb-4">What activities should you reduce or set boundaries around?</p>
                            {[0, 1, 2].map(idx => (
                                <input
                                    key={idx}
                                    type="text"
                                    className="worksheet-input mb-4"
                                    value={data.eliminate.part1.limit[idx]}
                                    onChange={(e) => updateArrayItem('eliminate.part1.limit', idx, e.target.value)}
                                    placeholder={`Activity to limit ${idx + 1}`}
                                />
                            ))}
                        </div>

                        <div className="mb-8">
                            <h2 className="text-2xl font-bold mb-4">DELEGATE</h2>
                            <p className="text-gray-700 mb-4">What tasks should others handle instead of you?</p>
                            {[0, 1, 2].map(idx => (
                                <input
                                    key={idx}
                                    type="text"
                                    className="worksheet-input mb-4"
                                    value={data.eliminate.part1.delegate[idx]}
                                    onChange={(e) => updateArrayItem('eliminate.part1.delegate', idx, e.target.value)}
                                    placeholder={`Activity to delegate ${idx + 1}`}
                                />
                            ))}
                        </div>

                        <div className="flex justify-between">
                            <button
                                onClick={() => setStep(2)}
                                className="px-6 py-3 border-2 border-black hover:bg-black hover:text-white transition-all font-bold"
                            >
                                ← BACK
                            </button>
                            <button
                                onClick={() => setStep(4)}
                                className="px-6 py-3 bg-black text-white hover:bg-gray-800 transition-all font-bold"
                            >
                                NEXT STEP →
                            </button>
                        </div>
                    </div>
                </div>
            );

            const renderStep4_EliminatePart2 = () => (
                <div className="min-h-screen bg-white pt-24 pb-16 px-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="numbered-section">[04] ELIMINATE, LIMIT, DELEGATE (2/2)</div>

                        {/* Fast Track Insight */}
                        <FastTrackInsight>
                            [PLACEHOLDER] Fast Track Integration: At this stage of Focus and Discipline, synthesis matters most. Your outputs should connect to at least 2 other Fast Track tools.
                        </FastTrackInsight>

                        {/* The Science */}
                        <ScienceBox collapsible={true}>
                            [PLACEHOLDER] Longitudinal studies demonstrate that organizations revisiting their focus and discipline outputs quarterly maintain 60% higher alignment scores (BCG, 2023). Regular review prevents strategic drift.
                        </ScienceBox>


                        <p className="text-xl mb-8 text-gray-700">
                            Create specific action plans for each category
                        </p>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">How will you ELIMINATE these activities?</label>
                            <p className="text-gray-700 mb-4">Be specific about the steps you'll take</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.eliminate.part2.eliminateActions}
                                onChange={(e) => updateData('eliminate.part2.eliminateActions', e.target.value)}
                                placeholder="Example: I will unsubscribe from non-essential newsletters and turn off social media notifications during work hours..."
                            />
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">How will you LIMIT these activities?</label>
                            <p className="text-gray-700 mb-4">Set clear boundaries and time limits</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.eliminate.part2.limitActions}
                                onChange={(e) => updateData('eliminate.part2.limitActions', e.target.value)}
                                placeholder="Example: I will check emails only twice daily at 10am and 3pm for 30 minutes each..."
                            />
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">How will you DELEGATE these activities?</label>
                            <p className="text-gray-700 mb-4">Identify who will handle each task and when</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.eliminate.part2.delegateActions}
                                onChange={(e) => updateData('eliminate.part2.delegateActions', e.target.value)}
                                placeholder="Example: I will delegate report formatting to my assistant and set up a weekly review meeting..."
                            />
                        </div>

                        <div className="flex justify-between">
                            <button
                                onClick={() => setStep(3)}
                                className="px-6 py-3 border-2 border-black hover:bg-black hover:text-white transition-all font-bold"
                            >
                                ← BACK
                            </button>
                            <button
                                onClick={() => setStep(5)}
                                className="px-6 py-3 bg-black text-white hover:bg-gray-800 transition-all font-bold"
                            >
                                NEXT STEP →
                            </button>
                        </div>
                    </div>
                </div>
            );

            const renderStep5_Distractions = () => (
                <div className="min-h-screen bg-white pt-24 pb-16 px-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="numbered-section">[05] REDUCE DISTRACTIONS</div>

                        {/* Fast Track Insight */}
                        <FastTrackInsight>
                            [PLACEHOLDER] Fast Track Completion: The final step ties everything together. Review your Focus and Discipline work holistically before moving on.
                        </FastTrackInsight>

                        {/* The Science */}
                        <ScienceBox collapsible={true}>
                            [PLACEHOLDER] Cross-industry research confirms that structured frameworks reduce implementation time by 40% while improving quality of outcomes across all organizational levels (Bain, 2023).
                        </ScienceBox>


                        <div className="mb-8">
                            <h2 className="text-2xl font-bold mb-4">Digital Distractions</h2>
                            <p className="text-gray-700 mb-4">What digital interruptions break your focus?</p>
                            {[0, 1, 2].map(idx => (
                                <input
                                    key={idx}
                                    type="text"
                                    className="worksheet-input mb-4"
                                    value={data.distractions.digital[idx]}
                                    onChange={(e) => updateArrayItem('distractions.digital', idx, e.target.value)}
                                    placeholder="Example: Email notifications, Slack messages, social media..."
                                />
                            ))}
                        </div>

                        <div className="mb-8">
                            <h2 className="text-2xl font-bold mb-4">Physical Distractions</h2>
                            <p className="text-gray-700 mb-4">What in your environment disrupts your concentration?</p>
                            {[0, 1, 2].map(idx => (
                                <input
                                    key={idx}
                                    type="text"
                                    className="worksheet-input mb-4"
                                    value={data.distractions.physical[idx]}
                                    onChange={(e) => updateArrayItem('distractions.physical', idx, e.target.value)}
                                    placeholder="Example: Open office noise, drop-in meetings, cluttered desk..."
                                />
                            ))}
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Action Plan to Minimize Distractions</label>
                            <p className="text-gray-700 mb-4">
                                What specific steps will you take to create a distraction-free environment?
                            </p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.distractions.actions}
                                onChange={(e) => updateData('distractions.actions', e.target.value)}
                                placeholder="Example: Use website blockers during focus blocks, wear noise-canceling headphones, set 'Do Not Disturb' hours..."
                            />
                        </div>

                        <div className="flex justify-between">
                            <button
                                onClick={() => setStep(4)}
                                className="px-6 py-3 border-2 border-black hover:bg-black hover:text-white transition-all font-bold"
                            >
                                ← BACK
                            </button>
                            <button
                                onClick={() => setStep(6)}
                                className="px-6 py-3 bg-black text-white hover:bg-gray-800 transition-all font-bold"
                            >
                                NEXT STEP →
                            </button>
                        </div>
                    </div>
                </div>
            );

            const renderStep6_KeyRoutines = () => (
                <div className="min-h-screen bg-white pt-24 pb-16 px-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="numbered-section">[06] MY KEY DAILY ROUTINES</div>

                        <p className="text-xl mb-8 text-gray-700">
                            Design routines that support sustained focus and productivity
                        </p>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Morning Routine</label>
                            <p className="text-gray-700 mb-4">How do you prepare yourself for a focused day?</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.routines.morning}
                                onChange={(e) => updateData('routines.morning', e.target.value)}
                                placeholder="Example: Wake at 6am, 10min meditation, 20min exercise, healthy breakfast, review top 3 priorities..."
                            />
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Work Start Routine</label>
                            <p className="text-gray-700 mb-4">How do you transition into deep work mode?</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.routines.workStart}
                                onChange={(e) => updateData('routines.workStart', e.target.value)}
                                placeholder="Example: Arrive 15min early, organize desk, 2min visual focus exercise, start with most important task..."
                            />
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Break Routine</label>
                            <p className="text-gray-700 mb-4">How do you recharge between focus blocks?</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.routines.breaks}
                                onChange={(e) => updateData('routines.breaks', e.target.value)}
                                placeholder="Example: Every 90min, take 10min break - walk outside, stretch, no phone, hydrate..."
                            />
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">End-of-Day Routine</label>
                            <p className="text-gray-700 mb-4">How do you close out your work and prepare for tomorrow?</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.routines.endOfDay}
                                onChange={(e) => updateData('routines.endOfDay', e.target.value)}
                                placeholder="Example: Review completed tasks, plan tomorrow's top 3, clear desk, close all apps, 5min reflection..."
                            />
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Key Routine Insights</label>
                            <p className="text-gray-700 mb-4">What patterns make your routines effective?</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.routines.keyRoutines}
                                onChange={(e) => updateData('routines.keyRoutines', e.target.value)}
                                placeholder="Reflect on what makes these routines work for you..."
                            />
                        </div>

                        <div className="flex justify-between">
                            <button
                                onClick={() => setStep(5)}
                                className="px-6 py-3 border-2 border-black hover:bg-black hover:text-white transition-all font-bold"
                            >
                                ← BACK
                            </button>
                            <button
                                onClick={() => setStep(7)}
                                className="px-6 py-3 bg-black text-white hover:bg-gray-800 transition-all font-bold"
                            >
                                NEXT STEP →
                            </button>
                        </div>
                    </div>
                </div>
            );

            const renderStep7_ThreeRoutines = () => (
                <div className="min-h-screen bg-white pt-24 pb-16 px-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="numbered-section">[07] MY 3 DAILY ROUTINES BUILDER</div>

                        <p className="text-xl mb-8 text-gray-700">
                            Design three specific habit loops using: Trigger → Action → Reward
                        </p>

                        {['routine1', 'routine2', 'routine3'].map((routine, idx) => (
                            <div key={routine} className="mb-12 p-6 border-2 border-gray-200 rounded">
                                <h2 className="text-2xl font-bold mb-6">ROUTINE {idx + 1}</h2>

                                <div className="mb-4">
                                    <label className="block text-sm font-bold mb-2">ROUTINE NAME</label>
                                    <input
                                        type="text"
                                        className="worksheet-input"
                                        value={data.threeRoutines[routine].name}
                                        onChange={(e) => updateData(`threeRoutines.${routine}.name`, e.target.value)}
                                        placeholder="Give this routine a memorable name"
                                    />
                                </div>

                                <div className="mb-4">
                                    <label className="block text-sm font-bold mb-2">TRIGGER (When/Where)</label>
                                    <input
                                        type="text"
                                        className="worksheet-input"
                                        value={data.threeRoutines[routine].trigger}
                                        onChange={(e) => updateData(`threeRoutines.${routine}.trigger`, e.target.value)}
                                        placeholder="What cue starts this routine? (time, location, event)"
                                    />
                                </div>

                                <div className="mb-4">
                                    <label className="block text-sm font-bold mb-2">ACTION (What)</label>
                                    <textarea
                                        className="worksheet-textarea"
                                        value={data.threeRoutines[routine].action}
                                        onChange={(e) => updateData(`threeRoutines.${routine}.action`, e.target.value)}
                                        placeholder="Describe the specific actions in this routine"
                                    />
                                </div>

                                <div className="mb-4">
                                    <label className="block text-sm font-bold mb-2">REWARD (Why)</label>
                                    <input
                                        type="text"
                                        className="worksheet-input"
                                        value={data.threeRoutines[routine].reward}
                                        onChange={(e) => updateData(`threeRoutines.${routine}.reward`, e.target.value)}
                                        placeholder="What positive feeling or benefit reinforces this habit?"
                                    />
                                </div>
                            </div>
                        ))}

                        <div className="flex justify-between">
                            <button
                                onClick={() => setStep(6)}
                                className="px-6 py-3 border-2 border-black hover:bg-black hover:text-white transition-all font-bold"
                            >
                                ← BACK
                            </button>
                            <button
                                onClick={() => setStep(8)}
                                className="px-6 py-3 bg-black text-white hover:bg-gray-800 transition-all font-bold"
                            >
                                NEXT STEP →
                            </button>
                        </div>
                    </div>
                </div>
            );

            const renderStep8_FlowState = () => (
                <div className="min-h-screen bg-white pt-24 pb-16 px-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="numbered-section">[08] FLOW STATE PRIMING TOOL</div>

                        <p className="text-xl mb-8 text-gray-700">
                            Prepare yourself to enter and maintain flow - the optimal state of performance
                        </p>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Clear Goals</label>
                            <p className="text-gray-700 mb-4">What exactly do you want to achieve in your next focus session?</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.flowState.clearGoals}
                                onChange={(e) => updateData('flowState.clearGoals', e.target.value)}
                                placeholder="Be specific and measurable..."
                            />
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Challenge-Skill Balance</label>
                            <p className="text-gray-700 mb-4">
                                How will you ensure the task is neither too easy (boring) nor too hard (anxiety-inducing)?
                            </p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.flowState.challengeSkill}
                                onChange={(e) => updateData('flowState.challengeSkill', e.target.value)}
                                placeholder="Describe how the task stretches you while remaining achievable..."
                            />
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Environment Optimization</label>
                            <p className="text-gray-700 mb-4">What environmental conditions support your flow state?</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.flowState.environment}
                                onChange={(e) => updateData('flowState.environment', e.target.value)}
                                placeholder="Example: Quiet room, instrumental music, good lighting, no phone, water nearby..."
                            />
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Pre-Flow Ritual</label>
                            <p className="text-gray-700 mb-4">What 2-5 minute routine will you use to transition into flow?</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.flowState.preFlowRitual}
                                onChange={(e) => updateData('flowState.preFlowRitual', e.target.value)}
                                placeholder="Example: 120-second visual focus, WOOP technique, deep breathing, review goals..."
                            />
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Immediate Feedback Mechanisms</label>
                            <p className="text-gray-700 mb-4">How will you know if you're making progress?</p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.flowState.feedback}
                                onChange={(e) => updateData('flowState.feedback', e.target.value)}
                                placeholder="What metrics or checkpoints will confirm you're on track?"
                            />
                        </div>

                        <div className="flex justify-between">
                            <button
                                onClick={() => setStep(7)}
                                className="px-6 py-3 border-2 border-black hover:bg-black hover:text-white transition-all font-bold"
                            >
                                ← BACK
                            </button>
                            <button
                                onClick={() => setStep(999)}
                                className="px-6 py-3 bg-black text-white hover:bg-gray-800 transition-all font-bold"
                            >
                                VIEW CANVAS →
                            </button>
                        </div>
                    </div>
                </div>
            );

            // Team Tool Step
            const renderTeamStep = () => (
                <div className="min-h-screen bg-white pt-24 pb-16 px-8">
                    <div className="max-w-4xl mx-auto">
                        <div className="numbered-section">[01] TEAM FOCUS & PRODUCTIVITY DYNAMICS</div>

                        <p className="text-xl mb-8 text-gray-700">
                            Analyze your team's collective focus patterns and productivity challenges
                        </p>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Team Focus Patterns</label>
                            <p className="text-gray-700 mb-4">
                                What patterns do you observe in how your team maintains focus and enters flow?
                            </p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.teamDynamics.focusPatterns}
                                onChange={(e) => updateData('teamDynamics.focusPatterns', e.target.value)}
                                placeholder="Describe common behaviors, strengths, and weaknesses..."
                            />
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Productivity Challenges</label>
                            <p className="text-gray-700 mb-4">
                                What are the biggest obstacles preventing your team from achieving optimal productivity?
                            </p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.teamDynamics.productivityChallenges}
                                onChange={(e) => updateData('teamDynamics.productivityChallenges', e.target.value)}
                                placeholder="Identify systemic issues, cultural factors, or structural problems..."
                            />
                        </div>

                        <div className="mb-8">
                            <label className="block text-lg font-bold mb-2">Collective Habits to Build</label>
                            <p className="text-gray-700 mb-4">
                                What team-wide habits would have the greatest impact on collective productivity?
                            </p>
                            <textarea
                                className="worksheet-textarea"
                                value={data.teamDynamics.collectiveHabits}
                                onChange={(e) => updateData('teamDynamics.collectiveHabits', e.target.value)}
                                placeholder="Example: Daily stand-ups, focus blocks, meeting-free mornings..."
                            />
                        </div>

                        <div className="mb-12">
                            <h2 className="text-3xl font-bold mb-6">WWW Analysis</h2>

                            <div className="mb-8">
                                <label className="block text-lg font-bold mb-2 text-black">
                                    WHAT WORKED
                                </label>
                                <p className="text-gray-700 mb-4">
                                    What focus and productivity practices have been successful?
                                </p>
                                <textarea
                                    className="worksheet-textarea"
                                    value={data.teamDynamics.whatWorked}
                                    onChange={(e) => updateData('teamDynamics.whatWorked', e.target.value)}
                                    placeholder="Celebrate successes and identify patterns to reinforce..."
                                />
                            </div>

                            <div className="mb-8">
                                <label className="block text-lg font-bold mb-2 text-red-700">
                                    WHAT DIDN'T WORK
                                </label>
                                <p className="text-gray-700 mb-4">
                                    What approaches or habits failed to improve focus and productivity?
                                </p>
                                <textarea
                                    className="worksheet-textarea"
                                    value={data.teamDynamics.whatDidntWork}
                                    onChange={(e) => updateData('teamDynamics.whatDidntWork', e.target.value)}
                                    placeholder="Be honest about failures and learn from them..."
                                />
                            </div>

                            <div className="mb-8">
                                <label className="block text-lg font-bold mb-2 text-gray-700">
                                    WHAT NEXT
                                </label>
                                <p className="text-gray-700 mb-4">
                                    What specific actions will you take to improve team focus and productivity?
                                </p>
                                <textarea
                                    className="worksheet-textarea"
                                    value={data.teamDynamics.whatNext}
                                    onChange={(e) => updateData('teamDynamics.whatNext', e.target.value)}
                                    placeholder="Define concrete next steps with owners and timelines..."
                                />
                            </div>
                        </div>

                        <div className="flex justify-between">
                            <button
                                onClick={() => setStep(0.5)}
                                className="px-6 py-3 border-2 border-black hover:bg-black hover:text-white transition-all font-bold"
                            >
                                ← BACK
                            </button>
                            <button
                                onClick={() => setStep(999)}
                                className="px-6 py-3 bg-black text-white hover:bg-gray-800 transition-all font-bold"
                            >
                                VIEW CANVAS →
                            </button>
                        </div>
                    </div>
                </div>
            );

            const renderCanvas = () => {
                const canvasData = toolType === 'individual' ? {
                    sections: [
                        { title: 'Empty Brain & Impact/Easy', content: `High Impact/Easy: ${data.emptyBrain.impactEasy.highImpactEasy.join(', ')}` },
                        { title: 'Top 3 Priorities', content: data.dailyPlan.topPriorities.filter(p => p).join(', ') },
                        { title: 'Eliminate/Limit/Delegate', content: data.eliminate.part1.eliminate.filter(e => e).join(', ') },
                        { title: 'Key Routines', content: data.routines.morning ? 'Morning routine defined' : 'No routines set' },
                        { title: 'Flow State Goals', content: data.flowState.clearGoals }
                    ]
                } : {
                    sections: [
                        { title: 'Team Focus Patterns', content: data.teamDynamics.focusPatterns },
                        { title: 'What Worked', content: data.teamDynamics.whatWorked },
                        { title: 'What Didn\'t Work', content: data.teamDynamics.whatDidntWork },
                        { title: 'What Next', content: data.teamDynamics.whatNext }
                    ]
                };

                return (
                    <div className="min-h-screen bg-white pt-24 pb-16 px-8">
                        <div className="max-w-6xl mx-auto">
                            <div className="numbered-section mb-8">CANVAS: FOCUS, DISCIPLINE & PRODUCTIVITY</div>

                            <div className="bg-gray-50 p-8 rounded-lg mb-8">
                                <div className="grid grid-cols-2 gap-4 text-sm mb-6">
                                    <div><strong>Company:</strong> {data.companyId}</div>
                                    <div><strong>User:</strong> {data.userId}</div>
                                    <div><strong>Type:</strong> {toolType === 'individual' ? 'Individual' : 'Team'}</div>
                                    <div><strong>Date:</strong> {new Date().toLocaleDateString()}</div>
                                </div>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    {canvasData.sections.map((section, idx) => (
                                        <div key={idx} className="bg-white p-6 rounded border-2 border-gray-200">
                                            <h3 className="font-bold text-lg mb-3">{section.title}</h3>
                                            <p className="text-gray-700 text-sm">
                                                {section.content || 'Not completed'}
                                            </p>
                                        </div>
                                    ))}
                                </div>
                            </div>

                            <div className="flex justify-between">
                                <button
                                    onClick={() => setStep(toolType === 'individual' ? 8 : 1)}
                                    className="px-6 py-3 border-2 border-black hover:bg-black hover:text-white transition-all font-bold"
                                >
                                    ← BACK TO TOOL
                                </button>
                                <button
                                    onClick={exportPDF}
                                    className="px-6 py-3 bg-black text-white hover:bg-gray-800 transition-all font-bold"
                                >
                                    📥 EXPORT PDF
                                </button>
                            </div>

                            {/* Case Study */}
                            <CaseStudy
                                before={"[PLACEHOLDER] CEO responded to every email within 5 minutes."}
                                after={"[PLACEHOLDER] Daily plan with 3 priorities. Strategic thinking time doubled."}
                                quote={"[PLACEHOLDER] The Empty Brain exercise freed up mental bandwidth."}
                            />
                        </div>
                    </div>
                );
            };

            const renderHelpModal = () => {
                if (!showHelp) return null;

                return (
                    <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                        <div className="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                            <div className="p-8 border-8 border-black">
                                <h2 className="plaak text-4xl mb-6">HELP & GUIDANCE</h2>

                                <div className="space-y-6">
                                    <section>
                                        <h3 className="font-bold text-xl mb-2">About This Sprint</h3>
                                        <p className="text-gray-700">
                                            Sprint 09 helps you master focus, discipline, and productivity through
                                            practical tools and frameworks. Complete individual assessments or
                                            facilitate team discussions.
                                        </p>
                                    </section>

                                    <section>
                                        <h3 className="font-bold text-xl mb-2">Key Concepts</h3>
                                        <ul className="list-disc list-inside text-gray-700 space-y-1">
                                            <li><strong>Focus:</strong> Ability to anchor attention in the present</li>
                                            <li><strong>Flow:</strong> Optimal state of immersed performance</li>
                                            <li><strong>Discipline:</strong> Commitment to following through</li>
                                            <li><strong>Habits:</strong> Automatic behaviors that ensure consistency</li>
                                        </ul>
                                    </section>

                                    <section>
                                        <h3 className="font-bold text-xl mb-2">Individual Tools</h3>
                                        <ol className="list-decimal list-inside text-gray-700 space-y-1">
                                            <li>Empty Brain & Impact/Easy Matrix</li>
                                            <li>Daily Plan with Time Blocking</li>
                                            <li>Eliminate, Limit, Delegate (Part 1 & 2)</li>
                                            <li>Reduce Distractions</li>
                                            <li>Key Daily Routines</li>
                                            <li>3 Daily Routines Builder</li>
                                            <li>Flow State Priming Tool</li>
                                        </ol>
                                    </section>

                                    <section>
                                        <h3 className="font-bold text-xl mb-2">Tips</h3>
                                        <ul className="list-disc list-inside text-gray-700 space-y-1">
                                            <li>Your data auto-saves every 2 seconds</li>
                                            <li>Be brutally honest in your assessments</li>
                                            <li>Focus on high-impact, easy wins first</li>
                                            <li>Protect your focus blocks fiercely</li>
                                            <li>Build habits through consistent triggers</li>
                                        </ul>
                                    </section>
                                </div>

                                <button
                                    onClick={() => setShowHelp(false)}
                                    className="mt-8 w-full px-6 py-3 bg-black text-white hover:bg-gray-800 transition-all font-bold"
                                >
                                    CLOSE
                                </button>
                            </div>
                        </div>
                    </div>
                );
            };

            return (
                <div className="min-h-screen bg-white">
                    {renderProgressIndicator()}

                    {step === 0 && renderIntroPage()}
                    {step === 0.5 && renderChoicePage()}

                    {/* Individual Tool Steps */}
                    {toolType === 'individual' && step === 1 && renderStep1_EmptyBrain()}
                    {toolType === 'individual' && step === 2 && renderStep2_DailyPlan()}
                    {toolType === 'individual' && step === 3 && renderStep3_EliminatePart1()}
                    {toolType === 'individual' && step === 4 && renderStep4_EliminatePart2()}
                    {toolType === 'individual' && step === 5 && renderStep5_Distractions()}
                    {toolType === 'individual' && step === 6 && renderStep6_KeyRoutines()}
                    {toolType === 'individual' && step === 7 && renderStep7_ThreeRoutines()}
                    {toolType === 'individual' && step === 8 && renderStep8_FlowState()}

                    {/* Team Tool Step */}
                    {toolType === 'team' && step === 1 && renderTeamStep()}

                    {/* Canvas */}
                    {step === 999 && renderCanvas()}

                    {renderHelpModal()}
                </div>
            );
        }
        ReactDOM.render(<FocusApp />, document.getElementById('root'));
    </script>
</body>
</html>
