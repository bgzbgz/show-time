<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meeting Rhythm Master | Fast Track Program</title>

  <!-- React & ReactDOM from CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel Standalone for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Supabase JS Client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../../shared/js/dependency-injection.js"></script>

  <!-- jsPDF + html2canvas for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <style>
    /* Font Face Declarations */
    @font-face {
      font-family: 'Plaak';
      src: url('Plaak3Trial-43-Bold.woff2') format('woff2');
      font-weight: bold;
      font-style: normal;
    }

    @font-face {
      font-family: 'Riforma';
      src: url('RiformaLL-Regular.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
    }

    @font-face {
      font-family: 'Monument';
      src: url('MonumentGrotesk-Mono.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
    }

    /* Global Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Riforma', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .plaak {
      font-family: 'Plaak', sans-serif;
      text-transform: uppercase;
      font-weight: bold;
      letter-spacing: -0.02em;
    }

    .riforma-bold {
      font-family: 'Riforma', sans-serif;
      font-weight: bold;
    }

    .monument {
      font-family: 'Monument', monospace;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* Animations */
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-in {
      animation: slideIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .fade-in {
      animation: fadeIn 0.4s ease-out;
    }

    .transition-animate-in {
      animation: slideIn 0.6s ease-out;
    }

    /* Button Styles */
    .btn-primary {
      background: #000000;
      color: #FFFFFF;
      padding: 16px 32px;
      border: 2px solid #000000;
      font-size: 18px;
      font-family: 'Riforma', sans-serif;
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: normal;
    }

    .btn-primary:hover:not(:disabled) {
      transform: scale(1.02);
    }

    .btn-primary:disabled {
      background: #E0E0E0;
      border-color: #E0E0E0;
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: #FFFFFF;
      color: #000000;
      padding: 12px 24px;
      border: 2px solid #000000;
      font-size: 16px;
      font-family: 'Riforma', sans-serif;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-secondary:hover {
      background: #F8F8F8;
    }

    /* Form Styles */
    input[type="text"],
    input[type="number"],
    input[type="email"],
    textarea,
    select {
      border: 1px solid #E0E0E0;
      padding: 12px 16px;
      font-size: 18px;
      font-family: 'Riforma', sans-serif;
      width: 100%;
      transition: border-color 0.2s ease;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: #000000;
    }

    textarea {
      min-height: 120px;
      resize: vertical;
    }

    textarea::placeholder {
      white-space: pre-line;
    }

    /* Numbered Section Badge */
    .numbered-section {
      background: #000000;
      color: #FFFFFF;
      padding: 10px 16px;
      font-family: 'Plaak', sans-serif;
      font-size: 26px;
      display: inline-block;
      text-transform: uppercase;
      letter-spacing: -0.02em;
    }

    /* Help Button */
    .help-button {
      position: fixed;
      top: 24px;
      right: 24px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: #000000;
      color: #FFFFFF;
      font-size: 28px;
      border: none;
      cursor: pointer;
      z-index: 40;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Riforma', sans-serif;
    }

    .help-button:hover {
      background: #FFF469;
      color: #000000;
      transform: scale(1.1);
    }

    /* Progress Indicator */
    .progress-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #E0E0E0;
      transition: all 0.3s ease;
    }

    .progress-dot.active {
      background: #000000;
      transform: scale(1.3);
    }

    .progress-dot.completed {
      background: #000000;
    }

    .progress-line {
      height: 2px;
      background: #E0E0E0;
      flex: 1;
    }

    /* Print Styles */
    @media print {
      .no-print {
        display: none !important;
      }
    }

    /* Character Counter */
    .char-counter {
      font-size: 14px;
      color: #666;
      margin-top: 4px;
    }

    .char-counter.invalid {
      color: #EF4444;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const CONFIG = {
      SUPABASE_URL: 'https://vpfayzzjnegdefjrnyoc.supabase.co',
      SUPABASE_ANON_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZwZmF5enpqbmVnZGVmanJueW9jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxMzAwODUsImV4cCI6MjA4NTcwNjA4NX0.7qwzd9kwyRG0Wx9DDSc8F9a1SRD0CoC6CGS-9M1sxIs',
      TOOL_SLUG: 'meeting-rhythm',
      SPRINT_NUMBER: 11,
      SCHEMA_NAME: 'sprint_11_meeting_rhythm',
      AUTOSAVE_DELAY: 2000
    };

    // Initialize Supabase client
    const { createClient } = supabase;
    const supabaseClient = createClient(CONFIG.SUPABASE_URL, CONFIG.SUPABASE_ANON_KEY);

    // Make Supabase client globally available for dependency injection
    window.supabaseClient = supabaseClient;

    // Initialize dependency injection to load data from previous tools
    DependencyInjection.init(CONFIG.TOOL_SLUG, CONFIG.SCHEMA_NAME);

    // Main App Component
    function MeetingRhythmApp() {
      const [step, setStep] = useState(0); // 0=cover, 0.5=intro, 1-4=steps, 5=canvas
      const [showHelp, setShowHelp] = useState(false);
      const [showTransition, setShowTransition] = useState(false);
      const [transitionMessage, setTransitionMessage] = useState('');
      const [transitionProgress, setTransitionProgress] = useState(0);

      const [data, setData] = useState({
        // User details
        name: '',
        email: '',
        company: '',
        role: '',

        // Step 1: Individual Priorities Breakdown
        quarterlyPriorities: [
          { priority: '', totalHours: '', tasks: [{ task: '', hours: '', weeks: '' }] }
        ],

        // Step 2: Meeting Readiness
        meetingPurpose: '',
        meetingParticipants: '',
        agendaItems: [{ topic: '', owner: '', duration: '' }],
        preMaterials: '',
        roles: { facilitator: '', scribe: '', timekeeper: '' },

        // Step 3: Meeting Evaluation
        meetingDate: '',
        meetingType: '',
        effectiveness: '',
        whatWorked: '',
        whatDidntWork: '',
        improvements: '',

        // Step 4: Big Rock Discussion
        bigRockIssue: '',
        problemStatement: '',
        rootCause: '',
        proposedSolutions: '',
        wwwOwner: '',
        wwwWhat: '',
        wwwWhen: ''
      });

      // Auto-save to localStorage
      useEffect(() => {
        const interval = setInterval(() => {
          localStorage.setItem('meetingRhythmData', JSON.stringify({
            data,
            timestamp: new Date().toISOString()
          }));
        }, 2000);

        return () => clearInterval(interval);
      }, [data]);

      // Load saved data on mount
      useEffect(() => {
        const saved = localStorage.getItem('meetingRhythmData');
        if (saved) {
          try {
            const parsed = JSON.parse(saved);
            if (parsed.data) {
              setData(parsed.data);
            }
          } catch (e) {
            console.error('Failed to parse saved data');
          }
        }
      }, []);

      const updateData = (field, value) => {
        setData(prev => ({ ...prev, [field]: value }));
      };

      const addPriority = () => {
        setData(prev => ({
          ...prev,
          quarterlyPriorities: [...prev.quarterlyPriorities, { priority: '', totalHours: '', tasks: [{ task: '', hours: '', weeks: '' }] }]
        }));
      };

      const removePriority = (index) => {
        if (data.quarterlyPriorities.length > 1) {
          setData(prev => ({
            ...prev,
            quarterlyPriorities: prev.quarterlyPriorities.filter((_, i) => i !== index)
          }));
        }
      };

      const updatePriority = (index, field, value) => {
        setData(prev => ({
          ...prev,
          quarterlyPriorities: prev.quarterlyPriorities.map((p, i) =>
            i === index ? { ...p, [field]: value } : p
          )
        }));
      };

      const addTask = (priorityIndex) => {
        setData(prev => ({
          ...prev,
          quarterlyPriorities: prev.quarterlyPriorities.map((p, i) =>
            i === priorityIndex ? { ...p, tasks: [...p.tasks, { task: '', hours: '', weeks: '' }] } : p
          )
        }));
      };

      const removeTask = (priorityIndex, taskIndex) => {
        setData(prev => ({
          ...prev,
          quarterlyPriorities: prev.quarterlyPriorities.map((p, i) =>
            i === priorityIndex ? { ...p, tasks: p.tasks.filter((_, ti) => ti !== taskIndex) } : p
          )
        }));
      };

      const updateTask = (priorityIndex, taskIndex, field, value) => {
        setData(prev => ({
          ...prev,
          quarterlyPriorities: prev.quarterlyPriorities.map((p, i) =>
            i === priorityIndex ? {
              ...p,
              tasks: p.tasks.map((t, ti) => ti === taskIndex ? { ...t, [field]: value } : t)
            } : p
          )
        }));
      };

      const addAgendaItem = () => {
        setData(prev => ({
          ...prev,
          agendaItems: [...prev.agendaItems, { topic: '', owner: '', duration: '' }]
        }));
      };

      const removeAgendaItem = (index) => {
        if (data.agendaItems.length > 1) {
          setData(prev => ({
            ...prev,
            agendaItems: prev.agendaItems.filter((_, i) => i !== index)
          }));
        }
      };

      const updateAgendaItem = (index, field, value) => {
        setData(prev => ({
          ...prev,
          agendaItems: prev.agendaItems.map((item, i) =>
            i === index ? { ...item, [field]: value } : item
          )
        }));
      };

      const goNext = () => {
        if (step === 0.5) {
          setStep(1);
        } else if (step >= 1 && step < 4) {
          // Show transition
          const messages = [
            '25% COMPLETE',
            '50% COMPLETE',
            '75% COMPLETE',
            '100% COMPLETE'
          ];
          const progressValues = [25, 50, 75, 100];

          setTransitionMessage(messages[step - 1]);
          setTransitionProgress(progressValues[step - 1]);
          setShowTransition(true);

          setTimeout(() => {
            setShowTransition(false);
            setStep(step + 1);
          }, 2000);
        } else if (step === 4) {
          setTransitionMessage('100% COMPLETE');
          setTransitionProgress(100);
          setShowTransition(true);

          setTimeout(() => {
            setShowTransition(false);
            setStep(5);
          }, 2000);
        } else if (step === 0) {
          setStep(0.5);
        }
      };

      const goBack = () => {
        if (step === 5) {
          setStep(4);
        } else if (step > 1) {
          setStep(step - 1);
        } else if (step === 1) {
          setStep(0.5);
        }
      };

      // Validation functions
      const canProceedFromIntro = () => {
        return data.name.length > 0 && data.email.length > 0 && data.company.length > 0;
      };

      const canProceedFromStep1 = () => {
        return data.quarterlyPriorities.every(p =>
          p.priority.length >= 20 && p.tasks.every(t => t.task.length >= 10)
        );
      };

      const canProceedFromStep2 = () => {
        return data.meetingPurpose.length >= 30 &&
               data.meetingParticipants.length >= 10 &&
               data.agendaItems.every(item => item.topic.length >= 10);
      };

      const canProceedFromStep3 = () => {
        return data.meetingDate.length > 0 &&
               data.whatWorked.length >= 30 &&
               data.whatDidntWork.length >= 30 &&
               data.improvements.length >= 30;
      };

      const canProceedFromStep4 = () => {
        return data.bigRockIssue.length >= 30 &&
               data.problemStatement.length >= 50 &&
               data.rootCause.length >= 50 &&
               data.proposedSolutions.length >= 50;
      };

      const exportPDF = async () => {
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF('p', 'mm', 'a4');

        const canvas = document.getElementById('canvas-content');
        if (canvas) {
          const canvasImage = await html2canvas(canvas, {
            scale: 2,
            useCORS: true,
            logging: false
          });

          const imgData = canvasImage.toDataURL('image/png');
          const imgWidth = 190;
          const imgHeight = (canvasImage.height * imgWidth) / canvasImage.width;

          pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);

          const filename = `Meeting-Rhythm-Canvas-${new Date().toISOString().split('T')[0]}.pdf`;
          pdf.save(filename);

          // Save to Supabase
          try {
            const userId = localStorage.getItem('ft_user_id');
            if (userId) {
              const submissionData = {
                name: data.name,
                email: data.email,
                company: data.company,
                role: data.role,
                data: data
              };

              // Submit using RPC function (handles schema-specific tables)
              const { data: result, error: submitError } = await supabaseClient
                .rpc('submit_tool_data', {
                  p_schema_name: CONFIG.SCHEMA_NAME,
                  p_user_id: userId,
                  p_data: submissionData,
                  p_tool_slug: CONFIG.TOOL_SLUG
                });

              if (submitError) throw submitError;

              if (!result || !result.success) {
                throw new Error(result?.message || 'Submission failed');
              }

              localStorage.setItem('lastSubmissionId', result.submission_id);
              console.log('Saved to Supabase successfully. Submission ID:', result.submission_id);
            }
          } catch (error) {
            console.error('Supabase submission error:', error);
            // Don't alert - PDF still downloads successfully
          }
        }
      };

      const handleSubmit = async () => {
        try {
          const userId = localStorage.getItem('ft_user_id');
          if (!userId) {
            alert('User not authenticated. Please return to the dashboard.');
            return;
          }

          const submissionData = {
            name: data.name,
            email: data.email,
            company: data.company,
            role: data.role,
            timestamp: new Date().toISOString(),
            data: data
          };

          // Submit using RPC function (handles schema-specific tables)
          const { data: result, error: submitError } = await supabaseClient
            .rpc('submit_tool_data', {
              p_schema_name: CONFIG.SCHEMA_NAME,
              p_user_id: userId,
              p_data: submissionData,
              p_tool_slug: CONFIG.TOOL_SLUG
            });

          if (submitError) throw submitError;

          if (!result || !result.success) {
            throw new Error(result?.message || 'Submission failed');
          }

          alert('Submission saved successfully!');
          console.log('Submission ID:', result.submission_id);
          localStorage.setItem('lastSubmissionId', result.submission_id);

        } catch (error) {
          console.error('Submission error:', error);
          alert('Failed to save: ' + error.message);
        }
      };

      // Render different pages based on step
      if (showTransition) {
        return <TransitionScreen message={transitionMessage} progress={transitionProgress} />;
      }

      if (step === 0) {
        return <CoverPage onStart={goNext} />;
      }

      if (step === 0.5) {
        return <IntroPage data={data} updateData={updateData} onNext={goNext} canProceed={canProceedFromIntro()} />;
      }

      if (step === 1) {
        return (
          <>
            <StepPage
              stepNumber={1}
              stepName="PRIORITIES"
              data={data}
              updateData={updateData}
              onNext={goNext}
              onBack={goBack}
              canProceed={canProceedFromStep1()}
              setShowHelp={setShowHelp}
              addPriority={addPriority}
              removePriority={removePriority}
              updatePriority={updatePriority}
              addTask={addTask}
              removeTask={removeTask}
              updateTask={updateTask}
            />
            {showHelp && <HelpModal onClose={() => setShowHelp(false)} stepNumber={1} />}
          </>
        );
      }

      if (step === 2) {
        return (
          <>
            <Step2Page
              data={data}
              updateData={updateData}
              onNext={goNext}
              onBack={goBack}
              canProceed={canProceedFromStep2()}
              setShowHelp={setShowHelp}
              addAgendaItem={addAgendaItem}
              removeAgendaItem={removeAgendaItem}
              updateAgendaItem={updateAgendaItem}
            />
            {showHelp && <HelpModal onClose={() => setShowHelp(false)} stepNumber={2} />}
          </>
        );
      }

      if (step === 3) {
        return (
          <>
            <Step3Page
              data={data}
              updateData={updateData}
              onNext={goNext}
              onBack={goBack}
              canProceed={canProceedFromStep3()}
              setShowHelp={setShowHelp}
            />
            {showHelp && <HelpModal onClose={() => setShowHelp(false)} stepNumber={3} />}
          </>
        );
      }

      if (step === 4) {
        return (
          <>
            <Step4Page
              data={data}
              updateData={updateData}
              onNext={goNext}
              onBack={goBack}
              canProceed={canProceedFromStep4()}
              setShowHelp={setShowHelp}
            />
            {showHelp && <HelpModal onClose={() => setShowHelp(false)} stepNumber={4} />}
          </>
        );
      }

      if (step === 5) {
        return (
          <CanvasPage
            data={data}
            onBack={goBack}
            onExport={exportPDF}
            onSubmit={handleSubmit}
          />
        );
      }

      return null;
    }

    // Cover Page Component
    function CoverPage({ onStart }) {
      return (
        <div className="relative min-h-screen flex items-center justify-center bg-black">
          <div
            className="absolute inset-0 w-full h-full"
            style={{
              backgroundImage: 'url("https://images.unsplash.com/photo-1557804506-669a67965ba0?w=1920&q=80")',
              backgroundSize: 'cover',
              backgroundPosition: 'center'
            }}
          ></div>
          <div className="absolute inset-0" style={{background: 'linear-gradient(to bottom, rgba(0,0,0,0.5), rgba(0,0,0,0.8))'}}></div>

          <div className="relative z-10 text-center text-white px-8 max-w-5xl mx-auto">
            <h1 className="plaak animate-in" style={{fontSize: '120px', lineHeight: '1', marginBottom: '32px'}}>
              MEETING RHYTHM
            </h1>
            <p className="text-4xl mb-12 animate-in" style={{animationDelay: '0.2s'}}>
              Transform chaos into clarity
            </p>
            <button
              onClick={onStart}
              className="bg-white text-black plaak px-16 py-6 border-4 border-white hover:bg-black hover:text-white transition-all text-3xl animate-in"
              style={{animationDelay: '0.4s'}}
            >
              START
            </button>
          </div>
        </div>
      );
    }

    // Intro Page Component
    function IntroPage({ data, updateData, onNext, canProceed }) {
      return (
        <div className="bg-black text-white min-h-screen p-16">
          <div className="max-w-5xl mx-auto">
            <h1 className="plaak mb-16 animate-in" style={{fontSize: '100px'}}>
              BEFORE WE START
            </h1>

            {/* User Details */}
            <div className="mb-12 animate-in" style={{animationDelay: '0.05s'}}>
              <h2 className="plaak text-6xl mb-6">YOUR DETAILS</h2>
              <div className="space-y-6 bg-white text-black p-8">
                <div>
                  <label className="monument text-sm block mb-2">NAME <span className="text-red-500">*</span></label>
                  <input
                    type="text"
                    value={data.name}
                    onChange={(e) => updateData('name', e.target.value)}
                    placeholder="Sarah Chen"
                    className="w-full"
                  />
                </div>
                <div>
                  <label className="monument text-sm block mb-2">EMAIL <span className="text-red-500">*</span></label>
                  <input
                    type="email"
                    value={data.email}
                    onChange={(e) => updateData('email', e.target.value)}
                    placeholder="sarah.chen@company.com"
                    className="w-full"
                  />
                </div>
                <div>
                  <label className="monument text-sm block mb-2">COMPANY <span className="text-red-500">*</span></label>
                  <input
                    type="text"
                    value={data.company}
                    onChange={(e) => updateData('company', e.target.value)}
                    placeholder="TechCorp Solutions"
                    className="w-full"
                  />
                </div>
                <div>
                  <label className="monument text-sm block mb-2">ROLE</label>
                  <input
                    type="text"
                    value={data.role}
                    onChange={(e) => updateData('role', e.target.value)}
                    placeholder="Chief Operating Officer"
                    className="w-full"
                  />
                </div>
              </div>
            </div>

            {/* Sprint Info */}
            <div className="mb-12 animate-in" style={{animationDelay: '0.08s'}}>
              <h2 className="plaak text-6xl mb-6" style={{color: '#FFF469'}}>SPRINT INFO</h2>
              <div className="bg-white text-black p-8">
                <p className="text-2xl font-bold mb-4">Sprint 11: Mastering the Meeting Rhythm</p>
                <p className="text-xl leading-relaxed mb-4">
                  The Meeting Rhythm is the operational backbone that bridges strategy and execution. It transforms high-level goals into day-to-day priorities, ensuring clarity, alignment, and accountability at every level.
                </p>
                <div className="border-l-4 border-black pl-4 italic text-lg">
                  "Think of the Meeting Rhythm as the conductor of a symphony. Each instrument (team) has its role, and the conductor (rhythm) ensures harmony. Without rhythm, even the best musicians (team members) would create chaos."
                </div>
              </div>
            </div>

            {/* Purpose */}
            <div className="mb-12 animate-in" style={{animationDelay: '0.1s'}}>
              <h2 className="plaak text-6xl mb-6">PURPOSE</h2>

              <div className="border-l-4 border-white pl-6 mb-6">
                <p className="text-3xl italic mb-2">"Execution eats strategy for breakfast."</p>
                <p className="text-xl text-gray-400">— PETER DRUCKER</p>
              </div>

              <p className="text-3xl leading-relaxed mb-4">
                Establish a consistent meeting rhythm to streamline decision-making, ensure alignment, and drive execution across your organization.
              </p>
              <p className="text-2xl text-gray-400">
                Teams with structured meeting rhythms are 30% more likely to achieve annual targets. This tool helps you build that rhythm.
              </p>
            </div>

            {/* Mistakes to Avoid */}
            <div className="mb-12 animate-in" style={{animationDelay: '0.2s'}}>
              <h2 className="plaak text-6xl mb-6" style={{color: '#FFF469'}}>MISTAKES TO AVOID</h2>

              <div className="bg-white text-black p-6 mb-6 border-4 border-yellow-400">
                <p className="riforma-bold text-2xl mb-4">THE SIX CARDINAL MEETING SINS:</p>
                <ul className="text-xl space-y-3">
                  <li className="flex items-start">
                    <span className="text-3xl mr-3">•</span>
                    <span>Presentations are NOT rehearsed beforehand and take too much time</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-3xl mr-3">•</span>
                    <span>Targets and priorities are too long – they should be presented in ONE sentence ONLY</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-3xl mr-3">•</span>
                    <span>Presenting complicated analyses – we are ONLY interested in the STORY behind the analyses</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-3xl mr-3">•</span>
                    <span>Analysis of "What worked/Did not work" is not based on targets/priorities and their outcomes</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-3xl mr-3">•</span>
                    <span>Analysis does not go all the way to the root cause</span>
                  </li>
                  <li className="flex items-start">
                    <span className="text-3xl mr-3">•</span>
                    <span>No clearly defined and concrete START/STOP/DO BETTER actions based on learnings</span>
                  </li>
                </ul>
              </div>

              <ul className="text-2xl space-y-4">
                <li className="flex items-start">
                  <span className="text-4xl mr-4">•</span>
                  <span>Confusing targets (outcomes) with priorities (actions). A priority must describe what you will DO, not what you hope to achieve.</span>
                </li>
                <li className="flex items-start">
                  <span className="text-4xl mr-4">•</span>
                  <span>No clear purpose. Every meeting must have a clear desired outcome. Lack of ownership means no accountability.</span>
                </li>
                <li className="flex items-start">
                  <span className="text-4xl mr-4">•</span>
                  <span>Overcrowding meetings. Cap attendance at 8 people. Eyes and ears in the room – phones and laptops outside.</span>
                </li>
                <li className="flex items-start">
                  <span className="text-4xl mr-4">•</span>
                  <span>Ambiguous outcomes. Conclude with crisp WWW: Who does What by When.</span>
                </li>
              </ul>
            </div>

            {/* The Journey */}
            <div className="mb-16 animate-in" style={{animationDelay: '0.3s'}}>
              <h2 className="plaak text-6xl mb-8">THE JOURNEY</h2>
              <div className="grid grid-cols-4 gap-6 text-center">
                <div className="border-2 border-white p-6">
                  <div className="text-8xl plaak mb-4">01</div>
                  <p className="text-xl font-bold mb-2">PRIORITIES</p>
                  <p className="text-base text-gray-400">Break down quarterly goals into weekly actions</p>
                </div>
                <div className="border-2 border-white p-6">
                  <div className="text-8xl plaak mb-4">02</div>
                  <p className="text-xl font-bold mb-2">READINESS</p>
                  <p className="text-base text-gray-400">Prepare meetings that drive results</p>
                </div>
                <div className="border-2 border-white p-6">
                  <div className="text-8xl plaak mb-4">03</div>
                  <p className="text-xl font-bold mb-2">EVALUATE</p>
                  <p className="text-base text-gray-400">Assess and improve meeting effectiveness</p>
                </div>
                <div className="border-2 border-white p-6">
                  <div className="text-8xl plaak mb-4">04</div>
                  <p className="text-xl font-bold mb-2">BIG ROCKS</p>
                  <p className="text-base text-gray-400">Solve critical issues in 30 minutes</p>
                </div>
              </div>
            </div>

            <button
              onClick={onNext}
              disabled={!canProceed}
              className="btn-primary w-full text-3xl py-8 plaak"
            >
              LET'S START →
            </button>
          </div>
        </div>
      );
    }

    // Transition Screen Component
    function TransitionScreen({ message, progress }) {
      return (
        <div className="fixed inset-0 bg-black text-white flex items-center justify-center z-50 fade-in">
          <div className="text-center px-8">
            <h1 className="plaak transition-animate-in" style={{fontSize: '120px', marginBottom: '32px'}}>
              SECTION COMPLETE
            </h1>

            <div className="max-w-2xl mx-auto mb-8 transition-animate-in" style={{animationDelay: '0.2s'}}>
              <div className="h-2 bg-gray-800 mb-4">
                <div
                  className="h-full bg-white transition-all duration-1000"
                  style={{width: `${progress}%`}}
                ></div>
              </div>
              <p className="monument text-xl tracking-wider">{message}</p>
            </div>
          </div>
        </div>
      );
    }

    // Step 1: Individual Priorities Breakdown
    function StepPage({ stepNumber, stepName, data, updateData, onNext, onBack, canProceed, setShowHelp, addPriority, removePriority, updatePriority, addTask, removeTask, updateTask }) {
      return (
        <div className="min-h-screen bg-white">
          <HelpButton onClick={() => setShowHelp(true)} />

          <header className="border-b-2 border-black py-6 px-8 no-print">
            <h1 className="plaak text-3xl">MEETING RHYTHM MASTER</h1>
            <p className="text-sm mt-2 text-gray-600">Transform chaos into clarity</p>
          </header>

          <ProgressIndicator currentStep={stepNumber} />

          <main className="p-12 max-w-6xl mx-auto">
            <div className="animate-in">
              <div className="numbered-section mb-8">
                [01] INDIVIDUAL PRIORITIES BREAKDOWN
              </div>

              <div className="bg-black text-white border-4 border-black p-6 mb-8">
                <h3 className="riforma-bold text-3xl mb-2">Break Down The Big Game</h3>
                <p className="text-xl mb-4">
                  Take your quarterly priorities and slice them into weekly, actionable tasks. The goal: turn overwhelming priorities into bite-sized steps you can start TODAY.
                </p>
                <p className="text-lg italic border-l-4 border-yellow-400 pl-4">
                  "In the Fast Track arsenal, the 'Individual priorities breakdown' is the weapon against overwhelming priorities. It's about turning the daunting into the doable."
                </p>
              </div>

              <div className="space-y-12">
                {data.quarterlyPriorities.map((priority, pIndex) => (
                  <div key={pIndex} className="border-2 border-black p-6">
                    <div className="flex justify-between items-start mb-6">
                      <h4 className="riforma-bold text-2xl">Priority {pIndex + 1}</h4>
                      {data.quarterlyPriorities.length > 1 && (
                        <button
                          onClick={() => removePriority(pIndex)}
                          className="btn-secondary text-sm"
                        >
                          Remove
                        </button>
                      )}
                    </div>

                    <div className="space-y-6">
                      <div>
                        <label className="monument text-sm block mb-2">
                          QUARTERLY PRIORITY <span className="text-red-500">*</span>
                        </label>
                        <textarea
                          value={priority.priority}
                          onChange={(e) => updatePriority(pIndex, 'priority', e.target.value)}
                          placeholder="Launch cold email campaign targeting CFOs in manufacturing companies with 50+ employees. Reach 500 decision-makers by end of Q1. Track open rates, reply rates, and meeting bookings weekly."
                          className="w-full"
                          style={{minHeight: '100px'}}
                        />
                        <div className={`char-counter ${priority.priority.length < 20 ? 'invalid' : ''}`}>
                          {priority.priority.length}/300 characters (min 20)
                        </div>
                      </div>

                      <div>
                        <label className="monument text-sm block mb-2">TOTAL HOURS ESTIMATED</label>
                        <input
                          type="number"
                          value={priority.totalHours}
                          onChange={(e) => updatePriority(pIndex, 'totalHours', e.target.value)}
                          placeholder="68"
                          className="w-full"
                        />
                      </div>

                      <div>
                        <h5 className="riforma-bold text-xl mb-4">Tasks Breakdown</h5>
                        {priority.tasks.map((task, tIndex) => (
                          <div key={tIndex} className="bg-gray-50 p-4 mb-4 border border-gray-200">
                            <div className="flex justify-between items-start mb-4">
                              <span className="monument text-xs">TASK {tIndex + 1}</span>
                              {priority.tasks.length > 1 && (
                                <button
                                  onClick={() => removeTask(pIndex, tIndex)}
                                  className="text-sm text-red-600 hover:text-red-800"
                                >
                                  × Remove
                                </button>
                              )}
                            </div>

                            <div className="space-y-4">
                              <div>
                                <label className="monument text-xs block mb-2">TASK DESCRIPTION <span className="text-red-500">*</span></label>
                                <textarea
                                  value={task.task}
                                  onChange={(e) => updateTask(pIndex, tIndex, 'task', e.target.value)}
                                  placeholder="Build list of 200 CFO contacts from LinkedIn Sales Navigator using filters: manufacturing, 50-200 employees, USA. Export to CSV. Verify emails with Hunter.io."
                                  className="w-full text-base"
                                  style={{minHeight: '80px'}}
                                />
                                <div className={`char-counter ${task.task.length < 10 ? 'invalid' : ''}`}>
                                  {task.task.length} characters (min 10)
                                </div>
                              </div>

                              <div className="grid grid-cols-2 gap-4">
                                <div>
                                  <label className="monument text-xs block mb-2">HOURS</label>
                                  <input
                                    type="number"
                                    value={task.hours}
                                    onChange={(e) => updateTask(pIndex, tIndex, 'hours', e.target.value)}
                                    placeholder="10"
                                    className="w-full text-base"
                                  />
                                </div>
                                <div>
                                  <label className="monument text-xs block mb-2">WEEK NUMBER (e.g., W49, W50)</label>
                                  <input
                                    type="text"
                                    value={task.weeks}
                                    onChange={(e) => updateTask(pIndex, tIndex, 'weeks', e.target.value)}
                                    placeholder="W49-W50"
                                    className="w-full text-base"
                                  />
                                </div>
                              </div>
                            </div>
                          </div>
                        ))}

                        <button
                          onClick={() => addTask(pIndex)}
                          className="btn-secondary w-full mt-2"
                        >
                          + Add Task
                        </button>
                      </div>
                    </div>
                  </div>
                ))}

                <button
                  onClick={addPriority}
                  className="btn-secondary w-full"
                >
                  + Add Another Priority
                </button>
              </div>

              <div className="flex justify-between mt-12">
                <button onClick={onBack} className="btn-secondary">
                  ← Back
                </button>
                <button
                  onClick={onNext}
                  disabled={!canProceed}
                  className="btn-primary"
                >
                  Next: Meeting Readiness →
                </button>
              </div>
            </div>
          </main>
        </div>
      );
    }

    // Step 2: Meeting Readiness
    function Step2Page({ data, updateData, onNext, onBack, canProceed, setShowHelp, addAgendaItem, removeAgendaItem, updateAgendaItem }) {
      return (
        <div className="min-h-screen bg-white">
          <HelpButton onClick={() => setShowHelp(true)} />

          <header className="border-b-2 border-black py-6 px-8 no-print">
            <h1 className="plaak text-3xl">MEETING RHYTHM MASTER</h1>
            <p className="text-sm mt-2 text-gray-600">Transform chaos into clarity</p>
          </header>

          <ProgressIndicator currentStep={2} />

          <main className="p-12 max-w-6xl mx-auto">
            <div className="animate-in">
              <div className="numbered-section mb-8">
                [02] MEETING READINESS CHECKLIST
              </div>

              <div className="bg-black text-white border-4 border-black p-6 mb-8">
                <h3 className="riforma-bold text-3xl mb-2">Prepare To Win</h3>
                <p className="text-xl mb-4">
                  Meetings fail because of poor preparation. Use this checklist before EVERY meeting to ensure clarity, focus, and actionable outcomes.
                </p>
                <p className="text-lg italic border-l-4 border-yellow-400 pl-4">
                  "Meetings are the engine rooms of decision-making, information sharing, opinion gathering, and problem-solving. If something can be handled through written communication, it shouldn't be a meeting."
                </p>
              </div>

              <div className="space-y-8">
                <div>
                  <label className="monument text-sm block mb-2">
                    MEETING PURPOSE <span className="text-red-500">*</span>
                  </label>
                  <textarea
                    value={data.meetingPurpose}
                    onChange={(e) => updateData('meetingPurpose', e.target.value)}
                    placeholder="Review Q1 sales performance against target. Identify top 3 bottlenecks in our sales process. Assign specific actions to increase close rate from 12% to 18% by end of Q2."
                    className="w-full"
                  />
                  <div className={`char-counter ${data.meetingPurpose.length < 30 ? 'invalid' : ''}`}>
                    {data.meetingPurpose.length}/500 characters (min 30)
                  </div>
                </div>

                <div>
                  <label className="monument text-sm block mb-2">
                    KEY PARTICIPANTS (Names & Roles) <span className="text-red-500">*</span>
                  </label>
                  <textarea
                    value={data.meetingParticipants}
                    onChange={(e) => updateData('meetingParticipants', e.target.value)}
                    placeholder="Sarah Chen (COO), Marcus Rodriguez (Sales Director), Jennifer Wu (Marketing Lead), David Kim (Finance Manager)"
                    className="w-full"
                  />
                  <div className={`char-counter ${data.meetingParticipants.length < 10 ? 'invalid' : ''}`}>
                    {data.meetingParticipants.length} characters (min 10)
                  </div>
                </div>

                <div>
                  <h4 className="riforma-bold text-2xl mb-4">Agenda Items</h4>
                  {data.agendaItems.map((item, index) => (
                    <div key={index} className="bg-gray-50 p-4 mb-4 border border-gray-200">
                      <div className="flex justify-between items-start mb-4">
                        <span className="monument text-xs">ITEM {index + 1}</span>
                        {data.agendaItems.length > 1 && (
                          <button
                            onClick={() => removeAgendaItem(index)}
                            className="text-sm text-red-600 hover:text-red-800"
                          >
                            × Remove
                          </button>
                        )}
                      </div>

                      <div className="space-y-4">
                        <div>
                          <label className="monument text-xs block mb-2">TOPIC <span className="text-red-500">*</span></label>
                          <input
                            type="text"
                            value={item.topic}
                            onChange={(e) => updateAgendaItem(index, 'topic', e.target.value)}
                            placeholder="Q1 sales performance review"
                            className="w-full text-base"
                          />
                          <div className={`char-counter ${item.topic.length < 10 ? 'invalid' : ''}`}>
                            {item.topic.length} characters (min 10)
                          </div>
                        </div>

                        <div className="grid grid-cols-2 gap-4">
                          <div>
                            <label className="monument text-xs block mb-2">OWNER</label>
                            <input
                              type="text"
                              value={item.owner}
                              onChange={(e) => updateAgendaItem(index, 'owner', e.target.value)}
                              placeholder="Marcus Rodriguez"
                              className="w-full text-base"
                            />
                          </div>
                          <div>
                            <label className="monument text-xs block mb-2">DURATION (minutes)</label>
                            <input
                              type="number"
                              value={item.duration}
                              onChange={(e) => updateAgendaItem(index, 'duration', e.target.value)}
                              placeholder="15"
                              className="w-full text-base"
                            />
                          </div>
                        </div>
                      </div>
                    </div>
                  ))}

                  <button
                    onClick={addAgendaItem}
                    className="btn-secondary w-full"
                  >
                    + Add Agenda Item
                  </button>
                </div>

                <div>
                  <label className="monument text-sm block mb-2">PRE-MEETING MATERIALS (What to share 24hrs before)</label>
                  <textarea
                    value={data.preMaterials}
                    onChange={(e) => updateData('preMaterials', e.target.value)}
                    placeholder="Q1 sales dashboard PDF showing: total revenue ($482K vs $500K target), close rate (12% vs 15% target), average deal size ($8,200), pipeline value by stage. Include top 10 lost deals with reasons."
                    className="w-full"
                  />
                </div>

                <div>
                  <h4 className="riforma-bold text-2xl mb-4">Assigned Roles</h4>
                  <div className="grid grid-cols-3 gap-4">
                    <div>
                      <label className="monument text-xs block mb-2">FACILITATOR</label>
                      <input
                        type="text"
                        value={data.roles.facilitator}
                        onChange={(e) => updateData('roles', {...data.roles, facilitator: e.target.value})}
                        placeholder="Sarah Chen"
                        className="w-full text-base"
                      />
                    </div>
                    <div>
                      <label className="monument text-xs block mb-2">SCRIBE</label>
                      <input
                        type="text"
                        value={data.roles.scribe}
                        onChange={(e) => updateData('roles', {...data.roles, scribe: e.target.value})}
                        placeholder="Jennifer Wu"
                        className="w-full text-base"
                      />
                    </div>
                    <div>
                      <label className="monument text-xs block mb-2">TIMEKEEPER</label>
                      <input
                        type="text"
                        value={data.roles.timekeeper}
                        onChange={(e) => updateData('roles', {...data.roles, timekeeper: e.target.value})}
                        placeholder="David Kim"
                        className="w-full text-base"
                      />
                    </div>
                  </div>
                </div>
              </div>

              <div className="flex justify-between mt-12">
                <button onClick={onBack} className="btn-secondary">
                  ← Back
                </button>
                <button
                  onClick={onNext}
                  disabled={!canProceed}
                  className="btn-primary"
                >
                  Next: Meeting Evaluation →
                </button>
              </div>
            </div>
          </main>
        </div>
      );
    }

    // Step 3: Meeting Evaluation
    function Step3Page({ data, updateData, onNext, onBack, canProceed, setShowHelp }) {
      return (
        <div className="min-h-screen bg-white">
          <HelpButton onClick={() => setShowHelp(true)} />

          <header className="border-b-2 border-black py-6 px-8 no-print">
            <h1 className="plaak text-3xl">MEETING RHYTHM MASTER</h1>
            <p className="text-sm mt-2 text-gray-600">Transform chaos into clarity</p>
          </header>

          <ProgressIndicator currentStep={3} />

          <main className="p-12 max-w-6xl mx-auto">
            <div className="animate-in">
              <div className="numbered-section mb-8">
                [03] MEETING EVALUATION
              </div>

              <div className="bg-black text-white border-4 border-black p-6 mb-8">
                <h3 className="riforma-bold text-3xl mb-2">Learn And Improve</h3>
                <p className="text-xl mb-4">
                  After every meeting, ask: What worked? What didn't? What will we do differently next time? Without reflection, you're destined to repeat the same mistakes.
                </p>
                <p className="text-lg italic border-l-4 border-yellow-400 pl-4">
                  "Companies that prioritize weekly reflection outperform peers by 20% in employee engagement. The analysis must go all the way to the root cause with clearly defined START/STOP/DO BETTER actions."
                </p>
              </div>

              <div className="space-y-8">
                <div className="grid grid-cols-2 gap-6">
                  <div>
                    <label className="monument text-sm block mb-2">
                      MEETING DATE <span className="text-red-500">*</span>
                    </label>
                    <input
                      type="date"
                      value={data.meetingDate}
                      onChange={(e) => updateData('meetingDate', e.target.value)}
                      className="w-full"
                    />
                  </div>
                  <div>
                    <label className="monument text-sm block mb-2">MEETING TYPE</label>
                    <select
                      value={data.meetingType}
                      onChange={(e) => updateData('meetingType', e.target.value)}
                      className="w-full"
                    >
                      <option value="">Select type...</option>
                      <option value="daily">Daily Stand-up</option>
                      <option value="weekly">Weekly Team Meeting</option>
                      <option value="quarterly">Quarterly Review</option>
                      <option value="annual">Annual Planning</option>
                      <option value="working">Working Session</option>
                    </select>
                  </div>
                </div>

                <div>
                  <label className="monument text-sm block mb-2">EFFECTIVENESS RATING</label>
                  <select
                    value={data.effectiveness}
                    onChange={(e) => updateData('effectiveness', e.target.value)}
                    className="w-full"
                  >
                    <option value="">Rate this meeting...</option>
                    <option value="5">5 - Extremely Effective (Clear outcomes, everyone engaged)</option>
                    <option value="4">4 - Very Effective (Most objectives met)</option>
                    <option value="3">3 - Moderately Effective (Some value, some waste)</option>
                    <option value="2">2 - Somewhat Ineffective (Could have been an email)</option>
                    <option value="1">1 - Completely Ineffective (Waste of time)</option>
                  </select>
                </div>

                <div>
                  <label className="monument text-sm block mb-2">
                    WHAT WORKED WELL <span className="text-red-500">*</span>
                  </label>
                  <textarea
                    value={data.whatWorked}
                    onChange={(e) => updateData('whatWorked', e.target.value)}
                    placeholder="Started on time at 9:00am sharp. Marcus presented sales data in 5 minutes using pre-shared dashboard - no time wasted on setup. Jennifer challenged the pipeline assumptions which uncovered that we're targeting wrong buyer personas."
                    className="w-full"
                    style={{minHeight: '120px'}}
                  />
                  <div className={`char-counter ${data.whatWorked.length < 30 ? 'invalid' : ''}`}>
                    {data.whatWorked.length}/500 characters (min 30)
                  </div>
                </div>

                <div>
                  <label className="monument text-sm block mb-2">
                    WHAT DIDN'T WORK <span className="text-red-500">*</span>
                  </label>
                  <textarea
                    value={data.whatDidntWork}
                    onChange={(e) => updateData('whatDidntWork', e.target.value)}
                    placeholder="Went 20 minutes over time because David started debating financial projections methodology. Turned into a theoretical discussion with no actionable outcome. Three people on their phones during the pipeline review."
                    className="w-full"
                    style={{minHeight: '120px'}}
                  />
                  <div className={`char-counter ${data.whatDidntWork.length < 30 ? 'invalid' : ''}`}>
                    {data.whatDidntWork.length}/500 characters (min 30)
                  </div>
                </div>

                <div>
                  <label className="monument text-sm block mb-2">
                    IMPROVEMENTS FOR NEXT TIME <span className="text-red-500">*</span>
                  </label>
                  <textarea
                    value={data.improvements}
                    onChange={(e) => updateData('improvements', e.target.value)}
                    placeholder="START: Assign a timekeeper with authority to cut off discussions. STOP: Allowing methodology debates in execution meetings - move to separate working session. DO BETTER: Send agenda 48hrs in advance, not 24hrs. Include specific questions we need to answer."
                    className="w-full"
                    style={{minHeight: '120px'}}
                  />
                  <div className={`char-counter ${data.improvements.length < 30 ? 'invalid' : ''}`}>
                    {data.improvements.length}/500 characters (min 30)
                  </div>
                </div>
              </div>

              <div className="flex justify-between mt-12">
                <button onClick={onBack} className="btn-secondary">
                  ← Back
                </button>
                <button
                  onClick={onNext}
                  disabled={!canProceed}
                  className="btn-primary"
                >
                  Next: Big Rock Discussion →
                </button>
              </div>
            </div>
          </main>
        </div>
      );
    }

    // Step 4: Big Rock Discussion
    function Step4Page({ data, updateData, onNext, onBack, canProceed, setShowHelp }) {
      return (
        <div className="min-h-screen bg-white">
          <HelpButton onClick={() => setShowHelp(true)} />

          <header className="border-b-2 border-black py-6 px-8 no-print">
            <h1 className="plaak text-3xl">MEETING RHYTHM MASTER</h1>
            <p className="text-sm mt-2 text-gray-600">Transform chaos into clarity</p>
          </header>

          <ProgressIndicator currentStep={4} />

          <main className="p-12 max-w-6xl mx-auto">
            <div className="animate-in">
              <div className="numbered-section mb-8">
                [04] BIG ROCK DISCUSSION FRAMEWORK
              </div>

              <div className="bg-black text-white border-4 border-black p-6 mb-8">
                <h3 className="riforma-bold text-3xl mb-2">Solve Critical Issues In 30 Minutes</h3>
                <p className="text-xl mb-4">
                  The Big Rock Discussion is a structured process to tackle major bottlenecks. Use first principles thinking, Theory of Constraints, and the Law of Subtraction to cut through complexity and drive action.
                </p>
                <p className="text-lg italic border-l-4 border-yellow-400 pl-4">
                  "The goal is to strip problems to their core, identify bottlenecks, and focus only on high-impact actions. Ask the 5 Whys until you reach the root cause, then apply 80/20 to find the vital few actions."
                </p>
              </div>

              <div className="space-y-8">
                <div>
                  <label className="monument text-sm block mb-2">
                    BIG ROCK ISSUE (The critical problem) <span className="text-red-500">*</span>
                  </label>
                  <textarea
                    value={data.bigRockIssue}
                    onChange={(e) => updateData('bigRockIssue', e.target.value)}
                    placeholder="Our sales close rate dropped from 18% to 12% in Q1. We're losing 1 in 10 deals we used to win. If this continues, we'll miss our annual revenue target by $1.2M."
                    className="w-full"
                  />
                  <div className={`char-counter ${data.bigRockIssue.length < 30 ? 'invalid' : ''}`}>
                    {data.bigRockIssue.length}/500 characters (min 30)
                  </div>
                </div>

                <div>
                  <label className="monument text-sm block mb-2">
                    PROBLEM STATEMENT (Crystal clear, measurable) <span className="text-red-500">*</span>
                  </label>
                  <textarea
                    value={data.problemStatement}
                    onChange={(e) => updateData('problemStatement', e.target.value)}
                    placeholder="In Q4 2024, we closed 18% of qualified leads (36 out of 200). In Q1 2025, we closed only 12% (24 out of 200). The 6-point drop equals 12 lost deals worth approximately $98,400 in revenue. Our pipeline value is growing but conversion is falling."
                    className="w-full"
                    style={{minHeight: '120px'}}
                  />
                  <div className={`char-counter ${data.problemStatement.length < 50 ? 'invalid' : ''}`}>
                    {data.problemStatement.length}/500 characters (min 50)
                  </div>
                </div>

                <div>
                  <label className="monument text-sm block mb-2">
                    ROOT CAUSE ANALYSIS (Use 5 Whys + 80/20) <span className="text-red-500">*</span>
                  </label>
                  <textarea
                    value={data.rootCause}
                    onChange={(e) => updateData('rootCause', e.target.value)}
                    placeholder="Why are we losing deals? Price objections increased. Why? Our new pricing (raised 15% in Jan) isn't communicated until proposal stage. Why? Sales team doesn't discuss budget in discovery calls. Why? No budget qualification questions in our script. Root cause: We're attracting leads who can't afford us because we don't qualify budget early. 80% of lost deals cite 'too expensive'."
                    className="w-full"
                    style={{minHeight: '140px'}}
                  />
                  <div className={`char-counter ${data.rootCause.length < 50 ? 'invalid' : ''}`}>
                    {data.rootCause.length}/500 characters (min 50)
                  </div>
                </div>

                <div>
                  <label className="monument text-sm block mb-2">
                    PROPOSED SOLUTIONS (2-3 high-impact actions) <span className="text-red-500">*</span>
                  </label>
                  <textarea
                    value={data.proposedSolutions}
                    onChange={(e) => updateData('proposedSolutions', e.target.value)}
                    placeholder="Solution 1: Add budget qualification in first 5 minutes of discovery call using script: 'Our solutions typically range from $X to $Y. Is that within your planning range?' Disqualify immediately if no. Solution 2: Update website pricing page to show starting prices. Remove 'Contact for pricing' - it attracts tire-kickers. Solution 3: Create ROI calculator showing payback period for typical client ($50K spend = $200K return in 12 months)."
                    className="w-full"
                    style={{minHeight: '140px'}}
                  />
                  <div className={`char-counter ${data.proposedSolutions.length < 50 ? 'invalid' : ''}`}>
                    {data.proposedSolutions.length}/500 characters (min 50)
                  </div>
                </div>

                <div>
                  <h4 className="riforma-bold text-2xl mb-4">Who-What-When (Next Steps)</h4>
                  <div className="bg-gray-50 p-6 border-2 border-black">
                    <div className="space-y-6">
                      <div>
                        <label className="monument text-xs block mb-2">WHO (Owner)</label>
                        <input
                          type="text"
                          value={data.wwwOwner}
                          onChange={(e) => updateData('wwwOwner', e.target.value)}
                          placeholder="Marcus Rodriguez (Sales Director)"
                          className="w-full"
                        />
                      </div>
                      <div>
                        <label className="monument text-xs block mb-2">WHAT (Action)</label>
                        <textarea
                          value={data.wwwWhat}
                          onChange={(e) => updateData('wwwWhat', e.target.value)}
                          placeholder="1. Add budget qualification script to CRM template. 2. Train all 4 sales reps on new script in team meeting. 3. Update website pricing page with Jennifer (Marketing). 4. Create ROI calculator spreadsheet."
                          className="w-full"
                        />
                      </div>
                      <div>
                        <label className="monument text-xs block mb-2">WHEN (Deadline)</label>
                        <input
                          type="text"
                          value={data.wwwWhen}
                          onChange={(e) => updateData('wwwWhen', e.target.value)}
                          placeholder="Script update: March 15. Training: March 18. Website update: March 22. ROI calculator: March 25."
                          className="w-full"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div className="flex justify-between mt-12">
                <button onClick={onBack} className="btn-secondary">
                  ← Back
                </button>
                <button
                  onClick={onNext}
                  disabled={!canProceed}
                  className="btn-primary"
                >
                  Complete & View Canvas →
                </button>
              </div>
            </div>
          </main>
        </div>
      );
    }

    // Canvas Page Component
    function CanvasPage({ data, onBack, onExport, onSubmit }) {
      return (
        <div className="min-h-screen bg-white">
          <header className="no-print border-b-4 border-black p-6">
            <div className="max-w-6xl mx-auto flex justify-between items-center">
              <div>
                <h1 className="plaak text-4xl mb-2">YOUR MEETING RHYTHM CANVAS</h1>
                <p className="text-gray-600">Transform chaos into clarity</p>
              </div>
              <button onClick={onBack} className="btn-secondary">
                ← Edit
              </button>
            </div>
          </header>

          <div className="max-w-6xl mx-auto p-12">
            <div id="canvas-content" className="border-4 border-black p-8 mb-8 bg-white">
              {/* User Info */}
              <div className="mb-8 pb-8 border-b-2 border-black">
                <h2 className="plaak text-3xl mb-4">PARTICIPANT</h2>
                <div className="grid grid-cols-2 gap-4 text-lg">
                  <div><span className="monument text-xs">NAME:</span> {data.name}</div>
                  <div><span className="monument text-xs">COMPANY:</span> {data.company}</div>
                  <div><span className="monument text-xs">EMAIL:</span> {data.email}</div>
                  <div><span className="monument text-xs">ROLE:</span> {data.role}</div>
                </div>
              </div>

              {/* Priorities */}
              <div className="mb-8 pb-8 border-b-2 border-black">
                <h2 className="plaak text-3xl mb-4">QUARTERLY PRIORITIES BREAKDOWN</h2>
                {data.quarterlyPriorities.map((priority, index) => (
                  <div key={index} className="mb-6 p-4 bg-gray-50 border-l-4 border-black">
                    <h3 className="riforma-bold text-xl mb-2">Priority {index + 1}</h3>
                    <p className="mb-3 text-lg">{priority.priority}</p>
                    <p className="monument text-xs mb-3">ESTIMATED HOURS: {priority.totalHours}</p>
                    <div className="pl-4">
                      <p className="monument text-xs font-bold mb-2">TASKS:</p>
                      {priority.tasks.map((task, tIndex) => (
                        <div key={tIndex} className="mb-2 text-base">
                          <p>• {task.task}</p>
                          <p className="text-sm text-gray-600 ml-4">
                            {task.hours} hours | {task.weeks}
                          </p>
                        </div>
                      ))}
                    </div>
                  </div>
                ))}
              </div>

              {/* Meeting Readiness */}
              <div className="mb-8 pb-8 border-b-2 border-black">
                <h2 className="plaak text-3xl mb-4">MEETING READINESS</h2>
                <div className="space-y-4">
                  <div>
                    <p className="monument text-xs mb-1">PURPOSE:</p>
                    <p className="text-lg">{data.meetingPurpose}</p>
                  </div>
                  <div>
                    <p className="monument text-xs mb-1">PARTICIPANTS:</p>
                    <p className="text-lg">{data.meetingParticipants}</p>
                  </div>
                  <div>
                    <p className="monument text-xs mb-2">AGENDA:</p>
                    {data.agendaItems.map((item, index) => (
                      <div key={index} className="mb-2 pl-4 border-l-2 border-gray-300">
                        <p className="font-bold">{item.topic}</p>
                        <p className="text-sm text-gray-600">
                          Owner: {item.owner} | Duration: {item.duration} min
                        </p>
                      </div>
                    ))}
                  </div>
                  <div>
                    <p className="monument text-xs mb-1">ROLES:</p>
                    <p className="text-base">
                      Facilitator: {data.roles.facilitator} | Scribe: {data.roles.scribe} | Timekeeper: {data.roles.timekeeper}
                    </p>
                  </div>
                </div>
              </div>

              {/* Meeting Evaluation */}
              <div className="mb-8 pb-8 border-b-2 border-black">
                <h2 className="plaak text-3xl mb-4">MEETING EVALUATION</h2>
                <div className="space-y-4">
                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <p className="monument text-xs mb-1">DATE:</p>
                      <p className="text-lg">{data.meetingDate}</p>
                    </div>
                    <div>
                      <p className="monument text-xs mb-1">TYPE:</p>
                      <p className="text-lg">{data.meetingType}</p>
                    </div>
                  </div>
                  <div>
                    <p className="monument text-xs mb-1">EFFECTIVENESS RATING:</p>
                    <p className="text-lg">{data.effectiveness}/5</p>
                  </div>
                  <div className="p-4 bg-gray-50">
                    <p className="monument text-xs mb-1">WHAT WORKED:</p>
                    <p className="text-base">{data.whatWorked}</p>
                  </div>
                  <div className="p-4 bg-red-50">
                    <p className="monument text-xs mb-1">WHAT DIDN'T WORK:</p>
                    <p className="text-base">{data.whatDidntWork}</p>
                  </div>
                  <div className="p-4 bg-yellow-50">
                    <p className="monument text-xs mb-1">IMPROVEMENTS:</p>
                    <p className="text-base">{data.improvements}</p>
                  </div>
                </div>
              </div>

              {/* Big Rock Discussion */}
              <div className="mb-8">
                <h2 className="plaak text-3xl mb-4">BIG ROCK DISCUSSION</h2>
                <div className="space-y-4">
                  <div className="p-4 bg-red-50 border-l-4 border-red-600">
                    <p className="monument text-xs mb-1">ISSUE:</p>
                    <p className="text-lg">{data.bigRockIssue}</p>
                  </div>
                  <div>
                    <p className="monument text-xs mb-1">PROBLEM STATEMENT:</p>
                    <p className="text-base">{data.problemStatement}</p>
                  </div>
                  <div>
                    <p className="monument text-xs mb-1">ROOT CAUSE:</p>
                    <p className="text-base">{data.rootCause}</p>
                  </div>
                  <div className="p-4 bg-gray-50">
                    <p className="monument text-xs mb-1">PROPOSED SOLUTIONS:</p>
                    <p className="text-base">{data.proposedSolutions}</p>
                  </div>
                  <div className="p-4 bg-black text-white">
                    <p className="plaak text-xl mb-3">WHO-WHAT-WHEN</p>
                    <p className="mb-2"><span className="monument text-xs">WHO:</span> {data.wwwOwner}</p>
                    <p className="mb-2"><span className="monument text-xs">WHAT:</span> {data.wwwWhat}</p>
                    <p><span className="monument text-xs">WHEN:</span> {data.wwwWhen}</p>
                  </div>
                </div>
              </div>
            </div>

            {/* Action Buttons */}
            <div className="flex gap-4 no-print">
              <button onClick={() => window.print()} className="btn-secondary flex-1">
                Print Canvas
              </button>
              <button onClick={onExport} className="btn-secondary flex-1">
                Export PDF
              </button>
              <button onClick={onSubmit} className="btn-primary flex-1">
                Submit to Team
              </button>
            </div>
          </div>
        </div>
      );
    }

    // Progress Indicator Component
    function ProgressIndicator({ currentStep }) {
      const steps = [
        { num: 1, name: 'PRIORITIES' },
        { num: 2, name: 'READINESS' },
        { num: 3, name: 'EVALUATE' },
        { num: 4, name: 'BIG ROCKS' }
      ];

      return (
        <div className="border-b border-gray-200 py-6 px-8 no-print">
          <div className="max-w-6xl mx-auto">
            <div className="flex items-center justify-between">
              {steps.map((step, index) => (
                <React.Fragment key={step.num}>
                  <div className="flex flex-col items-center">
                    <div
                      className={`progress-dot ${
                        currentStep === step.num ? 'active' :
                        currentStep > step.num ? 'completed' : ''
                      }`}
                    ></div>
                    <span className="monument text-xs mt-2">{step.name}</span>
                  </div>
                  {index < steps.length - 1 && (
                    <div className="progress-line" style={{width: '100px'}}></div>
                  )}
                </React.Fragment>
              ))}
            </div>
          </div>
        </div>
      );
    }

    // Help Button Component
    function HelpButton({ onClick }) {
      return (
        <button className="help-button" onClick={onClick}>
          ?
        </button>
      );
    }

    // Help Modal Component
    function HelpModal({ onClose, stepNumber }) {
      const helpContent = {
        1: {
          title: "INDIVIDUAL PRIORITIES BREAKDOWN",
          why: "Without breaking down big priorities into weekly tasks, you'll feel overwhelmed and procrastinate. This tool forces you to make the first step so simple you can't say no.",
          what: "Take each quarterly priority and slice it into 5-7 weekly tasks. Each task should be clear enough that someone else could execute it.",
          how: [
            "Write your quarterly priority in ONE clear sentence with a measurable outcome",
            "Break it into 5-7 tasks - start with the EASIEST first step (just showing up)",
            "Assign hours needed for each task (be realistic, not optimistic)",
            "Schedule tasks across specific weeks (W49, W50, W51, etc.)",
            "The tool will show if you're overcommitting - adjust accordingly"
          ]
        },
        2: {
          title: "MEETING READINESS CHECKLIST",
          why: "Meetings fail because of poor preparation. If you don't know WHY you're meeting, WHO needs to be there, and WHAT success looks like, you're wasting everyone's time.",
          what: "Complete this checklist BEFORE every meeting. It forces clarity on purpose, participants, agenda, and roles. No meeting happens without this preparation.",
          how: [
            "Define the meeting purpose in one clear sentence with expected outcome",
            "List ONLY essential participants (max 8 people) - if they're not deciding or executing, they don't belong",
            "Create agenda with specific topics, owners, and time limits for each",
            "Share materials 24 hours in advance - no surprises in the meeting",
            "Assign three roles: Facilitator (keeps focus), Scribe (captures actions), Timekeeper (enforces discipline)"
          ]
        },
        3: {
          title: "MEETING EVALUATION",
          why: "Without reflection, you'll repeat the same meeting mistakes forever. Teams that evaluate meetings improve 20% faster than those who don't.",
          what: "After EVERY meeting, document what worked and what didn't. Identify concrete START/STOP/DO BETTER actions for next time.",
          how: [
            "Rate effectiveness honestly (1-5 scale) - be brutally honest",
            "Document what worked: specific actions, behaviors, or moments that drove value",
            "Document what didn't work: where time was wasted, confusion happened, or value was lost",
            "Define improvements using START/STOP/DO BETTER format",
            "Share evaluation with team - make learning transparent and accountability real"
          ]
        },
        4: {
          title: "BIG ROCK DISCUSSION",
          why: "Most teams waste hours debating without solving. This framework uses first principles thinking and Theory of Constraints to solve critical issues in 30 minutes.",
          what: "A structured 30-minute process to tackle your biggest bottleneck. Uses 5 Whys to find root cause, 80/20 to prioritize, and Law of Subtraction to simplify.",
          how: [
            "State the problem in one clear sentence with numbers (not feelings)",
            "Deconstruct using first principles: What do we KNOW is true? What's the single biggest bottleneck?",
            "Find root cause: Ask WHY 5 times until you reach the real problem (not symptoms)",
            "Generate 2-3 high-impact solutions using 80/20 - what will solve 80% of the problem?",
            "Define WHO does WHAT by WHEN - specific names, actions, deadlines"
          ]
        }
      };

      const content = helpContent[stepNumber] || helpContent[1];

      return (
        <div className="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 fade-in" onClick={onClose}>
          <div className="bg-white max-w-3xl p-12 border-8 border-black max-h-[80vh] overflow-y-auto" onClick={(e) => e.stopPropagation()}>
            <div className="flex justify-between items-start mb-6">
              <h2 className="plaak text-5xl">{content.title}</h2>
              <button onClick={onClose} className="text-4xl font-bold hover:text-gray-600">×</button>
            </div>

            {/* WHY Section */}
            <h3 className="riforma-bold text-3xl mb-4">Why</h3>
            <p className="mb-6 text-lg leading-relaxed">{content.why}</p>

            {/* WHAT Section */}
            <h3 className="riforma-bold text-3xl mb-4">What</h3>
            <p className="mb-6 text-lg leading-relaxed">{content.what}</p>

            {/* HOW Section */}
            <h3 className="riforma-bold text-3xl mb-4">How</h3>
            <ol className="text-lg space-y-3 mb-8">
              {content.how.map((step, index) => (
                <li key={index} className="leading-relaxed">
                  <span className="riforma-bold">{index + 1}.</span> {step}
                </li>
              ))}
            </ol>

            <button onClick={onClose} className="btn-primary w-full text-xl py-4">
              GOT IT
            </button>
          </div>
        </div>
      );
    }

    // Render App
    ReactDOM.render(<MeetingRhythmApp />, document.getElementById('root'));
  </script>
</body>
</html>
