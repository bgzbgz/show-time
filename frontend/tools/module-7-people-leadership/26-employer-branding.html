<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Employer Branding & Recruitment Strategy | Fast Track Program</title>

  <!-- React & ReactDOM from CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <!-- Babel Standalone for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- jsPDF + html2canvas for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <style>
    /* Font Face Declarations */
    @font-face {
      font-family: 'Plaak';
      src: url('Plaak3Trial-43-Bold.woff2') format('woff2');
      font-weight: bold;
      font-style: normal;
    }

    @font-face {
      font-family: 'Riforma';
      src: url('RiformaLL-Regular.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
    }

    @font-face {
      font-family: 'Monument';
      src: url('MonumentGrotesk-Mono.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
    }

    /* Global Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Riforma', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .plaak {
      font-family: 'Plaak', sans-serif;
      text-transform: uppercase;
      font-weight: bold;
      letter-spacing: -0.02em;
    }

    .riforma-bold {
      font-family: 'Riforma', sans-serif;
      font-weight: bold;
    }

    .monument {
      font-family: 'Monument', monospace;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* Animations */
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .animate-in {
      animation: slideIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .fade-in {
      animation: fadeIn 0.4s ease-out;
    }

    .transition-animate-in {
      animation: slideIn 0.6s ease-out;
    }

    /* Button Styles */
    .btn-primary {
      background: #000000;
      color: #FFFFFF;
      padding: 16px 32px;
      border: 2px solid #000000;
      font-size: 18px;
      font-family: 'Riforma', sans-serif;
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: normal;
    }

    .btn-primary:hover:not(:disabled) {
      transform: scale(1.02);
    }

    .btn-primary:disabled {
      background: #E0E0E0;
      border-color: #E0E0E0;
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: #FFFFFF;
      color: #000000;
      padding: 12px 24px;
      border: 2px solid #000000;
      font-size: 16px;
      font-family: 'Riforma', sans-serif;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-secondary:hover {
      background: #F8F8F8;
    }

    .btn-small {
      background: #FFFFFF;
      color: #000000;
      padding: 8px 16px;
      border: 1px solid #000000;
      font-size: 14px;
      font-family: 'Riforma', sans-serif;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-small:hover {
      background: #F8F8F8;
    }

    .btn-remove {
      background: #FFFFFF;
      color: #000000;
      padding: 8px 16px;
      border: 1px solid #E0E0E0;
      font-size: 14px;
      font-family: 'Riforma', sans-serif;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-remove:hover {
      border-color: #EF4444;
      color: #EF4444;
    }

    /* Form Styles */
    input[type="text"],
    input[type="number"],
    input[type="email"],
    textarea,
    select {
      border: 1px solid #E0E0E0;
      padding: 12px 16px;
      font-size: 18px;
      font-family: 'Riforma', sans-serif;
      width: 100%;
      transition: border-color 0.2s ease;
    }

    input:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: #000000;
    }

    textarea {
      min-height: 120px;
      resize: vertical;
    }

    textarea::placeholder {
      white-space: pre-line;
    }

    /* Numbered Section Badge */
    .numbered-section {
      background: #000000;
      color: #FFFFFF;
      padding: 10px 16px;
      font-family: 'Plaak', sans-serif;
      font-size: 26px;
      display: inline-block;
      text-transform: uppercase;
      letter-spacing: -0.02em;
    }

    /* Help Button */
    .help-button {
      position: fixed;
      top: 24px;
      right: 24px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: #000000;
      color: #FFFFFF;
      font-size: 28px;
      border: none;
      cursor: pointer;
      z-index: 40;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Riforma', sans-serif;
    }

    .help-button:hover {
      background: #FFF469;
      color: #000000;
      transform: scale(1.1);
    }

    /* Progress Indicator */
    .progress-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #E0E0E0;
      transition: all 0.3s ease;
    }

    .progress-dot.active {
      background: #000000;
      transform: scale(1.3);
    }

    .progress-dot.completed {
      background: #000000;
    }

    .progress-line {
      height: 2px;
      background: #E0E0E0;
      flex: 1;
    }

    /* Character Counter */
    .char-counter {
      font-size: 14px;
      color: #666;
      margin-top: 4px;
    }

    .char-counter.invalid {
      color: #EF4444;
    }

    /* Ranking Styles */
    .rank-item {
      border: 2px solid #E0E0E0;
      padding: 16px;
      margin-bottom: 12px;
      transition: all 0.2s ease;
      cursor: move;
      background: #FFFFFF;
    }

    .rank-item:hover {
      border-color: #000000;
    }

    .rank-item.rank-1 {
      border-color: #FFF469;
      background: #FFFEF0;
    }

    .rank-badge {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #E0E0E0;
      color: #000000;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Monument', monospace;
      font-size: 16px;
      font-weight: bold;
    }

    .rank-badge.rank-1 {
      background: #FFF469;
      color: #000000;
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      padding: 24px;
    }

    .modal-content {
      background: #FFFFFF;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      padding: 32px;
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #000000;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-close:hover {
      color: #EF4444;
    }

    /* Canvas Styles */
    .canvas-section {
      border: 2px solid #000000;
      padding: 24px;
      margin-bottom: 24px;
      background: #FFFFFF;
    }

    .canvas-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 24px;
    }

    /* Highlight Styles */
    .highlight-box {
      background: #FFF469;
      border: 2px solid #000000;
      padding: 24px;
      margin: 16px 0;
    }

    .info-box {
      background: #F8F8F8;
      border-left: 4px solid #000000;
      padding: 16px;
      margin: 16px 0;
    }

    .warning-box {
      background: #FEF2F2;
      border-left: 4px solid #EF4444;
      padding: 16px;
      margin: 16px 0;
    }

    /* Checklist Styles */
    .checklist-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 12px;
      border-bottom: 1px solid #E0E0E0;
    }

    .checklist-item:last-child {
      border-bottom: none;
    }

    .checkbox-custom {
      width: 20px;
      height: 20px;
      border: 2px solid #000000;
      cursor: pointer;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .checkbox-custom.checked {
      background: #000000;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef, Fragment } = React;

    const CONFIG = {
        SUPABASE_URL: 'https://vpfayzzjnegdefjrnyoc.supabase.co',
        SUPABASE_ANON_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZwZmF5enpqbmVnZGVmanJueW9jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxMzAwODUsImV4cCI6MjA4NTcwNjA4NX0.7qwzd9kwyRG0Wx9DDSc8F9a1SRD0CoC6CGS-9M1sxIs',
        TOOL_SLUG: 'employer-branding',
        SPRINT_NUMBER: 26,
        SCHEMA_NAME: 'sprint_26_employer_branding',
        AUTOSAVE_DELAY: 2000
    };

    const { createClient } = supabase;
    const supabaseClient = createClient(CONFIG.SUPABASE_URL, CONFIG.SUPABASE_ANON_KEY);

    // Main App Component
    function EmployerBrandingApp() {
      const [step, setStep] = useState(0);
      const [showHelp, setShowHelp] = useState(false);

      const [data, setData] = useState({
        targetSegment: {
          segmentName: '',
          targetRoles: '',
          mindsetTraits: '',
          motivationFactors: '',
          skillsRequired: '',
          culturePreferences: ''
        },
        needsRanking: [
          { id: 1, category: 'Compensation', rank: 0, description: '', importance: '', details: 'Fairness, promotions, evaluation system' },
          { id: 2, category: 'Benefits', rank: 0, description: '', importance: '', details: 'Flexibility, insurance, holidays' },
          { id: 3, category: 'Career', rank: 0, description: '', importance: '', details: 'Progression, feedback, development' },
          { id: 4, category: 'Work Environment', rank: 0, description: '', importance: '', details: 'Recognition, autonomy, challenges' },
          { id: 5, category: 'Culture', rank: 0, description: '', importance: '', details: 'Leadership, team spirit, purpose, collaboration' }
        ],
        evp: {
          primaryNeed: '',
          corePromise: '',
          differentiator: '',
          evpStatement: '',
          whatWeOffer: '',
          whatWeDemand: ''
        },
        evpTesting: {
          internalTruths: [
            { id: 1, truth: '', evidence: '' }
          ],
          antiEVP: [
            { id: 1, statement: '' }
          ],
          employeeTestimonials: '',
          credibilityCheck: ''
        },
        campaign: {
          brandMessage: '',
          tagline: '',
          keyMessages: [
            { id: 1, audience: '', message: '' }
          ],
          channels: {
            inbound: '',
            outbound: '',
            content: ''
          },
          recruitmentProcess: {
            cvScreen: '',
            phoneScreen: '',
            assessment: '',
            structuredInterviews: '',
            scorecard: ''
          },
          campaignActivation: {
            format: '',
            tone: '',
            timeline: '',
            owners: '',
            budget: ''
          }
        }
      });

      // Load from localStorage
      useEffect(() => {
        const saved = localStorage.getItem('employer-branding-data');
        if (saved) {
          try {
            const savedData = JSON.parse(saved);
            setData(savedData);
          } catch (e) {
            console.error('Error loading saved data:', e);
          }
        }
      }, []);

      // Auto-save every 2 seconds
      useEffect(() => {
        const interval = setInterval(() => {
          localStorage.setItem('employer-branding-data', JSON.stringify(data));
        }, 2000);
        return () => clearInterval(interval);
      }, [data]);

      const updateData = (field, value) => {
        setData({ ...data, [field]: value });
      };

      const updateNested = (parent, field, value) => {
        setData({
          ...data,
          [parent]: {
            ...(data[parent] || {}),
            [field]: value
          }
        });
      };

      const updateDeepNested = (parent, child, field, value) => {
        setData({
          ...data,
          [parent]: {
            ...(data[parent] || {}),
            [child]: {
              ...((data[parent] || {})[child] || {}),
              [field]: value
            }
          }
        });
      };

      // Needs Ranking Functions
      const updateNeedRank = (id, rank) => {
        const updated = (data.needsRanking || []).map(need =>
          need.id === id ? { ...need, rank } : need
        );
        updateData('needsRanking', updated);
      };

      const updateNeedField = (id, field, value) => {
        const updated = (data.needsRanking || []).map(need =>
          need.id === id ? { ...need, [field]: value } : need
        );
        updateData('needsRanking', updated);
      };

      // Internal Truths Functions
      const addInternalTruth = () => {
        const newTruth = { id: Date.now(), truth: '', evidence: '' };
        updateNested('evpTesting', 'internalTruths', [
          ...((data.evpTesting || {}).internalTruths || []),
          newTruth
        ]);
      };

      const removeInternalTruth = (id) => {
        if (((data.evpTesting || {}).internalTruths || []).length > 1) {
          updateNested('evpTesting', 'internalTruths',
            ((data.evpTesting || {}).internalTruths || []).filter(t => t.id !== id)
          );
        }
      };

      const updateInternalTruth = (id, field, value) => {
        const updated = ((data.evpTesting || {}).internalTruths || []).map(t =>
          t.id === id ? { ...t, [field]: value } : t
        );
        updateNested('evpTesting', 'internalTruths', updated);
      };

      // Anti-EVP Functions
      const addAntiEVP = () => {
        const newAnti = { id: Date.now(), statement: '' };
        updateNested('evpTesting', 'antiEVP', [
          ...((data.evpTesting || {}).antiEVP || []),
          newAnti
        ]);
      };

      const removeAntiEVP = (id) => {
        if (((data.evpTesting || {}).antiEVP || []).length > 1) {
          updateNested('evpTesting', 'antiEVP',
            ((data.evpTesting || {}).antiEVP || []).filter(a => a.id !== id)
          );
        }
      };

      const updateAntiEVP = (id, value) => {
        const updated = ((data.evpTesting || {}).antiEVP || []).map(a =>
          a.id === id ? { ...a, statement: value } : a
        );
        updateNested('evpTesting', 'antiEVP', updated);
      };

      // Key Messages Functions
      const addKeyMessage = () => {
        const newMessage = { id: Date.now(), audience: '', message: '' };
        updateDeepNested('campaign', 'keyMessages', null, [
          ...((data.campaign || {}).keyMessages || []),
          newMessage
        ]);
      };

      const removeKeyMessage = (id) => {
        if (((data.campaign || {}).keyMessages || []).length > 1) {
          const updated = ((data.campaign || {}).keyMessages || []).filter(m => m.id !== id);
          setData({
            ...data,
            campaign: {
              ...(data.campaign || {}),
              keyMessages: updated
            }
          });
        }
      };

      const updateKeyMessage = (id, field, value) => {
        const updated = ((data.campaign || {}).keyMessages || []).map(m =>
          m.id === id ? { ...m, [field]: value } : m
        );
        setData({
          ...data,
          campaign: {
            ...(data.campaign || {}),
            keyMessages: updated
          }
        });
      };

      // Validation Functions
      const isStep1Valid = () => {
        const seg = data.targetSegment || {};
        return (
          (seg.segmentName || '').length >= 30 &&
          (seg.targetRoles || '').length >= 30 &&
          (seg.mindsetTraits || '').length >= 30 &&
          (seg.motivationFactors || '').length >= 30
        );
      };

      const isStep2Valid = () => {
        const ranks = (data.needsRanking || []).map(n => n.rank).filter(r => r > 0);
        const hasAllRanks = ranks.length === 5;
        const hasUniqueRanks = new Set(ranks).size === 5;
        const allDescribed = (data.needsRanking || []).every(n => (n.description || '').length >= 20);
        return hasAllRanks && hasUniqueRanks && allDescribed;
      };

      const isStep3Valid = () => {
        const evp = data.evp || {};
        return (
          (evp.primaryNeed || '').length > 0 &&
          (evp.corePromise || '').length >= 30 &&
          (evp.differentiator || '').length >= 30 &&
          (evp.evpStatement || '').length >= 50
        );
      };

      const isStep4Valid = () => {
        const testing = data.evpTesting || {};
        const truths = (testing.internalTruths || []).filter(t =>
          (t.truth || '').length >= 20 && (t.evidence || '').length >= 20
        );
        const antiStatements = (testing.antiEVP || []).filter(a =>
          (a.statement || '').length >= 20
        );
        return truths.length >= 3 && antiStatements.length >= 2;
      };

      const isStep5Valid = () => {
        const camp = data.campaign || {};
        return (
          (camp.brandMessage || '').length >= 30 &&
          (camp.tagline || '').length >= 10 &&
          ((camp.channels || {}).inbound || '').length >= 20 &&
          ((camp.campaignActivation || {}).timeline || '').length >= 20
        );
      };

      const canProceed = () => {
        switch (step) {
          case 1: return isStep1Valid();
          case 2: return isStep2Valid();
          case 3: return isStep3Valid();
          case 4: return isStep4Valid();
          case 5: return isStep5Valid();
          default: return true;
        }
      };

      // Supabase submission
      const handleSubmit = async () => {
        // Get user ID from localStorage
        const userId = localStorage.getItem('ft_user_id');
        if (!userId) {
          alert('User not authenticated. Please return to the dashboard.');
          return false;
        }

        try {
          // Submit using RPC function
          const { data: result, error } = await supabaseClient
            .rpc('submit_tool_data', {
              p_schema_name: CONFIG.SCHEMA_NAME,
              p_user_id: userId,
              p_data: data,
              p_tool_slug: CONFIG.TOOL_SLUG
            });

          if (error) throw error;

          if (!result || !result.success) {
            throw new Error(result?.message || 'Submission failed');
          }

          console.log('Submission ID:', result.submission_id);
          localStorage.setItem('lastSubmissionId', result.submission_id);
          alert('✅ Employer Branding Strategy submitted successfully!');
          return true;
        } catch (error) {
          console.error('Supabase submission error:', error);
          alert('❌ Submission failed. Please try again.');
          return false;
        }
      };

      // PDF Export
      const exportToPDF = async () => {
        const canvas = document.getElementById('canvas-view');
        if (!canvas) return;

        try {
          const canvasElement = await html2canvas(canvas, {
            scale: 2,
            backgroundColor: '#FFFFFF'
          });

          const { jsPDF } = window.jspdf;
          const pdf = new jsPDF({
            orientation: 'portrait',
            unit: 'mm',
            format: 'a4'
          });

          const imgWidth = 210;
          const imgHeight = (canvasElement.height * imgWidth) / canvasElement.width;
          const imgData = canvasElement.toDataURL('image/png');

          pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
          pdf.save('employer-branding-strategy.pdf');
        } catch (error) {
          console.error('Error generating PDF:', error);
          alert('Error generating PDF. Please try again.');
        }
      };

      // Render Functions
      const renderCoverPage = () => (
        <div className="relative min-h-screen flex items-center justify-center bg-black">
          <div
            className="absolute inset-0 w-full h-full"
            style={{
              backgroundImage: 'url("kevin-et-laurianne-langlais-yCg-sSDyxsE-unsplash.jpg")',
              backgroundSize: 'cover',
              backgroundPosition: 'center'
            }}
          ></div>
          <div className="absolute inset-0" style={{background: 'linear-gradient(to bottom, rgba(0,0,0,0.6), rgba(0,0,0,0.85))'}}></div>

          <div className="relative z-10 text-center text-white px-8 max-w-5xl mx-auto">
            <h1 className="plaak animate-in" style={{fontSize: '100px', lineHeight: '1', marginBottom: '32px'}}>
              EMPLOYER
            </h1>
            <h2 className="plaak animate-in" style={{fontSize: '80px', lineHeight: '1', marginBottom: '32px', color: '#FFF469', animationDelay: '0.1s'}}>
              BRANDING
            </h2>
            <p className="text-4xl mb-12 animate-in" style={{animationDelay: '0.2s'}}>
              Attract the right talent with a sharp, authentic Employer Value Proposition.
            </p>
            <button
              onClick={() => setStep(0.5)}
              className="bg-white text-black plaak px-16 py-6 border-4 border-white hover:bg-black hover:text-white transition-all text-3xl animate-in"
              style={{animationDelay: '0.3s'}}
            >
              LET'S GO →
            </button>
          </div>
        </div>
      );

      const renderIntroduction = () => (
        <div className="min-h-screen bg-white p-8 animate-in">
          <div className="max-w-4xl mx-auto">
            <div className="numbered-section mb-8">INTRODUCTION</div>

            <h2 className="plaak text-5xl mb-6">
              What is an Employer Value Proposition?
            </h2>

            <div className="text-xl leading-relaxed mb-8">
              <p className="mb-6">
                The EVP is the centerpiece of your employer branding. It is the promise your company makes to employees in exchange for their contribution.
              </p>

              <p className="mb-6">
                An effective EVP is both authentic (reflects reality) and aspirational (points toward your company dream).
              </p>
            </div>

            <div className="highlight-box mb-8">
              <h3 className="plaak text-2xl mb-4">WHY THIS MATTERS</h3>
              <ul className="space-y-3 text-lg">
                <li>• 72% of recruiting leaders agree employer branding significantly impacts hiring</li>
                <li>• 50% of candidates won't work for a company with bad reputation - even for more pay</li>
                <li>• Strong employer brands see 50% more qualified applicants and cut hiring costs by 43%</li>
              </ul>
            </div>

            <div className="info-box mb-8">
              <h3 className="plaak text-xl mb-4">THE 5 NEED CATEGORIES</h3>
              <p className="mb-4">An EVP typically focuses on one dominant need of your target employee group:</p>
              <div className="space-y-3">
                <div>
                  <strong>1. Compensation</strong> - Fairness, promotions, evaluation system
                </div>
                <div>
                  <strong>2. Benefits</strong> - Flexibility, insurance, holidays
                </div>
                <div>
                  <strong>3. Career</strong> - Progression, feedback, development
                </div>
                <div>
                  <strong>4. Work Environment</strong> - Recognition, autonomy, challenges
                </div>
                <div>
                  <strong>5. Culture</strong> - Leadership, team spirit, purpose, collaboration
                </div>
              </div>
            </div>

            <div className="info-box mb-8">
              <h3 className="plaak text-xl mb-4">THE PROCESS</h3>
              <ol className="space-y-2 text-lg">
                <li>1. Define your target talent profile (segmentation)</li>
                <li>2. Rank the 5 need categories by importance to your segment</li>
                <li>3. Formulate your EVP around your #1 ranked need</li>
                <li>4. Test your EVP with internal truths and Anti-EVP</li>
                <li>5. Create campaign messages and recruitment strategy</li>
              </ol>
            </div>

            <div className="flex gap-4 mt-12">
              <button onClick={() => setStep(0)} className="btn-secondary">
                Back
              </button>
              <button onClick={() => setStep(1)} className="btn-primary">
                Start Segmentation
              </button>
            </div>
          </div>
        </div>
      );

      const renderStep1 = () => {
        const seg = data.targetSegment || {};

        return (
          <div className="min-h-screen bg-white p-8 animate-in">
            <div className="max-w-4xl mx-auto">
              <ProgressIndicator currentStep={1} />
              <div className="numbered-section mb-8">01</div>

              <h2 className="plaak text-5xl mb-6">
                EMPLOYEE SEGMENTATION
              </h2>

              <p className="text-xl mb-8 leading-relaxed">
                Define your target talent profile. Who do you want to attract? What skills, mindset, and motivations characterize them?
              </p>

              <div className="space-y-8">
                {/* Segment Name */}
                <div>
                  <label className="monument text-sm mb-2 block">
                    SEGMENT NAME
                  </label>
                  <input
                    type="text"
                    value={seg.segmentName || ''}
                    onChange={(e) => updateNested('targetSegment', 'segmentName', e.target.value)}
                    placeholder="e.g., Skilled Technicians and Engineers"
                    className="w-full"
                  />
                  <div className={`char-counter ${(seg.segmentName || '').length < 30 ? 'invalid' : ''}`}>
                    {(seg.segmentName || '').length} / 30 minimum
                  </div>
                </div>

                {/* Target Roles */}
                <div>
                  <label className="monument text-sm mb-2 block">
                    TARGET ROLES
                  </label>
                  <textarea
                    value={seg.targetRoles || ''}
                    onChange={(e) => updateNested('targetSegment', 'targetRoles', e.target.value)}
                    placeholder="Specific roles you want to attract&#10;e.g., Maintenance engineers, production technicians, R&D specialists"
                    className="w-full"
                  />
                  <div className={`char-counter ${(seg.targetRoles || '').length < 30 ? 'invalid' : ''}`}>
                    {(seg.targetRoles || '').length} / 30 minimum
                  </div>
                </div>

                {/* Mindset Traits */}
                <div>
                  <label className="monument text-sm mb-2 block">
                    MINDSET TRAITS
                  </label>
                  <textarea
                    value={seg.mindsetTraits || ''}
                    onChange={(e) => updateNested('targetSegment', 'mindsetTraits', e.target.value)}
                    placeholder="What mindset characterizes your ideal candidates?&#10;e.g., Precision-focused, process-driven, reliability-oriented, growth-minded"
                    className="w-full"
                  />
                  <div className={`char-counter ${(seg.mindsetTraits || '').length < 30 ? 'invalid' : ''}`}>
                    {(seg.mindsetTraits || '').length} / 30 minimum
                  </div>
                </div>

                {/* Motivation Factors */}
                <div>
                  <label className="monument text-sm mb-2 block">
                    MOTIVATION FACTORS
                  </label>
                  <textarea
                    value={seg.motivationFactors || ''}
                    onChange={(e) => updateNested('targetSegment', 'motivationFactors', e.target.value)}
                    placeholder="What drives them? What are they looking for?&#10;e.g., Pride in quality work, job stability, opportunities to grow in technically sophisticated environment"
                    className="w-full"
                  />
                  <div className={`char-counter ${(seg.motivationFactors || '').length < 30 ? 'invalid' : ''}`}>
                    {(seg.motivationFactors || '').length} / 30 minimum
                  </div>
                </div>

                {/* Skills Required */}
                <div>
                  <label className="monument text-sm mb-2 block">
                    SKILLS REQUIRED (OPTIONAL)
                  </label>
                  <textarea
                    value={seg.skillsRequired || ''}
                    onChange={(e) => updateNested('targetSegment', 'skillsRequired', e.target.value)}
                    placeholder="Technical or soft skills needed"
                    className="w-full"
                  />
                </div>

                {/* Culture Preferences */}
                <div>
                  <label className="monument text-sm mb-2 block">
                    CULTURE PREFERENCES (OPTIONAL)
                  </label>
                  <textarea
                    value={seg.culturePreferences || ''}
                    onChange={(e) => updateNested('targetSegment', 'culturePreferences', e.target.value)}
                    placeholder="What kind of culture do they thrive in?"
                    className="w-full"
                  />
                </div>
              </div>

              <div className="info-box mt-8">
                <strong>Example: Industrial Equipment Manufacturer</strong>
                <p className="mt-2">
                  Target: Maintenance engineers, production technicians, R&D specialists<br/>
                  Mindset: Precision-focused, process-driven, reliability-oriented<br/>
                  Motivation: Pride in quality, job stability, growth in technically sophisticated environment
                </p>
              </div>

              <div className="flex gap-4 mt-12">
                <button onClick={() => setStep(0.5)} className="btn-secondary">
                  Back
                </button>
                <button
                  onClick={() => setStep(2)}
                  className="btn-primary"
                  disabled={!isStep1Valid()}
                >
                  Continue to Needs Ranking
                </button>
              </div>
            </div>
          </div>
        );
      };

      const renderStep2 = () => {
        const needs = data.needsRanking || [];
        const rankedNeeds = [...needs].sort((a, b) => (a.rank || 999) - (b.rank || 999));

        return (
          <div className="min-h-screen bg-white p-8 animate-in">
            <div className="max-w-4xl mx-auto">
              <ProgressIndicator currentStep={2} />
              <div className="numbered-section mb-8">02</div>

              <h2 className="plaak text-5xl mb-6">
                NEEDS RANKING
              </h2>

              <p className="text-xl mb-8 leading-relaxed">
                Rank the 5 need categories by importance to your target segment (1 = most important, 5 = least important). Your #1 ranked need will become the focus of your EVP.
              </p>

              <div className="space-y-6">
                {needs.map(need => (
                  <div
                    key={need.id}
                    className={`rank-item ${need.rank === 1 ? 'rank-1' : ''}`}
                  >
                    <div className="flex items-start gap-4 mb-4">
                      <div>
                        <label className="monument text-xs mb-2 block">RANK</label>
                        <select
                          value={need.rank || 0}
                          onChange={(e) => updateNeedRank(need.id, parseInt(e.target.value))}
                          className="w-20 p-2 border border-gray-300"
                        >
                          <option value={0}>-</option>
                          <option value={1}>1</option>
                          <option value={2}>2</option>
                          <option value={3}>3</option>
                          <option value={4}>4</option>
                          <option value={5}>5</option>
                        </select>
                      </div>
                      <div className="flex-1">
                        <div className="flex items-center gap-2 mb-2">
                          <h3 className="plaak text-2xl">{need.category}</h3>
                          {need.rank === 1 && (
                            <span className="text-xs monument bg-yellow-300 px-2 py-1">
                              PRIMARY FOCUS
                            </span>
                          )}
                        </div>
                        <p className="text-sm text-gray-600 mb-3">{need.details}</p>

                        <label className="monument text-xs mb-2 block">
                          WHAT WE OFFER IN THIS CATEGORY
                        </label>
                        <textarea
                          value={need.description || ''}
                          onChange={(e) => updateNeedField(need.id, 'description', e.target.value)}
                          placeholder="Describe your specific offerings in this category"
                          className="w-full min-h-[80px]"
                        />
                        <div className={`char-counter ${(need.description || '').length < 20 ? 'invalid' : ''}`}>
                          {(need.description || '').length} / 20 minimum
                        </div>
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              {rankedNeeds.filter(n => n.rank > 0).length === 5 && (
                <div className="highlight-box mt-8">
                  <h3 className="plaak text-xl mb-4">YOUR RANKING</h3>
                  <ol className="space-y-2">
                    {rankedNeeds.filter(n => n.rank > 0).map(need => (
                      <li key={need.id} className="text-lg">
                        {need.rank}. <strong>{need.category}</strong>
                        {need.rank === 1 && <span className="ml-2 monument text-sm">(PRIMARY EVP FOCUS)</span>}
                      </li>
                    ))}
                  </ol>
                </div>
              )}

              <div className="warning-box mt-8">
                <strong>Important:</strong> Make sure each category has a unique rank (1-5) and all categories are described.
              </div>

              <div className="flex gap-4 mt-12">
                <button onClick={() => setStep(1)} className="btn-secondary">
                  Back
                </button>
                <button
                  onClick={() => {
                    // Auto-fill primary need from rank 1
                    const topNeed = needs.find(n => n.rank === 1);
                    if (topNeed && !(data.evp || {}).primaryNeed) {
                      updateNested('evp', 'primaryNeed', topNeed.category);
                    }
                    setStep(3);
                  }}
                  className="btn-primary"
                  disabled={!isStep2Valid()}
                >
                  Continue to EVP Formulation
                </button>
              </div>
            </div>
          </div>
        );
      };

      const renderStep3 = () => {
        const evp = data.evp || {};
        const topNeed = (data.needsRanking || []).find(n => n.rank === 1);

        return (
          <div className="min-h-screen bg-white p-8 animate-in">
            <div className="max-w-4xl mx-auto">
              <ProgressIndicator currentStep={3} />
              <div className="numbered-section mb-8">03</div>

              <h2 className="plaak text-5xl mb-6">
                EVP FORMULATION
              </h2>

              <p className="text-xl mb-8 leading-relaxed">
                Now create your Employer Value Proposition. Focus on your #1 ranked need and articulate what makes you different.
              </p>

              {topNeed && (
                <div className="highlight-box mb-8">
                  <h3 className="plaak text-xl mb-2">YOUR PRIMARY NEED</h3>
                  <p className="text-2xl font-bold">{topNeed.category}</p>
                  <p className="mt-2 text-gray-700">{topNeed.description}</p>
                </div>
              )}

              <div className="space-y-8">
                {/* Primary Need */}
                <div>
                  <label className="monument text-sm mb-2 block">
                    PRIMARY NEED CATEGORY
                  </label>
                  <input
                    type="text"
                    value={evp.primaryNeed || (topNeed ? topNeed.category : '')}
                    onChange={(e) => updateNested('evp', 'primaryNeed', e.target.value)}
                    placeholder="Which need category is your primary focus?"
                    className="w-full"
                  />
                </div>

                {/* Core Promise */}
                <div>
                  <label className="monument text-sm mb-2 block">
                    CORE PROMISE
                  </label>
                  <textarea
                    value={evp.corePromise || ''}
                    onChange={(e) => updateNested('evp', 'corePromise', e.target.value)}
                    placeholder="What do we promise to deliver on this primary need?&#10;e.g., We provide the best technical training, equipment, and mentorship for craftsmen who want to master their skills"
                    className="w-full"
                  />
                  <div className={`char-counter ${(evp.corePromise || '').length < 30 ? 'invalid' : ''}`}>
                    {(evp.corePromise || '').length} / 30 minimum
                  </div>
                </div>

                {/* Differentiator */}
                <div>
                  <label className="monument text-sm mb-2 block">
                    DIFFERENTIATOR
                  </label>
                  <textarea
                    value={evp.differentiator || ''}
                    onChange={(e) => updateNested('evp', 'differentiator', e.target.value)}
                    placeholder="What makes us better than competitors on this dimension?&#10;e.g., Industry-leading equipment, paid certifications, average tenure 8+ years, culture of mentorship"
                    className="w-full"
                  />
                  <div className={`char-counter ${(evp.differentiator || '').length < 30 ? 'invalid' : ''}`}>
                    {(evp.differentiator || '').length} / 30 minimum
                  </div>
                </div>

                {/* EVP Statement */}
                <div>
                  <label className="monument text-sm mb-2 block">
                    EVP STATEMENT (1-2 SENTENCES)
                  </label>
                  <textarea
                    value={evp.evpStatement || ''}
                    onChange={(e) => updateNested('evp', 'evpStatement', e.target.value)}
                    placeholder="Combine your core promise and differentiator into a clear EVP statement.&#10;e.g., The Best Place for Technical Craftsmen Who Want Stability and Mastery. Work With the Best Machines. Learn from the Best People."
                    className="w-full min-h-[120px]"
                  />
                  <div className={`char-counter ${(evp.evpStatement || '').length < 50 ? 'invalid' : ''}`}>
                    {(evp.evpStatement || '').length} / 50 minimum
                  </div>
                </div>

                {/* Split View: What We Offer / What We Demand */}
                <div className="grid grid-cols-2 gap-6">
                  <div>
                    <label className="monument text-sm mb-2 block">
                      WHAT WE OFFER
                    </label>
                    <textarea
                      value={evp.whatWeOffer || ''}
                      onChange={(e) => updateNested('evp', 'whatWeOffer', e.target.value)}
                      placeholder="Tangible offerings&#10;e.g., Best equipment, paid training, mentorship, job security"
                      className="w-full min-h-[120px]"
                    />
                  </div>
                  <div>
                    <label className="monument text-sm mb-2 block">
                      WHAT WE DEMAND
                    </label>
                    <textarea
                      value={evp.whatWeDemand || ''}
                      onChange={(e) => updateNested('evp', 'whatWeDemand', e.target.value)}
                      placeholder="What we expect in return&#10;e.g., Precision, commitment to quality, continuous learning mindset"
                      className="w-full min-h-[120px]"
                    />
                  </div>
                </div>
              </div>

              {evp.evpStatement && evp.evpStatement.length >= 50 && (
                <div className="highlight-box mt-8">
                  <h3 className="plaak text-xl mb-4">YOUR EVP</h3>
                  <p className="text-2xl leading-relaxed">{evp.evpStatement}</p>
                </div>
              )}

              <div className="info-box mt-8">
                <strong>Example EVP:</strong>
                <p className="mt-2 text-lg italic">
                  "At [Company Name], you don't just work a job - you master your craft. With industry-leading equipment, paid certification programs, and a team of mentors, we're where skilled technicians come to grow, stay, and thrive."
                </p>
              </div>

              <div className="flex gap-4 mt-12">
                <button onClick={() => setStep(2)} className="btn-secondary">
                  Back
                </button>
                <button
                  onClick={() => setStep(4)}
                  className="btn-primary"
                  disabled={!isStep3Valid()}
                >
                  Continue to EVP Testing
                </button>
              </div>
            </div>
          </div>
        );
      };

      const renderStep4 = () => {
        const testing = data.evpTesting || {};
        const truths = testing.internalTruths || [];
        const antiStatements = testing.antiEVP || [];

        return (
          <div className="min-h-screen bg-white p-8 animate-in">
            <div className="max-w-4xl mx-auto">
              <ProgressIndicator currentStep={4} />
              <div className="numbered-section mb-8">04</div>

              <h2 className="plaak text-5xl mb-6">
                EVP TESTING
              </h2>

              <p className="text-xl mb-8 leading-relaxed">
                Test your EVP for authenticity and sharpness. What internal truths support it? What are you explicitly NOT?
              </p>

              {/* Internal Truths */}
              <div className="mb-12">
                <h3 className="plaak text-3xl mb-4">INTERNAL TRUTHS</h3>
                <p className="text-lg mb-6 text-gray-700">
                  Real, lived elements that support your EVP. What insiders say when recommending your workplace. Minimum 3 truths required.
                </p>

                <div className="space-y-6">
                  {truths.map((truth, index) => (
                    <div key={truth.id} className="border-2 border-gray-200 p-6">
                      <div className="flex justify-between items-start mb-4">
                        <h4 className="monument text-sm">TRUTH #{index + 1}</h4>
                        {truths.length > 1 && (
                          <button
                            onClick={() => removeInternalTruth(truth.id)}
                            className="btn-remove"
                          >
                            Remove
                          </button>
                        )}
                      </div>

                      <div className="space-y-4">
                        <div>
                          <label className="text-sm font-bold mb-2 block">
                            The Truth
                          </label>
                          <textarea
                            value={truth.truth || ''}
                            onChange={(e) => updateInternalTruth(truth.id, 'truth', e.target.value)}
                            placeholder="e.g., Average tenure of technicians is 8+ years"
                            className="w-full min-h-[80px]"
                          />
                          <div className={`char-counter ${(truth.truth || '').length < 20 ? 'invalid' : ''}`}>
                            {(truth.truth || '').length} / 20 minimum
                          </div>
                        </div>

                        <div>
                          <label className="text-sm font-bold mb-2 block">
                            Evidence
                          </label>
                          <textarea
                            value={truth.evidence || ''}
                            onChange={(e) => updateInternalTruth(truth.id, 'evidence', e.target.value)}
                            placeholder="What proves this is true? Data, examples, testimonials"
                            className="w-full min-h-[80px]"
                          />
                          <div className={`char-counter ${(truth.evidence || '').length < 20 ? 'invalid' : ''}`}>
                            {(truth.evidence || '').length} / 20 minimum
                          </div>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>

                <button
                  onClick={addInternalTruth}
                  className="btn-secondary mt-4"
                >
                  Add Internal Truth
                </button>
              </div>

              {/* Anti-EVP */}
              <div className="mb-12">
                <h3 className="plaak text-3xl mb-4">ANTI-EVP</h3>
                <p className="text-lg mb-6 text-gray-700">
                  What you are explicitly NOT. This sharpens your positioning and helps you stand out. Minimum 2 statements required.
                </p>

                <div className="space-y-4">
                  {antiStatements.map((anti, index) => (
                    <div key={anti.id} className="border-2 border-gray-200 p-6">
                      <div className="flex justify-between items-start mb-4">
                        <h4 className="monument text-sm">ANTI-EVP #{index + 1}</h4>
                        {antiStatements.length > 1 && (
                          <button
                            onClick={() => removeAntiEVP(anti.id)}
                            className="btn-remove"
                          >
                            Remove
                          </button>
                        )}
                      </div>

                      <textarea
                        value={anti.statement || ''}
                        onChange={(e) => updateAntiEVP(anti.id, e.target.value)}
                        placeholder="e.g., We are NOT a place for people who want rapid job-hopping or constant role changes"
                        className="w-full min-h-[80px]"
                      />
                      <div className={`char-counter ${(anti.statement || '').length < 20 ? 'invalid' : ''}`}>
                        {(anti.statement || '').length} / 20 minimum
                      </div>
                    </div>
                  ))}
                </div>

                <button
                  onClick={addAntiEVP}
                  className="btn-secondary mt-4"
                >
                  Add Anti-EVP Statement
                </button>
              </div>

              {/* Credibility Check */}
              <div className="mb-12">
                <h3 className="plaak text-3xl mb-4">CREDIBILITY CHECK</h3>
                <textarea
                  value={testing.credibilityCheck || ''}
                  onChange={(e) => updateNested('evpTesting', 'credibilityCheck', e.target.value)}
                  placeholder="Is your EVP authentic, sustainable, and differentiating? Any red flags (generic, overpromising, inconsistent)?"
                  className="w-full min-h-[120px]"
                />
              </div>

              <div className="info-box">
                <strong>Example Internal Truths:</strong>
                <ul className="mt-2 space-y-2">
                  <li>• ISO-certified facility with best-in-class machinery</li>
                  <li>• Technicians get ongoing technical certifications paid by company</li>
                  <li>• Culture of mentorship: junior staff paired with experienced engineers</li>
                </ul>
                <strong className="block mt-4">Example Anti-EVP:</strong>
                <ul className="mt-2 space-y-2">
                  <li>• We are NOT a fast-paced startup with constant change</li>
                  <li>• We are NOT a place for people who want to switch roles every year</li>
                </ul>
              </div>

              <div className="flex gap-4 mt-12">
                <button onClick={() => setStep(3)} className="btn-secondary">
                  Back
                </button>
                <button
                  onClick={() => setStep(5)}
                  className="btn-primary"
                  disabled={!isStep4Valid()}
                >
                  Continue to Campaign Planning
                </button>
              </div>
            </div>
          </div>
        );
      };

      const renderStep5 = () => {
        const camp = data.campaign || {};
        const channels = camp.channels || {};
        const recruitment = camp.recruitmentProcess || {};
        const activation = camp.campaignActivation || {};
        const messages = camp.keyMessages || [];

        return (
          <div className="min-h-screen bg-white p-8 animate-in">
            <div className="max-w-4xl mx-auto">
              <ProgressIndicator currentStep={5} />
              <div className="numbered-section mb-8">05</div>

              <h2 className="plaak text-5xl mb-6">
                CAMPAIGN PLANNING
              </h2>

              <p className="text-xl mb-8 leading-relaxed">
                Turn your EVP into a recruitment campaign. Create compelling messages and define your activation strategy.
              </p>

              {/* Brand Message */}
              <div className="mb-12">
                <h3 className="plaak text-3xl mb-4">EMPLOYER BRAND MESSAGE</h3>

                <div className="space-y-6">
                  <div>
                    <label className="monument text-sm mb-2 block">
                      HEADLINE MESSAGE
                    </label>
                    <textarea
                      value={camp.brandMessage || ''}
                      onChange={(e) => updateNested('campaign', 'brandMessage', e.target.value)}
                      placeholder="Compelling message that attracts your target segment&#10;e.g., At [Company], you don't just work a job - you master your craft"
                      className="w-full"
                    />
                    <div className={`char-counter ${(camp.brandMessage || '').length < 30 ? 'invalid' : ''}`}>
                      {(camp.brandMessage || '').length} / 30 minimum
                    </div>
                  </div>

                  <div>
                    <label className="monument text-sm mb-2 block">
                      TAGLINE
                    </label>
                    <input
                      type="text"
                      value={camp.tagline || ''}
                      onChange={(e) => updateNested('campaign', 'tagline', e.target.value)}
                      placeholder="Short memorable phrase, e.g., Work With the Best. Learn from the Best."
                      className="w-full"
                    />
                    <div className={`char-counter ${(camp.tagline || '').length < 10 ? 'invalid' : ''}`}>
                      {(camp.tagline || '').length} / 10 minimum
                    </div>
                  </div>
                </div>
              </div>

              {/* Key Messages by Audience */}
              <div className="mb-12">
                <h3 className="plaak text-3xl mb-4">KEY MESSAGES BY AUDIENCE</h3>

                <div className="space-y-4">
                  {messages.map((msg, index) => (
                    <div key={msg.id} className="border-2 border-gray-200 p-6">
                      <div className="flex justify-between items-start mb-4">
                        <h4 className="monument text-sm">MESSAGE #{index + 1}</h4>
                        {messages.length > 1 && (
                          <button
                            onClick={() => removeKeyMessage(msg.id)}
                            className="btn-remove"
                          >
                            Remove
                          </button>
                        )}
                      </div>

                      <div className="grid grid-cols-2 gap-4">
                        <div>
                          <label className="text-sm font-bold mb-2 block">Audience</label>
                          <input
                            type="text"
                            value={msg.audience || ''}
                            onChange={(e) => updateKeyMessage(msg.id, 'audience', e.target.value)}
                            placeholder="e.g., Job candidates"
                            className="w-full"
                          />
                        </div>
                        <div>
                          <label className="text-sm font-bold mb-2 block">Message</label>
                          <input
                            type="text"
                            value={msg.message || ''}
                            onChange={(e) => updateKeyMessage(msg.id, 'message', e.target.value)}
                            placeholder="Tailored message for this audience"
                            className="w-full"
                          />
                        </div>
                      </div>
                    </div>
                  ))}
                </div>

                <button
                  onClick={addKeyMessage}
                  className="btn-secondary mt-4"
                >
                  Add Key Message
                </button>
              </div>

              {/* Channels Strategy */}
              <div className="mb-12">
                <h3 className="plaak text-3xl mb-4">CHANNELS STRATEGY</h3>

                <div className="space-y-6">
                  <div>
                    <label className="monument text-sm mb-2 block">
                      INBOUND CHANNELS
                    </label>
                    <textarea
                      value={channels.inbound || ''}
                      onChange={(e) => updateDeepNested('campaign', 'channels', 'inbound', e.target.value)}
                      placeholder="Where will candidates find you?&#10;e.g., LinkedIn, job boards, career page, university programs, referrals"
                      className="w-full"
                    />
                    <div className={`char-counter ${(channels.inbound || '').length < 20 ? 'invalid' : ''}`}>
                      {(channels.inbound || '').length} / 20 minimum
                    </div>
                  </div>

                  <div>
                    <label className="monument text-sm mb-2 block">
                      OUTBOUND STRATEGY
                    </label>
                    <textarea
                      value={channels.outbound || ''}
                      onChange={(e) => updateDeepNested('campaign', 'channels', 'outbound', e.target.value)}
                      placeholder="How will you actively reach candidates?&#10;e.g., Direct outreach, headhunting, targeted campaigns for hard-to-fill roles"
                      className="w-full"
                    />
                  </div>

                  <div>
                    <label className="monument text-sm mb-2 block">
                      CONTENT STRATEGY
                    </label>
                    <textarea
                      value={channels.content || ''}
                      onChange={(e) => updateDeepNested('campaign', 'channels', 'content', e.target.value)}
                      placeholder="What content will attract and engage talent?&#10;e.g., Employee stories, behind-the-scenes videos, technical blog posts"
                      className="w-full"
                    />
                  </div>
                </div>
              </div>

              {/* Recruitment Process */}
              <div className="mb-12">
                <h3 className="plaak text-3xl mb-4">RECRUITMENT PROCESS</h3>

                <div className="space-y-4">
                  <div>
                    <label className="monument text-sm mb-2 block">CV SCREEN</label>
                    <input
                      type="text"
                      value={recruitment.cvScreen || ''}
                      onChange={(e) => updateDeepNested('campaign', 'recruitmentProcess', 'cvScreen', e.target.value)}
                      placeholder="What are you looking for in CVs?"
                      className="w-full"
                    />
                  </div>

                  <div>
                    <label className="monument text-sm mb-2 block">PHONE SCREEN</label>
                    <input
                      type="text"
                      value={recruitment.phoneScreen || ''}
                      onChange={(e) => updateDeepNested('campaign', 'recruitmentProcess', 'phoneScreen', e.target.value)}
                      placeholder="Initial conversation topics"
                      className="w-full"
                    />
                  </div>

                  <div>
                    <label className="monument text-sm mb-2 block">ASSESSMENT</label>
                    <input
                      type="text"
                      value={recruitment.assessment || ''}
                      onChange={(e) => updateDeepNested('campaign', 'recruitmentProcess', 'assessment', e.target.value)}
                      placeholder="Skills tests, case studies, technical challenges"
                      className="w-full"
                    />
                  </div>

                  <div>
                    <label className="monument text-sm mb-2 block">STRUCTURED INTERVIEWS</label>
                    <input
                      type="text"
                      value={recruitment.structuredInterviews || ''}
                      onChange={(e) => updateDeepNested('campaign', 'recruitmentProcess', 'structuredInterviews', e.target.value)}
                      placeholder="Interview format and focus areas"
                      className="w-full"
                    />
                  </div>

                  <div>
                    <label className="monument text-sm mb-2 block">SCORECARD</label>
                    <input
                      type="text"
                      value={recruitment.scorecard || ''}
                      onChange={(e) => updateDeepNested('campaign', 'recruitmentProcess', 'scorecard', e.target.value)}
                      placeholder="How do you evaluate candidates?"
                      className="w-full"
                    />
                  </div>
                </div>
              </div>

              {/* Campaign Activation */}
              <div className="mb-12">
                <h3 className="plaak text-3xl mb-4">CAMPAIGN ACTIVATION</h3>

                <div className="space-y-6">
                  <div>
                    <label className="monument text-sm mb-2 block">FORMAT</label>
                    <input
                      type="text"
                      value={activation.format || ''}
                      onChange={(e) => updateDeepNested('campaign', 'campaignActivation', 'format', e.target.value)}
                      placeholder="e.g., Video series, social media campaign, job ads, career page redesign"
                      className="w-full"
                    />
                  </div>

                  <div>
                    <label className="monument text-sm mb-2 block">TONE</label>
                    <input
                      type="text"
                      value={activation.tone || ''}
                      onChange={(e) => updateDeepNested('campaign', 'campaignActivation', 'tone', e.target.value)}
                      placeholder="e.g., Professional, inspiring, authentic, technical"
                      className="w-full"
                    />
                  </div>

                  <div>
                    <label className="monument text-sm mb-2 block">TIMELINE</label>
                    <textarea
                      value={activation.timeline || ''}
                      onChange={(e) => updateDeepNested('campaign', 'campaignActivation', 'timeline', e.target.value)}
                      placeholder="90-day rollout plan&#10;e.g., Week 1-2: Internal alignment, Week 3-4: Content creation, Week 5+: Launch and activate"
                      className="w-full"
                    />
                    <div className={`char-counter ${(activation.timeline || '').length < 20 ? 'invalid' : ''}`}>
                      {(activation.timeline || '').length} / 20 minimum
                    </div>
                  </div>

                  <div>
                    <label className="monument text-sm mb-2 block">OWNERS</label>
                    <input
                      type="text"
                      value={activation.owners || ''}
                      onChange={(e) => updateDeepNested('campaign', 'campaignActivation', 'owners', e.target.value)}
                      placeholder="Who executes? e.g., HR + Marketing + Department Heads"
                      className="w-full"
                    />
                  </div>

                  <div>
                    <label className="monument text-sm mb-2 block">BUDGET</label>
                    <input
                      type="text"
                      value={activation.budget || ''}
                      onChange={(e) => updateDeepNested('campaign', 'campaignActivation', 'budget', e.target.value)}
                      placeholder="Estimated budget for campaign"
                      className="w-full"
                    />
                  </div>
                </div>
              </div>

              <div className="flex gap-4 mt-12">
                <button onClick={() => setStep(4)} className="btn-secondary">
                  Back
                </button>
                <button
                  onClick={() => setStep(6)}
                  className="btn-primary"
                  disabled={!isStep5Valid()}
                >
                  View Canvas
                </button>
              </div>
            </div>
          </div>
        );
      };

      const renderStep6 = () => {
        const seg = data.targetSegment || {};
        const evp = data.evp || {};
        const testing = data.evpTesting || {};
        const camp = data.campaign || {};
        const needs = (data.needsRanking || []).filter(n => n.rank > 0).sort((a, b) => a.rank - b.rank);
        const topThreeNeeds = needs.slice(0, 3);

        return (
          <div className="min-h-screen bg-white p-8 animate-in">
            <div className="max-w-6xl mx-auto">
              <div id="canvas-view">
                <div className="text-center mb-12">
                  <h1 className="plaak text-6xl mb-4">
                    EMPLOYER BRANDING STRATEGY
                  </h1>
                  <p className="text-xl text-gray-600">Strategic Canvas</p>
                </div>

                {/* Target Segment */}
                <div className="canvas-section">
                  <h2 className="plaak text-2xl mb-4">TARGET SEGMENT</h2>
                  <div className="space-y-3">
                    <div>
                      <span className="monument text-xs">SEGMENT:</span>
                      <p className="text-lg">{seg.segmentName || '-'}</p>
                    </div>
                    <div>
                      <span className="monument text-xs">TARGET ROLES:</span>
                      <p className="text-lg">{seg.targetRoles || '-'}</p>
                    </div>
                    <div>
                      <span className="monument text-xs">MINDSET:</span>
                      <p className="text-lg">{seg.mindsetTraits || '-'}</p>
                    </div>
                    <div>
                      <span className="monument text-xs">MOTIVATION:</span>
                      <p className="text-lg">{seg.motivationFactors || '-'}</p>
                    </div>
                  </div>
                </div>

                {/* EVP Statement - Highlighted */}
                <div className="highlight-box mb-6">
                  <h2 className="plaak text-2xl mb-4">EMPLOYER VALUE PROPOSITION</h2>
                  <p className="text-3xl leading-relaxed font-bold">
                    {evp.evpStatement || '-'}
                  </p>
                </div>

                {/* Top 3 Needs */}
                <div className="canvas-section">
                  <h2 className="plaak text-2xl mb-4">TOP 3 NEEDS RANKING</h2>
                  <div className="space-y-3">
                    {topThreeNeeds.map(need => (
                      <div key={need.id} className="flex items-start gap-4">
                        <div className={`rank-badge ${need.rank === 1 ? 'rank-1' : ''}`}>
                          {need.rank}
                        </div>
                        <div className="flex-1">
                          <h3 className="font-bold text-lg">{need.category}</h3>
                          <p className="text-gray-700">{need.description}</p>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                {/* What We Offer / What We Demand */}
                <div className="canvas-grid">
                  <div className="canvas-section">
                    <h2 className="plaak text-xl mb-4">WHAT WE OFFER</h2>
                    <p className="text-lg leading-relaxed">{evp.whatWeOffer || '-'}</p>
                  </div>
                  <div className="canvas-section">
                    <h2 className="plaak text-xl mb-4">WHAT WE DEMAND</h2>
                    <p className="text-lg leading-relaxed">{evp.whatWeDemand || '-'}</p>
                  </div>
                </div>

                {/* Internal Truths */}
                <div className="canvas-section">
                  <h2 className="plaak text-2xl mb-4">INTERNAL TRUTHS (Supporting EVP)</h2>
                  <div className="space-y-4">
                    {((testing.internalTruths || []).filter(t => (t.truth || '').length > 0)).map((truth, index) => (
                      <div key={truth.id}>
                        <p className="font-bold">{index + 1}. {truth.truth}</p>
                        <p className="text-gray-700 ml-4">Evidence: {truth.evidence}</p>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Anti-EVP */}
                <div className="canvas-section" style={{ background: '#F8F8F8' }}>
                  <h2 className="plaak text-2xl mb-4">ANTI-EVP (What We're NOT)</h2>
                  <ul className="space-y-2">
                    {((testing.antiEVP || []).filter(a => (a.statement || '').length > 0)).map((anti, index) => (
                      <li key={anti.id} className="text-lg">
                        {index + 1}. {anti.statement}
                      </li>
                    ))}
                  </ul>
                </div>

                {/* Campaign Message */}
                <div className="canvas-section">
                  <h2 className="plaak text-2xl mb-4">CAMPAIGN MESSAGE</h2>
                  <div className="space-y-3">
                    <div>
                      <span className="monument text-xs">HEADLINE:</span>
                      <p className="text-2xl font-bold">{camp.brandMessage || '-'}</p>
                    </div>
                    <div>
                      <span className="monument text-xs">TAGLINE:</span>
                      <p className="text-xl italic">{camp.tagline || '-'}</p>
                    </div>
                  </div>
                </div>

                {/* Channels & Timeline */}
                <div className="canvas-grid">
                  <div className="canvas-section">
                    <h2 className="plaak text-xl mb-4">KEY CHANNELS</h2>
                    <div className="space-y-3">
                      <div>
                        <span className="font-bold">Inbound:</span>
                        <p className="text-sm">{((camp.channels || {}).inbound || '-')}</p>
                      </div>
                      <div>
                        <span className="font-bold">Outbound:</span>
                        <p className="text-sm">{((camp.channels || {}).outbound || '-')}</p>
                      </div>
                    </div>
                  </div>
                  <div className="canvas-section">
                    <h2 className="plaak text-xl mb-4">ACTIVATION TIMELINE</h2>
                    <p className="text-sm">{((camp.campaignActivation || {}).timeline || '-')}</p>
                  </div>
                </div>

                {/* Success Metrics */}
                <div className="canvas-section">
                  <h2 className="plaak text-2xl mb-4">SUCCESS METRICS</h2>
                  <ul className="space-y-2 text-lg">
                    <li>• Increase in qualified applicants</li>
                    <li>• Reduced time-to-hire</li>
                    <li>• Improved candidate quality scores</li>
                    <li>• Employee referral rate increase</li>
                    <li>• Employer brand awareness metrics</li>
                  </ul>
                </div>
              </div>

              <div className="flex gap-4 mt-12 no-print">
                <button onClick={() => setStep(5)} className="btn-secondary">
                  Back to Edit
                </button>
                <button onClick={exportToPDF} className="btn-primary">
                  Export to PDF
                </button>
              </div>
            </div>
          </div>
        );
      };

      const renderHelpModal = () => {
        const helpContent = {
          1: {
            title: 'Employee Segmentation',
            content: (
              <>
                <p className="mb-4">
                  Define your target talent profile. Who do you want to attract?
                </p>
                <h4 className="font-bold mb-2">Segmentation Criteria:</h4>
                <ul className="list-disc ml-6 mb-4 space-y-1">
                  <li>What roles/positions are you targeting?</li>
                  <li>What mindset and attitudes do they have?</li>
                  <li>What motivates them to choose an employer?</li>
                  <li>What skills are essential?</li>
                  <li>What culture do they thrive in?</li>
                </ul>
                <div className="bg-gray-100 p-4 mt-4">
                  <strong>Example:</strong>
                  <p className="mt-2">
                    <strong>Segment:</strong> Skilled Technicians and Engineers<br/>
                    <strong>Roles:</strong> Maintenance engineers, production technicians, R&D specialists<br/>
                    <strong>Mindset:</strong> Precision-focused, process-driven, reliability-oriented<br/>
                    <strong>Motivation:</strong> Pride in quality, job stability, growth opportunities
                  </p>
                </div>
              </>
            )
          },
          2: {
            title: 'Needs Ranking',
            content: (
              <>
                <p className="mb-4">
                  Rank the 5 need categories by importance to your target segment. Your #1 ranked need becomes your EVP focus.
                </p>
                <h4 className="font-bold mb-2">The 5 Need Categories:</h4>
                <ul className="list-disc ml-6 mb-4 space-y-2">
                  <li><strong>Compensation:</strong> Fairness, promotions, evaluation</li>
                  <li><strong>Benefits:</strong> Flexibility, insurance, holidays</li>
                  <li><strong>Career:</strong> Progression, feedback, development</li>
                  <li><strong>Work Environment:</strong> Recognition, autonomy, challenges</li>
                  <li><strong>Culture:</strong> Leadership, team spirit, purpose</li>
                </ul>
                <div className="bg-yellow-100 p-4 mt-4">
                  <strong>Important:</strong> Your #1 ranked need is where you will focus your EVP. Choose the dimension where you can credibly claim to be better than competitors.
                </div>
              </>
            )
          },
          3: {
            title: 'EVP Formulation',
            content: (
              <>
                <p className="mb-4">
                  Your EVP is the promise you make to employees. It should focus on your #1 ranked need and articulate what makes you different.
                </p>
                <h4 className="font-bold mb-2">EVP Formula:</h4>
                <p className="mb-4">
                  Primary Need + Core Promise + Differentiator = EVP Statement
                </p>
                <div className="bg-gray-100 p-4 mb-4">
                  <strong>Strong EVP Example:</strong>
                  <p className="mt-2 italic">
                    "The Best Place for Technical Craftsmen Who Want Stability and Mastery. Work With the Best Machines. Learn from the Best People."
                  </p>
                </div>
                <h4 className="font-bold mb-2">Weak vs Strong EVPs:</h4>
                <p><strong>Weak:</strong> "We value our people and offer great opportunities"</p>
                <p><strong>Strong:</strong> "Where skilled technicians master their craft with industry-leading equipment and 8+ year average tenure"</p>
              </>
            )
          },
          4: {
            title: 'EVP Testing',
            content: (
              <>
                <p className="mb-4">
                  Test your EVP for authenticity and sharpness.
                </p>
                <h4 className="font-bold mb-2">Internal Truths:</h4>
                <p className="mb-2">Real, lived elements that support your EVP. Must be:</p>
                <ul className="list-disc ml-6 mb-4">
                  <li>Factually true (not aspirational)</li>
                  <li>Backed by evidence</li>
                  <li>What insiders would say when recommending your workplace</li>
                </ul>
                <h4 className="font-bold mb-2">The Power of Anti-EVP:</h4>
                <p className="mb-4">
                  Stating what you're NOT sharpens your positioning. It helps the right people self-select in and wrong people self-select out.
                </p>
                <div className="bg-yellow-100 p-4">
                  <strong>Example Anti-EVP:</strong>
                  <p className="mt-2">
                    "We are NOT a fast-paced startup with constant change"<br/>
                    "We are NOT a place for people who want to switch roles every year"
                  </p>
                </div>
              </>
            )
          },
          5: {
            title: 'Campaign Planning',
            content: (
              <>
                <p className="mb-4">
                  Turn your EVP into a recruitment campaign with clear messages, channels, and activation plan.
                </p>
                <h4 className="font-bold mb-2">Campaign Elements:</h4>
                <ul className="list-disc ml-6 mb-4 space-y-1">
                  <li>Brand message and tagline</li>
                  <li>Key messages tailored by audience</li>
                  <li>Inbound and outbound channel strategy</li>
                  <li>Structured recruitment process</li>
                  <li>90-day activation timeline</li>
                </ul>
                <h4 className="font-bold mb-2">Channel Selection:</h4>
                <p className="mb-2"><strong>Inbound:</strong> Where candidates find you (LinkedIn, job boards, career page)</p>
                <p className="mb-4"><strong>Outbound:</strong> How you reach candidates (direct outreach, headhunting)</p>
                <div className="bg-gray-100 p-4">
                  <strong>Example Message:</strong>
                  <p className="mt-2 italic">
                    "At [Company], you don't just work a job - you master your craft"
                  </p>
                </div>
              </>
            )
          }
        };

        const content = helpContent[step] || { title: 'Help', content: <p>No help available for this step.</p> };

        return (
          <div className="modal-overlay" onClick={() => setShowHelp(false)}>
            <div className="modal-content" onClick={(e) => e.stopPropagation()}>
              <button className="modal-close" onClick={() => setShowHelp(false)}>
                ×
              </button>
              <h2 className="plaak text-3xl mb-6">{content.title}</h2>
              <div className="text-lg leading-relaxed">
                {content.content}
              </div>
            </div>
          </div>
        );
      };

      // Progress Indicator Component
      const ProgressIndicator = ({ currentStep }) => {
        const steps = [
          { number: 1, label: 'Segment' },
          { number: 2, label: 'Needs' },
          { number: 3, label: 'EVP' },
          { number: 4, label: 'Test' },
          { number: 5, label: 'Campaign' }
        ];

        return (
          <div className="flex items-center justify-center mb-12 animate-in">
            {steps.map((s, index) => (
              <Fragment key={s.number}>
                <div className="flex flex-col items-center">
                  <div
                    className={`progress-dot mb-2 ${
                      s.number === currentStep
                        ? 'active'
                        : s.number < currentStep
                        ? 'completed'
                        : ''
                    }`}
                  ></div>
                  <span
                    className={`monument text-xs ${
                      s.number <= currentStep ? 'text-black' : 'text-gray-400'
                    }`}
                  >
                    {s.label}
                  </span>
                </div>
                {index < steps.length - 1 && (
                  <div className="progress-line mx-4" style={{ width: '80px' }}></div>
                )}
              </Fragment>
            ))}
          </div>
        );
      };

      return (
        <div>
          {step === 0 && renderCoverPage()}
          {step === 0.5 && renderIntroduction()}
          {step === 1 && renderStep1()}
          {step === 2 && renderStep2()}
          {step === 3 && renderStep3()}
          {step === 4 && renderStep4()}
          {step === 5 && renderStep5()}
          {step === 6 && renderStep6()}

          {step >= 1 && step <= 5 && (
            <button className="help-button" onClick={() => setShowHelp(true)}>
              ?
            </button>
          )}

          {showHelp && renderHelpModal()}
        </div>
      );
    }

    // Render App
    ReactDOM.render(<EmployerBrandingApp />, document.getElementById('root'));
  </script>
</body>
</html>
