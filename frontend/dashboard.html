<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fast Track Tools Dashboard</title>
  <link rel="icon" type="image/png" href="../designs for tools and landing page/01. favicon/favicon-16x16.png">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React 18 CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel Standalone for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <style>
    /* Fast Track Brand Fonts */
    @font-face {
      font-family: 'Plaak';
      src: url('../designs for tools and landing page/03. Fonts/woff2/Plaak3Trial-43-Bold.woff2') format('woff2');
      font-weight: bold;
      font-style: normal;
      font-display: swap;
    }

    @font-face {
      font-family: 'Riforma';
      src: url('../designs for tools and landing page/03. Fonts/woff2/RiformaLL-Regular.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    @font-face {
      font-family: 'Monument Grotesk';
      src: url('../designs for tools and landing page/03. Fonts/woff2/MonumentGrotesk-Mono.woff2') format('woff2');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }

    /* CSS Custom Properties */
    :root {
      --color-black: #000000;
      --color-white: #FFFFFF;
      --color-grey: #B2B2B2;
      --color-yellow: #FFF469;
      --font-plaak: 'Plaak', Arial, sans-serif;
      --font-riforma: 'Riforma', Arial, sans-serif;
      --font-monument: 'Monument Grotesk', 'Courier New', monospace;
    }

    /* CSS Reset */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    /* Base Styles */
    html, body {
      height: 100%;
      background-color: var(--color-black);
      color: var(--color-white);
      font-family: var(--font-riforma);
      line-height: 1.5;
    }

    body {
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Typography */
    h1, h2, h3 {
      font-family: var(--font-plaak);
      text-transform: uppercase;
      font-weight: bold;
      line-height: 1.2;
    }

    h1 { font-size: 3rem; }
    h2 { font-size: 2rem; }
    h3 { font-size: 1.5rem; }
    h4 { font-size: 1.25rem; }
    h5 { font-size: 1rem; }
    h6 { font-size: 0.875rem; }

    p {
      font-family: var(--font-riforma);
      text-transform: none;
    }

    label, .label {
      font-family: var(--font-monument);
      text-transform: uppercase;
      font-size: 0.75rem;
      letter-spacing: 0.05em;
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 10px;
      background-color: var(--color-black);
    }

    ::-webkit-scrollbar-track {
      background: var(--color-black);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--color-grey);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--color-yellow);
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(255, 244, 105, 0.7); }
      50% { box-shadow: 0 0 0 10px rgba(255, 244, 105, 0); }
    }

    .unlock-animation {
      animation: fadeIn 0.5s ease-out, pulse 1s ease-out 0.5s;
    }

    /* Fast Track Brand Color Classes */
    .bg-ft-yellow {
      background-color: #FFF469 !important;
    }

    .text-ft-yellow {
      color: #FFF469 !important;
    }

    .border-ft-yellow {
      border-color: #FFF469 !important;
    }

    .bg-ft-grey {
      background-color: #B2B2B2 !important;
    }

    .text-ft-grey {
      color: #B2B2B2 !important;
    }

    .bg-ft-dark {
      background-color: #1F1F1F !important;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo, memo, useCallback, useRef } = React;

    // Base64 Logo
    const LOGO_BASE64 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABJ0AAAUgCAMAAADdTdZqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA/RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ4IDc5LjE2NDAzNiwgMjAxOS8wOC8xMy0wMTowNjo1NyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjVEMjA4OTI0OTNCRkRCMTE5MTRBODU5MEQzMTUwOEM4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFBMTg0ODkzM0M1MjExRUFCN0NBOEQ3NjcwMzgwQ0I5IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFBMTg0ODkyM0M1MjExRUFCN0NBOEQ3NjcwMzgwQ0I5IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIElsbHVzdHJhdG9yIDI0LjAgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYWY3MTIwZC1lNjVmLTQ4NTktYjBhMi05MWIxZjE4MWRjYzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MWFmNzEyMGQtZTY1Zi00ODU5LWIwYTItOTFiMWYxODFkY2M2Ii8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+UHJpbnQ8L3JkZjpsaT4gPC9yZGY6QWx0PiA8L2RjOnRpdGxlPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvI1kiAAAAAGUExURf///////1V89WwAAAACdFJOU/8A5bcwSgAADl1JREFUeNrs1LEJADAMA0Fn/6WDy+AulTB3IwjxVQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMByCROgHqBKBOgDoBqBOgTgDqBKBOgDoBqBOgTgDqBKgTgDoBqBOgTgDqBKgTgDoBqBOgTgDqBKgTgDoB6gSgTgDqBKgTgDoB6gSgTgDqBKgTgDoB6gSgToA6AagTgDoB6gSgToA6AagTgDoB6gSgToA6AagToE4A6gSgToA6AagToE4A6gSoE4A6AagToE4A6gSoE4A6AagToE4An3UCXrKgTqBOqBOokzqBOqFOoE7qBOqEOoE6oU6gTuoE6oQ6gTqpE6gT6gTqpE6gTqgTqBPqBOqkTqBOqBOokzqBOqFOoE7qBKiTOoE6oU6gTuoE6oQ6gTqpE6gT6gTqhDqBOqkTqBPqBOqkTqBOqBOokzoB6qROoE6oE6iTOoE6oU6gTuoE6oQ6gTqhTqBO6gTqhDqBOqkTqBPqBOqkToAsqBOoE+oE6qROoE6oE6iTOoE6oU6gTqgTqJM6gTqhTqBO6gTqhDqBOqkTqBPqBOqEOoE6qROoE+oE6qROoE6oE6iTOgHqpE6gTqgTqJM6gTqhTqBO6gTqhDqBOqFOoE7qBOqEOoE6qROoE+oE6qROgDqpE6gT6gTqpE6gTqgTqJM6gTqhTqBOqBOokzqBOqFOoE7qBOqEOoE6qRMgC+oE6oQ6gTqpE6gT6gTqpE6gTqgTqBPqBOqkTqBOqBOokzqBOqFOoE7qBOqEOoE6oU6gTuoE6oQ6gTqpE6gT6gTqpE6AOqkTqBPqBOqkTqBOqBOokzqBOqFOoE6oE6iTOoE6oU6gTuoE6oQ6gTqpE6BO6gTqhDqBOqkTqBPqBOqkTqBOqBOoE+oE6qROoE6oE6iTOoE6oU6gTuoEyII6gTqhTqBO6gTqhDqBOqkTqBPqBOqEOoE6qROoE+oE6qROoE6oE6iTOoE6oU6gTqgTqJM6gTqhTqBO6gTqhDqBOqkToE7qBOqEOoE6qROoE+oE6qROoE6oE6gT6gTqpE6gTqgTqJM6gTqhTqBO6gSokzqBOqFOoE7qBOqEOoE6qROoE+oE6oQ6gTqpE6gT6gTqpE6gTqgTqJM6AbKgTqBOqBOokzqBOqFOoE7qBOqEOoE6oU6gTuoE6oQ6gTqpE6gT6gTqpE6gTqgTqBPqBOqkTqBOqBOokzqBOqFOoE7qBKiTOoE6oU6gTuoE6oQ6gTqpE6gT6gTqhDqBOqkTqBPqBOqkTqBOqBOokzoB6qROoE6oE6iTOoE6oU6gTuoE6oQ6gTqhTqBO6gTqhDqBOqkTqBPqBOqkToAsqBOoE+oE6qROoE6oE6iTOoE6oU6gTqgTqJM6gTqhTqBO6gTqhDqBOqkTqBPqBOqEOoE6qROoE+oE6qROoE6oE6iTOgHqpE6gTqgTqJM6gTqhTqBO6gTqhDqBOqFOoE7qBOqEOoE6qROoE+oE6qROgDqpE6gT6gTqpE6gTqgTqJM6gTqhTqBOqBOokzqBOqFOoE7qBOqEOoE6qRMgC+oE6oQ6gTqpE6gT6gTqpE6gTqgTqBPqBOqkTqBOqBOokzqBOqFOoE7qBOqEOoE6oU6gTuoE6oQ6gTqpE6gT6gTqpE6AOqkTqBPqBOqkTqBOqBOokzqBOqFOoE6oE6iTOoE6oU6gTuoE6oQ6gTqpE6BO6gTqhDqBOqkTqBPqBOqkTqBOqBOoE+oE6qROoE6oE6iTOoE6oU6gTuoEyII6gTqhTqBO6gTqhDqBOqkTqBPqBOqEOoE6qROoE+oE6qROoE6oE6iTOoE6oU6gTqgTqJM6gTqhTqBO6gTqhDqBOqkToE7qBOqEOoE6qROoE+oE6qROoE6oE6gT6gTqpE6gTqgTqJM6gTqhTqBO6gSokzqBOqFOoE7qBOqEOoE6qROoE+oE6oQ6gTqpE6gT6gTqpE6gTqgTqJM6AbKgTqBOqBOokzqBOqFOoE7qBOqEOoE6oU6gTuoE6oQ6gTqpE6gT6gTqpE6gTqgTqBPqBOqkTqBOqBOokzqBOqFOoE7qBKiTOoE6oU6gTuoE6oQ6gTqpE6gT6gTqhDqBOqkTqBPqBOqkTqBOqBOokzoB6qROoE6oE6iTOoE6oU6gTuoE6oQ6gTqhTqBO6gTqhDqBOqkTqBPqBOqkToAsqBOoE+oE6qROoE6oE6iTOoE6oU6gTnSdTACoE4A6AeoEoE6AOgGoE4A6AeoEoE6AOgGoE6BOAOoEoE6AOgGoE6BOAOoEoE6AOgGoE6BOAOoEqBOAOgGoE6BOAOoEqBOAOgGoE6BOAOoEqBOAOgHqBKBOAOoEqBOAOgHqBKBOgDqZAFAnAHUC1AlAnQB1AlAnAHUC1AlAnQB1AlAnQJ0A1AlAnQB1AlAnQJ0A1AlAnQB1AlAnYFOdSOGMoE7qBOqEOoE6qROoE+oE6qROoE6oE6gT6gTqpE6gTqgTqJM6gTqhTqBO6gSokzqBOqFOoE7qBOqEOoE6qROoE+oE6oQ6gTqpE6gT6gTqpE6gTqgTqJM6AeqkTqBOqBOokzqBOqFOoE7qBOqEOoE6oU6gTuoE6oQ6gTqpE6gT6gTqpE6gTqgTqBPqBOqkTqBOqBOokzqBOqFOoE44I6iTOoE6oU6gTuoE6oQ6gTqpE6gT6gTqhDqBOqkTqBPqBOqkTqBOqBOokzoB6qROoE6oE6iTOoE6oU6gTuoE6oQ6gTqhTqBO6gTqhDqBOqkTqBPqBOqkToA6qROoE+oE6qROoE6oE6iTOoE6oU6gTqgTqJM6gTqhTqBO6gTqhDqBOqkTqBPqBOqEOoE6qROoE+oE6qROoE6oE6gTzgjqpE6gTqgTqJM6gTqhTqBO6gTqhDqBOqFOoE7qBOqEOoE6qROoE+oE6qROgDqpE6gT6gTqpE6gTqgTqJM6gTqhTqBOqBOokzqBOqFOoE7qBOqEOoE6qROgTuoE6oQ6gTqpE6gT6gTqpE6gTqgTqBPqBOqkTqBOqBOokzqBOqFOoE7qBOqEOoE6oU6gTuoE6oQ6gTqpE6gT6gTqhDOCOqkTqBPqBOqkTqBOqBOokzqBOqFOoE6oE6iTOoE6oU6gTuoE6oQ6gTqpE6BO6gTqhDqBOqkTqBPqBOqkTqBOqBOoE+oE6qROoE6oE6iTOoE6oU6gTuoEqJM6gTqhTqBO6gTqhDqBOqkTqBPqBOqEOoE6qROoE+oE6qROoE6oE6iTOoE6oU6gTqgTqJM6gTqhTqBO6gTqhDqBOuGMoE7qBOqEOoE6qROoE+oE6qROoE6oE6gT6gTqpE6gTqgTqJM6gTqhTqBO6gSokzqBOqFOoE7qBOqEOoE6qROoE+oE6oQ6gTqpE6gT6gTqpE6gTqgTqJM6AeqkTqBOqBOokzqBOqFOoE7qBOqEOoE6oU6gTuoE6oQ6gTqpE6gT6gTqpE6gTqgTqBPqBOqkTqBOqBOokzqBOqFOoE44I6iTOoE6oU6gTuoE6oQ6gTqpE6gT6gTqhDqBOqkTqBPqBOqkTqBOqBOokzoB6qROoE6oE6iTOoE6oU6gTuoE6oQ6gTqhTqBO6gTqhDqBOqkTqBPqBOqkToA6qROoE+oE6qROoE6oE6iTOoE6oU6gTqgTqJM6gTqhTqBO6gTqhDqBOqkTqBPqBOqEOoE6qROoE+oE6qROoE6oE6gTzgjqpE6gTqgTqJM6gTqhTqBO6gTqhDqBOqFOoE7qBOqEOoE6qROoE+oE6qROgDqpE6gT6gTqpE6gTqgTqJM6gTqhTqBOqBOokzqBOqFOoE7qBOqEOoE6qROgTuoE6oQ6gTqpE6gT6gTqpE6gTqgTqBPqBOqkTqBOqBOokzqBOqFOoE7qBOqEOoE6oU6gTuoE6oQ6gTqpE6gT6gTqhDOCOqkTqBPqBOqkTqBOqBOokzqBOqFOoE6oE6iTOoE6oU6gTuoE6oQ6gTqpE6BO6gTqhDqBOqkTqBPqBOqkTqBOqBOoE+oE6qROoE6oE6iTOoE6oU6gTuoEqJM6gTqhTqBO6gTqhDqBOqkTqBPqBOqEOoE6qROoE+oE6qROoE6oE6iTOoE6oU6gTqgTqJM6gTqhTqBO6gTqhDqBOuGMoE7qBOqEOoE6qROoE+oE6qROoE6oE6gT6gTqpE6gTqgTqJM6gTqhTqBO6gSokzqBOqFOoE7qBOqEOoE6qROoE+oE6oQ6gTqpE6gT6gTqpE6gTqgTqJM6AeqkTqBOqBOokzqBOqFOoE7qBOqEOoE6oU6gTuoE6oQ6gTqpE6gT6gTqpE6gTqgTqBPqBOqkTqBOqBOokzqBOqFOoE44I6iTOoE6oU6gTuoE6oQ6gTqpE6gT6gRBrgADACv1cFqooT5RAAAAAElFTkSuQmCC';

    // Config
    const CONFIG = {
      apiBaseURL: window.location.hostname === 'localhost' ? 'http://localhost:3000' : window.location.origin,
      learnWorldsLoginURL: 'https://fasttrack.learnworlds.com/login',
      tokenKey: 'ft_token',
      pollingInterval: 30000,
    };

    // Demo mode disabled - using real backend API
    const DEMO_MODE = false;

    // Module definitions - aligned with tool-registry.json
    const MODULES = [
      { id: 0, name: 'Intro Sprint', sprints: [0] },
      { id: 1, name: 'Individual & Company Identity', sprints: [1,2,3,4,5] },
      { id: 2, name: 'Core Elements of Performance', sprints: [6,7,8,9,10,11] },
      { id: 3, name: 'Understanding the Market', sprints: [12,13] },
      { id: 4, name: 'Strategy Development', sprints: [14,15,16] },
      { id: 5, name: 'Strategy Execution', sprints: [17,18,19,20,21] },
      { id: 6, name: 'Organizational Structure', sprints: [22,23,24,25] },
      { id: 7, name: 'People & Leadership', sprints: [26,27] },
      { id: 8, name: 'Tech & AI', sprints: [28,29,30] }
    ];

    // Auth utilities
    const auth = {
      extractTokenFromURL: () => {
        const urlParams = new URLSearchParams(window.location.search);
        const token = urlParams.get('token');
        if (token) {
          localStorage.setItem(CONFIG.tokenKey, token);
          window.history.replaceState({}, document.title, window.location.pathname);
        }
        return token;
      },
      getToken: () => localStorage.getItem(CONFIG.tokenKey),
      logout: (message = '') => {
        if (message) alert(message);
        localStorage.removeItem(CONFIG.tokenKey);
        setTimeout(() => window.location.href = CONFIG.learnWorldsLoginURL, 2000);
      },
      enforceHTTPS: () => {
        if (window.location.hostname !== 'localhost' && window.location.protocol !== 'https:') {
          window.location.href = 'https:' + window.location.href.substring(window.location.protocol.length);
        }
      }
    };

    // API Client
    const api = {
      baseURL: CONFIG.apiBaseURL,
      request: async (endpoint, options = {}) => {
        const token = auth.getToken();
        const headers = {
          'Content-Type': 'application/json',
          ...(token && { 'Authorization': `Bearer ${token}` }),
          ...options.headers,
        };
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), options.timeout || 30000);
        try {
          const response = await fetch(`${api.baseURL}${endpoint}`, {...options, headers, signal: controller.signal});
          clearTimeout(timeoutId);
          if (response.status === 401) { auth.logout('Session expired.'); throw new Error('Unauthorized'); }
          if (!response.ok) throw new Error(`HTTP ${response.status}`);
          return await response.json();
        } catch (error) {
          clearTimeout(timeoutId);
          throw error;
        }
      },
      getTools: () => api.request('/api/tools'),
      getUserProgress: () => api.request('/api/user/progress'),
      getUserInfo: () => api.request('/api/auth/me'),
      getToolData: (slug) => api.request(`/api/tools/${slug}/data`),
    };

    // Launch tool helper
    function launchTool(tool) {
      const token = auth.getToken();
      // Use the file path from tool registry (now includes module folder)
      const url = `/frontend/tools/${tool.file}?token=${token}`;
      window.location.href = url;
    }

    // Components
    const ProgressBar = memo(({ progress = 0, className = '' }) => (
      <div className={`w-full bg-ft-dark h-2 rounded-full overflow-hidden ${className}`}>
        <div className="h-full bg-ft-yellow transition-all duration-300" style={{ width: `${Math.max(0, Math.min(100, progress))}%` }}></div>
      </div>
    ));

    const StatusBadge = memo(({ status }) => {
      const styles = {
        locked: 'text-ft-grey text-xs uppercase',
        unlocked: 'text-white text-xs uppercase',
        in_progress: 'text-ft-yellow text-xs uppercase font-bold',
        completed: 'text-white text-xs uppercase font-bold'
      };
      const labels = {
        locked: 'LOCKED',
        unlocked: 'UNLOCKED',
        in_progress: 'IN PROGRESS',
        completed: 'DONE'
      };
      return <span className={styles[status] || styles.locked} style={{fontFamily: 'var(--font-monument)'}}>{labels[status] || 'LOCKED'}</span>;
    });

    const LaunchButton = memo(({ tool, disabled }) => (
      <button onClick={() => !disabled && launchTool(tool)} disabled={disabled} className={`px-6 py-2 rounded font-bold uppercase transition ${disabled ? 'bg-gray-600 text-gray-400 cursor-not-allowed' : 'bg-black text-white hover:bg-gray-800 cursor-pointer'}`} style={{fontFamily: 'var(--font-monument)', fontSize: '0.75rem'}} aria-disabled={disabled}>
        {tool.status === 'in_progress' ? 'CONTINUE' : 'LAUNCH'}
      </button>
    ));

    const ViewSummaryButton = memo(({ onClick }) => (
      <button onClick={onClick} className="px-6 py-2 rounded bg-ft-yellow text-black font-bold uppercase transition" style={{fontFamily: 'var(--font-monument)', fontSize: '0.75rem'}} onMouseEnter={(e) => e.target.style.backgroundColor = '#FFED7A'} onMouseLeave={(e) => e.target.style.backgroundColor = '#FFF469'}>VIEW SUMMARY</button>
    ));

    const ToolCard = memo(({ tool, onViewSummary }) => {
      const isLocked = tool.status === 'locked';
      const showProgress = tool.status === 'in_progress' && tool.progress != null;
      const isCompleted = tool.status === 'completed';
      const borderClass = tool.status === 'in_progress' ? 'border-2 border-ft-yellow' : '';

      return (
        <div className={`bg-white text-black p-6 rounded-lg shadow-lg ${borderClass} ${isLocked ? 'opacity-60' : ''}`}>
          <div className="mb-2">
            <span className="text-xs uppercase text-gray-500" style={{fontFamily: 'var(--font-monument)'}}>Sprint {String(tool.sprint).padStart(2, '0')}</span>
          </div>
          <h3 className="text-xl mb-3" style={{fontFamily: 'var(--font-plaak)'}}>{tool.name}</h3>
          <div className="mb-3">
            <StatusBadge status={tool.status} />
          </div>
          {showProgress && (
            <div className="mb-4">
              <ProgressBar progress={tool.progress} />
              <span className="text-xs text-gray-600 mt-1">{tool.progress}%</span>
            </div>
          )}
          <div className="flex gap-2">
            {isCompleted ? (
              <ViewSummaryButton onClick={() => onViewSummary(tool)} />
            ) : (
              <LaunchButton tool={tool} disabled={isLocked} />
            )}
          </div>
        </div>
      );
    });

    const Module = memo(({ module, tools, collapsed, onToggle, onViewSummary }) => {
      const moduleTools = tools.filter(t => module.sprints.includes(t.sprint));
      const completed = moduleTools.filter(t => t.status === 'completed').length;
      const total = moduleTools.length;

      return (
        <div className="mb-8">
          <div onClick={onToggle} className="flex items-center justify-between cursor-pointer bg-gray-900 p-4 rounded-lg hover:bg-gray-800 transition">
            <div>
              <h2 className="text-2xl text-white mb-1" style={{fontFamily: 'var(--font-plaak)'}}>{module.name}</h2>
              <span className="text-sm text-gray-400" style={{fontFamily: 'var(--font-monument)'}}>SPRINTS {module.sprints[0]}-{module.sprints[module.sprints.length-1]} • {completed}/{total} COMPLETE</span>
            </div>
            <span className="text-ft-yellow text-2xl">{collapsed ? '+' : '−'}</span>
          </div>
          {!collapsed && (
            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
              {moduleTools.map(tool => <ToolCard key={tool.id} tool={tool} onViewSummary={onViewSummary} />)}
            </div>
          )}
        </div>
      );
    });

    const SummaryModal = memo(({ tool, onClose }) => {
      const [data, setData] = useState(null);
      const [loading, setLoading] = useState(true);
      const [error, setError] = useState(null);

      useEffect(() => {
        if (tool) {
          setLoading(true);
          api.getToolData(tool.slug)
            .then(setData)
            .catch(err => setError(err.message))
            .finally(() => setLoading(false));
        }
      }, [tool]);

      useEffect(() => {
        const handleEscape = (e) => e.key === 'Escape' && onClose();
        document.addEventListener('keydown', handleEscape);
        return () => document.removeEventListener('keydown', handleEscape);
      }, [onClose]);

      if (!tool) return null;

      return (
        <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4" onClick={onClose} role="dialog" aria-modal="true">
          <div className="bg-white text-black rounded-lg max-w-4xl w-full max-h-[80vh] overflow-auto" onClick={(e) => e.stopPropagation()}>
            <div className="flex justify-between items-center p-6 border-b">
              <div>
                <h2 className="text-3xl" style={{fontFamily: 'var(--font-plaak)'}}>{tool.name}</h2>
                <span className="text-sm text-gray-500" style={{fontFamily: 'var(--font-monument)'}}>SPRINT {String(tool.sprint).padStart(2, '0')}</span>
              </div>
              <button onClick={onClose} className="text-3xl hover:text-gray-600">&times;</button>
            </div>
            <div className="p-6">
              {loading && <p>Loading summary...</p>}
              {error && <p className="text-red-500">Error: {error}</p>}
              {data && <pre className="whitespace-pre-wrap">{JSON.stringify(data, null, 2)}</pre>}
            </div>
            <div className="p-6 border-t flex justify-end gap-3">
              <button onClick={() => launchTool(tool)} className="px-6 py-2 bg-black text-white rounded hover:bg-gray-800">RELAUNCH TOOL</button>
              <button onClick={onClose} className="px-6 py-2 bg-gray-200 rounded hover:bg-gray-300">CLOSE</button>
            </div>
          </div>
        </div>
      );
    });

    const Header = memo(({ user, overallProgress }) => (
      <header className="bg-black text-white p-6 border-b border-gray-800">
        <div className="max-w-7xl mx-auto flex items-center justify-between">
          <div className="flex items-center gap-4">
            <img src={LOGO_BASE64} alt="Fast Track Logo" className="h-12" />
            {DEMO_MODE && <span className="bg-ft-yellow text-black px-3 py-1 rounded text-xs font-bold uppercase" style={{fontFamily: 'var(--font-monument)'}}>DEMO MODE</span>}
          </div>
          <div className="flex items-center gap-6">
            <div className="text-right">
              <p className="text-sm" style={{fontFamily: 'var(--font-riforma)'}}>{user?.name || 'User'}</p>
              <div className="w-40">
                <ProgressBar progress={overallProgress} className="mt-1" />
              </div>
            </div>
          </div>
        </div>
      </header>
    ));

    const Hero = memo(({ completed, currentSprint }) => (
      <section className="bg-black text-white py-16 px-6">
        <div className="max-w-7xl mx-auto">
          <h1 className="text-6xl mb-4" style={{fontFamily: 'var(--font-plaak)'}}>YOUR TRANSFORMATION JOURNEY</h1>
          <p className="text-2xl text-gray-300 mb-2" style={{fontFamily: 'var(--font-riforma)'}}>{completed} of 30 tools complete</p>
          {currentSprint != null && <p className="text-lg text-ft-yellow" style={{fontFamily: 'var(--font-monument)'}}>CURRENT SPRINT: {currentSprint}</p>}
        </div>
      </section>
    ));

    const Footer = memo(() => (
      <footer className="bg-black text-white py-8 px-6 border-t border-gray-800">
        <div className="max-w-7xl mx-auto text-center">
          <p className="text-3xl mb-2" style={{fontFamily: 'var(--font-plaak)'}}>NO GRIT. NO GROWTH.</p>
          <p className="text-sm text-gray-400" style={{fontFamily: 'var(--font-riforma)'}}>© {new Date().getFullYear()} Fast Track Ltd. All rights reserved.</p>
        </div>
      </footer>
    ));

    function Dashboard() {
      const [user, setUser] = useState(null);
      const [tools, setTools] = useState([]);
      const [loading, setLoading] = useState(true);
      const [error, setError] = useState(null);
      const [collapsedModules, setCollapsedModules] = useState(() => {
        const saved = localStorage.getItem('collapsed_modules');
        return saved ? JSON.parse(saved) : [];
      });
      const [modalTool, setModalTool] = useState(null);

      const overallProgress = useMemo(() => {
        const completed = tools.filter(t => t.status === 'completed').length;
        return tools.length > 0 ? Math.round((completed / tools.length) * 100) : 0;
      }, [tools]);

      const completedCount = useMemo(() => tools.filter(t => t.status === 'completed').length, [tools]);

      const currentSprint = useMemo(() => {
        const inProgress = tools.find(t => t.status === 'in_progress');
        if (inProgress) return inProgress.sprint;
        const unlocked = tools.find(t => t.status === 'unlocked');
        return unlocked ? unlocked.sprint : null;
      }, [tools]);

      const fetchData = useCallback(async () => {
        try {
          const [toolsData, userData] = await Promise.all([api.getTools(), api.getUserInfo()]);
          setTools(toolsData);
          setUser(userData);
          setError(null);
        } catch (err) {
          setError(err.message);
        } finally {
          setLoading(false);
        }
      }, []);

      useEffect(() => {
        auth.enforceHTTPS();
        auth.extractTokenFromURL();
        if (!auth.getToken()) {
          auth.logout('Please log in.');
          return;
        }
        fetchData();
        const interval = setInterval(fetchData, CONFIG.pollingInterval);
        return () => clearInterval(interval);
      }, [fetchData]);

      const toggleModule = useCallback((moduleId) => {
        setCollapsedModules(prev => {
          const newState = prev.includes(moduleId) ? prev.filter(id => id !== moduleId) : [...prev, moduleId];
          localStorage.setItem('collapsed_modules', JSON.stringify(newState));
          return newState;
        });
      }, []);

      if (loading) return <div className="min-h-screen bg-black text-white flex items-center justify-center"><p className="text-2xl">Loading...</p></div>;
      if (error) return <div className="min-h-screen bg-black text-white flex items-center justify-center"><p className="text-red-500">Error: {error}</p></div>;

      return (
        <div className="min-h-screen bg-black">
          <Header user={user} overallProgress={overallProgress} />
          <Hero completed={completedCount} currentSprint={currentSprint} />
          <main className="max-w-7xl mx-auto px-6 py-12">
            {MODULES.map(module => (
              <Module key={module.id} module={module} tools={tools} collapsed={collapsedModules.includes(module.id)} onToggle={() => toggleModule(module.id)} onViewSummary={setModalTool} />
            ))}
          </main>
          <Footer />
          {modalTool && <SummaryModal tool={modalTool} onClose={() => setModalTool(null)} />}
        </div>
      );
    }

    // Mount
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<Dashboard />);
  </script>
</body>
</html>
